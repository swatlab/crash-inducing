{"bugs":{"790139":{"comments":[{"is_private":false,"attachment_id":null,"creator":"mzehe@mozilla.com","time":"2012-09-11T04:56:02Z","author":"mzehe@mozilla.com","bug_id":790139,"tags":[],"text":"This bug was filed from the Socorro interface and is \nreport bp-07fb607e-9105-4fad-9ecc-1534e2120911 .\n============================================================= \n\nAccording to community member Peter Vagner, this happens on http://nightly.mozilla.org, or often when he turns on Reader Mode. An installation of AdBlock doesn't seem to have any bearing. Have been unsuccessful in reproducing so far, but will keep trying.","id":6624542,"creation_time":"2012-09-11T04:56:02Z","raw_text":"This bug was filed from the Socorro interface and is \nreport bp-07fb607e-9105-4fad-9ecc-1534e2120911 .\n============================================================= \n\nAccording to community member Peter Vagner, this happens on http://nightly.mozilla.org, or often when he turns on Reader Mode. An installation of AdBlock doesn't seem to have any bearing. Have been unsuccessful in reproducing so far, but will keep trying."},{"is_private":false,"attachment_id":null,"creator":"peter.v@datagate.sk","time":"2012-09-11T07:30:34Z","author":"peter.v@datagate.sk","bug_id":790139,"tags":[],"text":"Hello,\nI have got some more details:\nI am using Samsung galaxy S II GTI9100 with CM-10 20120908 as of now but am updating the rom quite frequently.\nOriginally I have assumed the crashes might be related because of the accessibility support. After I got the fact Marco is unable to reproduce it I started to believe this might have something to do with my device / software combination. So I have attempted to load this bug url in the nightly running on the device so I will try to comment on the issue directly from the device. First the page loaded fine, I was able to read the content. Then I have tried to login but I was unsuccessfull. So I have used my PC to reset the password. Then I have again returned to the mobile to open this bug url and ooops, the crash occured as well.\nI am not going to uninstall and then install nightly back in case someone knowledgeable enough recommends doing something what might help.\nI have tried to dump a adb logcat into a file, however I have got 2 MB file. And I am not sure this is helpfull.","id":6624721,"creation_time":"2012-09-11T07:30:34Z","raw_text":"Hello,\nI have got some more details:\nI am using Samsung galaxy S II GTI9100 with CM-10 20120908 as of now but am updating the rom quite frequently.\nOriginally I have assumed the crashes might be related because of the accessibility support. After I got the fact Marco is unable to reproduce it I started to believe this might have something to do with my device / software combination. So I have attempted to load this bug url in the nightly running on the device so I will try to comment on the issue directly from the device. First the page loaded fine, I was able to read the content. Then I have tried to login but I was unsuccessfull. So I have used my PC to reset the password. Then I have again returned to the mobile to open this bug url and ooops, the crash occured as well.\nI am not going to uninstall and then install nightly back in case someone knowledgeable enough recommends doing something what might help.\nI have tried to dump a adb logcat into a file, however I have got 2 MB file. And I am not sure this is helpfull."},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-11T08:48:08Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"It's our #1 top crasher.\nCan you narrow down the logcat at the crash time and attach it to this bug?","id":6624824,"creation_time":"2012-09-11T08:48:08Z","raw_text":"It's our #1 top crasher.\nCan you narrow down the logcat at the crash time and attach it to this bug?"},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-12T07:57:49Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"*** Bug 790528 has been marked as a duplicate of this bug. ***","id":6628093,"creation_time":"2012-09-12T07:57:49Z","raw_text":""},{"is_private":false,"attachment_id":null,"creator":"teleyinex@gmail.com","time":"2012-09-13T06:52:11Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"Hi,\n\nI can confirm this bug right now: \n\nhttp://crash-stats.mozilla.com/report/index/bp-5af1177d-740d-4892-beba-681f42120913\n\nIt seems like browsing has been fixed without problems, because yesterday I barely could load any page with nightly and today it seems to be working more or less fine. The only problem is that as soon as I enable the reader mode in any page it crashes automatically. I've reproduced this behavior with and without Ad-Block plus so I guess it doesn't matter.\n\nI've started within the phone the logcat command and adjoining you should see it. I do not find too much related info, but in any case if I'm doing something wrong, let me know it, ok?\n\nI'm also using CM10.","id":6631469,"creation_time":"2012-09-13T06:52:11Z","raw_text":"Hi,\n\nI can confirm this bug right now: \n\nhttp://crash-stats.mozilla.com/report/index/bp-5af1177d-740d-4892-beba-681f42120913\n\nIt seems like browsing has been fixed without problems, because yesterday I barely could load any page with nightly and today it seems to be working more or less fine. The only problem is that as soon as I enable the reader mode in any page it crashes automatically. I've reproduced this behavior with and without Ad-Block plus so I guess it doesn't matter.\n\nI've started within the phone the logcat command and adjoining you should see it. I do not find too much related info, but in any case if I'm doing something wrong, let me know it, ok?\n\nI'm also using CM10."},{"is_private":false,"attachment_id":660724,"creator":"teleyinex@gmail.com","time":"2012-09-13T06:53:29Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"Created attachment 660724\nlogcat log file when crashing Firefox","id":6631473,"creation_time":"2012-09-13T06:53:29Z","raw_text":""},{"is_private":false,"attachment_id":null,"creator":"peter.v@datagate.sk","time":"2012-09-13T07:31:59Z","author":"peter.v@datagate.sk","bug_id":790139,"tags":[],"text":"While trying to capture the logcat I did the following.\n- connected the USB cable with debugging turned on\n- typed an nightly.mozilla.org into the avesome bar.\n- typed adb logcat > logcat.log on the terminal running on a PC\n- Tapped search button, waited a few second to see the crash reporter dialog,\n- submitted the crash closing nightly,\n- ended up on the android desktop,\n- exited adb window by pressing ctrl+c.\nI dont know how to make less verbose log with relevant info. Mine is about 2 MB in size.\nIf you can recommend me some reading material I would be happy to cooperate if it may help to identify and fix the issue.","id":6631514,"creation_time":"2012-09-13T07:31:59Z","raw_text":"While trying to capture the logcat I did the following.\n- connected the USB cable with debugging turned on\n- typed an nightly.mozilla.org into the avesome bar.\n- typed adb logcat > logcat.log on the terminal running on a PC\n- Tapped search button, waited a few second to see the crash reporter dialog,\n- submitted the crash closing nightly,\n- ended up on the android desktop,\n- exited adb window by pressing ctrl+c.\nI dont know how to make less verbose log with relevant info. Mine is about 2 MB in size.\nIf you can recommend me some reading material I would be happy to cooperate if it may help to identify and fix the issue."},{"is_private":false,"attachment_id":null,"creator":"peter.v@datagate.sk","time":"2012-09-13T07:44:14Z","author":"peter.v@datagate.sk","bug_id":790139,"tags":[],"text":"some more things I have noticed.\nOn my device auto updates are not working. When I am going to menu -> settings -> about firefox and tapping check for updates, I am getting a prompt \"no update available\".\nI have updated manually to sep 12 nightly build but crashes still persist. I can always reproduce it by going to http://nightly.mozilla.org/\n\nMight the updater issue be related somehow?","id":6631528,"creation_time":"2012-09-13T07:44:14Z","raw_text":"some more things I have noticed.\nOn my device auto updates are not working. When I am going to menu -> settings -> about firefox and tapping check for updates, I am getting a prompt \"no update available\".\nI have updated manually to sep 12 nightly build but crashes still persist. I can always reproduce it by going to http://nightly.mozilla.org/\n\nMight the updater issue be related somehow?"},{"is_private":false,"attachment_id":null,"creator":"teleyinex@gmail.com","time":"2012-09-13T07:53:58Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"Hi,\n\nAs Peter I experienced the problem of the updates also in my previous CM9, now after reinstalling everything, CM10, the updates are coming back. However, the reader mode stills failing each time I enable it in the browser (it doesn't matter the page).\n\nCheers,\n\nDaniel","id":6631546,"creation_time":"2012-09-13T07:53:58Z","raw_text":"Hi,\n\nAs Peter I experienced the problem of the updates also in my previous CM9, now after reinstalling everything, CM10, the updates are coming back. However, the reader mode stills failing each time I enable it in the browser (it doesn't matter the page).\n\nCheers,\n\nDaniel"},{"is_private":false,"attachment_id":null,"creator":"peter.v@datagate.sk","time":"2012-09-13T07:56:47Z","author":"peter.v@datagate.sk","bug_id":790139,"tags":[],"text":"I have installed CM-10 at the end of the jully and was occassionally updating it. Since 6 sep update of CM-10 updates no longer work for me.\nI am not sure if this is because of CM-10 20120906 and newer or firefox 5 sep or newer.","id":6631548,"creation_time":"2012-09-13T07:56:47Z","raw_text":"I have installed CM-10 at the end of the jully and was occassionally updating it. Since 6 sep update of CM-10 updates no longer work for me.\nI am not sure if this is because of CM-10 20120906 and newer or firefox 5 sep or newer."},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-13T08:03:59Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"(In reply to Peter Vgner from comment #6)\n> I dont know how to make less verbose log with relevant info. Mine is about 2\n> MB in size.\nTry to note the exact time of the crash based on your phone clock and select in the log everything that happen two seconds before and after.\n\n(In reply to Peter Vgner from comment #7)\n> Might the updater issue be related somehow?\nIt's bug 789791 and not related because this bug happens in en-US builds and before September 5.","id":6631576,"creation_time":"2012-09-13T08:03:59Z","raw_text":"(In reply to Peter Vgner from comment #6)\n> I dont know how to make less verbose log with relevant info. Mine is about 2\n> MB in size.\nTry to note the exact time of the crash based on your phone clock and select in the log everything that happen two seconds before and after.\n\n(In reply to Peter Vgner from comment #7)\n> Might the updater issue be related somehow?\nIt's bug 789791 and not related because this bug happens in en-US builds and before September 5."},{"is_private":false,"attachment_id":null,"creator":"teleyinex@gmail.com","time":"2012-09-14T15:54:54Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"Updated today to the latest version (by the way, is the browser downloading in the background the updates automatically? because right now I only get a notification saying: apply downloaded version) and the same problem, when enabling reader mode crashes.","id":6635573,"creation_time":"2012-09-14T15:54:54Z","raw_text":"Updated today to the latest version (by the way, is the browser downloading in the background the updates automatically? because right now I only get a notification saying: apply downloaded version) and the same problem, when enabling reader mode crashes."},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-14T16:01:19Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"(In reply to Daniel Lombraa Gonzlez from comment #11)\n> Updated today to the latest version [...] and the same problem\nIt's normal, nobody is assigned to fix it because we are waiting the logcat.\nNote that custom kernels are not officially supported.","id":6635600,"creation_time":"2012-09-14T16:01:19Z","raw_text":"(In reply to Daniel Lombraa Gonzlez from comment #11)\n> Updated today to the latest version [...] and the same problem\nIt's normal, nobody is assigned to fix it because we are waiting the logcat.\nNote that custom kernels are not officially supported."},{"is_private":false,"attachment_id":661312,"creator":"teleyinex@gmail.com","time":"2012-09-14T19:17:13Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"Created attachment 661312\nlogcat file when crashing Firefox in reader mode CM10\n\nbuild.board: aries\nbuild.bootloader: unknown\nbuild.brand: samsung\nbuild.cpu_abi: armeabi-v7a\nbuild.cpu_abi2: armeabi\nbuild.device: GT-I9000\nbuild.display: cm_galaxysmtd-userdebug 4.1.1 JRO03L eng..20120909.192301 test-keys\nbuild.fingerprint: samsung/GT-I9000/GT-I9000:2.3.5/GINGERBREAD/XXJVT:user/release-keys\nbuild.hardware: aries\nbuild.host: cyanogenmod\nbuild.id: JRO03L\nbuild.manufacturer: samsung\nbuild.model: GT-I9000\nbuild.product: GT-I9000\nbuild.radio: unknown\nbuild.serial: 39307058339800EC\nbuild.tags: test-keys\nbuild.time: 1347243800000\nbuild.type: userdebug\nbuild.user: unknown\nversion.codename: REL\nversion.incremental: eng..20120909.192301\nversion.release: 4.1.1\nversion.sdk_int: 16","id":6636198,"creation_time":"2012-09-14T19:17:13Z","raw_text":"build.board: aries\nbuild.bootloader: unknown\nbuild.brand: samsung\nbuild.cpu_abi: armeabi-v7a\nbuild.cpu_abi2: armeabi\nbuild.device: GT-I9000\nbuild.display: cm_galaxysmtd-userdebug 4.1.1 JRO03L eng..20120909.192301 test-keys\nbuild.fingerprint: samsung/GT-I9000/GT-I9000:2.3.5/GINGERBREAD/XXJVT:user/release-keys\nbuild.hardware: aries\nbuild.host: cyanogenmod\nbuild.id: JRO03L\nbuild.manufacturer: samsung\nbuild.model: GT-I9000\nbuild.product: GT-I9000\nbuild.radio: unknown\nbuild.serial: 39307058339800EC\nbuild.tags: test-keys\nbuild.time: 1347243800000\nbuild.type: userdebug\nbuild.user: unknown\nversion.codename: REL\nversion.incremental: eng..20120909.192301\nversion.release: 4.1.1\nversion.sdk_int: 16"},{"is_private":false,"attachment_id":null,"creator":"teleyinex@gmail.com","time":"2012-09-14T19:17:43Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"Scoobiediver, do you need something else?","id":6636201,"creation_time":"2012-09-14T19:17:43Z","raw_text":"Scoobiediver, do you need something else?"},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-15T17:32:38Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"Daniel, with today's build do you hit this bug or bug 791462?","id":6637781,"creation_time":"2012-09-15T17:32:38Z","raw_text":"Daniel, with today's build do you hit this bug or bug 791462?"},{"is_private":false,"attachment_id":null,"creator":"teleyinex@gmail.com","time":"2012-09-16T21:42:40Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"Hi,\n\nI keep getting the same crash. Do you want another logcat file?\n\nDaniel","id":6638788,"creation_time":"2012-09-16T21:42:40Z","raw_text":"Hi,\n\nI keep getting the same crash. Do you want another logcat file?\n\nDaniel"},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-16T21:46:26Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"(In reply to Daniel Lombraa Gonzlez from comment #16)\n> I keep getting the same crash. Do you want another logcat file?\nNo. I though the crash signature morphed into a better one but it's a new one.","id":6638792,"creation_time":"2012-09-16T21:46:26Z","raw_text":"(In reply to Daniel Lombraa Gonzlez from comment #16)\n> I keep getting the same crash. Do you want another logcat file?\nNo. I though the crash signature morphed into a better one but it's a new one."},{"is_private":false,"attachment_id":null,"creator":"peter.v@datagate.sk","time":"2012-09-17T06:40:32Z","author":"peter.v@datagate.sk","bug_id":790139,"tags":[],"text":"Hello,\nI have skipped a few builds however now with build 2012-09-16 I am no longer getting crashes while browsing e.g. nightly.mozilla.org. I am still getting crashes when enabling reader mode.\nAnyway it is now verry usable for me again.\nthanks for what you all are doing.","id":6639204,"creation_time":"2012-09-17T06:40:32Z","raw_text":"Hello,\nI have skipped a few builds however now with build 2012-09-16 I am no longer getting crashes while browsing e.g. nightly.mozilla.org. I am still getting crashes when enabling reader mode.\nAnyway it is now verry usable for me again.\nthanks for what you all are doing."},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-19T08:21:53Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"*** Bug 792260 has been marked as a duplicate of this bug. ***","id":6646675,"creation_time":"2012-09-19T08:21:53Z","raw_text":""},{"is_private":false,"attachment_id":null,"creator":"yumpusamongus@gmail.com","time":"2012-09-19T08:47:44Z","author":"yumpusamongus@gmail.com","bug_id":790139,"tags":[],"text":"This crash can be triggered on Nightly and Aurora on CM10 M1 and CM10 Nightly 20120919 by going to about:firefox and clicking the \"Release Notes\" link.  The issue also occurs with some other pagees on the internet, with enough frequency that I am tmemporarily using the native browser and dealing with the ads. Reader Mode is not necessary.\n\nHere is a logcat:\n\nhttp://pastebin.com/iq7hhhRf","id":6646713,"creation_time":"2012-09-19T08:47:44Z","raw_text":"This crash can be triggered on Nightly and Aurora on CM10 M1 and CM10 Nightly 20120919 by going to about:firefox and clicking the \"Release Notes\" link.  The issue also occurs with some other pagees on the internet, with enough frequency that I am tmemporarily using the native browser and dealing with the ads. Reader Mode is not necessary.\n\nHere is a logcat:\n\nhttp://pastebin.com/iq7hhhRf"},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-20T09:26:12Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"Based on crash stats, it seems there's a better stack trace in today's build.\nFor those who crash when entering Reader Mode, can you provide the crash ID with the latest Nightly to confirm?","id":6650433,"creation_time":"2012-09-20T09:26:12Z","raw_text":"Based on crash stats, it seems there's a better stack trace in today's build.\nFor those who crash when entering Reader Mode, can you provide the crash ID with the latest Nightly to confirm?"},{"is_private":false,"attachment_id":null,"creator":"teleyinex@gmail.com","time":"2012-09-20T11:41:40Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"Hi Scoobidiver,\n\nI've a problem, because with the latest version, the crashes are worst. Now each time I try to access, about:crashes, firefox crashes as soon as I try to zoom in or I touch the screen. How can I send you the ID of the crash?","id":6650786,"creation_time":"2012-09-20T11:41:40Z","raw_text":"Hi Scoobidiver,\n\nI've a problem, because with the latest version, the crashes are worst. Now each time I try to access, about:crashes, firefox crashes as soon as I try to zoom in or I touch the screen. How can I send you the ID of the crash?"},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-20T11:54:27Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"Do you crash when you zoom in or touch the screen only in about:crashes or on any web pages?\nDo you still crash while entering Reader Mode?","id":6650839,"creation_time":"2012-09-20T11:54:27Z","raw_text":"Do you crash when you zoom in or touch the screen only in about:crashes or on any web pages?\nDo you still crash while entering Reader Mode?"},{"is_private":false,"attachment_id":null,"creator":"teleyinex@gmail.com","time":"2012-09-20T12:12:03Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"It crashes more often again on loading pages, but there is no a pattern for this yet. However, in the about:crashes web page as soon as I touch the screen it crashes. The same if I try to zoom, which obviously involves touching the screen :-) Reader mode stills failing :(","id":6650881,"creation_time":"2012-09-20T12:12:03Z","raw_text":"It crashes more often again on loading pages, but there is no a pattern for this yet. However, in the about:crashes web page as soon as I touch the screen it crashes. The same if I try to zoom, which obviously involves touching the screen :-) Reader mode stills failing :("},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-20T12:22:05Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"More reports at:\nhttps://crash-stats.mozilla.com/report/list?signature=js%3A%3Agc%3A%3AMarkObjectRange","id":6650903,"creation_time":"2012-09-20T12:22:05Z","raw_text":"More reports at:\nhttps://crash-stats.mozilla.com/report/list?signature=js%3A%3Agc%3A%3AMarkObjectRange"},{"is_private":false,"attachment_id":662983,"creator":"ted@mielczarek.org","time":"2012-09-20T12:52:50Z","author":"ted@mielczarek.org","bug_id":790139,"tags":[],"text":"Created attachment 662983\nstack\n\nHere's a more reasonable stack from 07fb607e-9105-4fad-9ecc-1534e2120911. I got this using my dump-lookup tool: http://hg.mozilla.org/users/tmielczarek_mozilla.com/dump-lookup/","id":6650955,"creation_time":"2012-09-20T12:52:50Z","raw_text":"Here's a more reasonable stack from 07fb607e-9105-4fad-9ecc-1534e2120911. I got this using my dump-lookup tool: http://hg.mozilla.org/users/tmielczarek_mozilla.com/dump-lookup/"},{"is_private":false,"attachment_id":null,"creator":"willyaranda@mozilla-hispano.org","time":"2012-09-20T12:55:43Z","author":"willyaranda@mozilla-hispano.org","bug_id":790139,"tags":[],"text":"My problem is totally unrelated with the Reader mode, as this happens with any page, as comment #24 says.","id":6650961,"creation_time":"2012-09-20T12:55:43Z","raw_text":"My problem is totally unrelated with the Reader mode, as this happens with any page, as comment #24 says."},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-20T13:00:18Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"(In reply to Guillermo Lpez (:willyaranda) from comment #27)\n> My problem is totally unrelated with the Reader mode, as this happens with\n> any page, as comment #24 says.\nDifferent steps to reproduce can generate the same crash signature.","id":6650980,"creation_time":"2012-09-20T13:00:18Z","raw_text":"(In reply to Guillermo Lpez (:willyaranda) from comment #27)\n> My problem is totally unrelated with the Reader mode, as this happens with\n> any page, as comment #24 says.\nDifferent steps to reproduce can generate the same crash signature."},{"is_private":false,"attachment_id":null,"creator":"kairo@kairo.at","time":"2012-09-20T13:50:11Z","author":"kairo@kairo.at","bug_id":790139,"tags":[],"text":"Hmm, FT2FontEntry::CreateFontEntry is freetype and that reminds me heavily of what bug 756140 comment #13 also is talking about - \"Unlike Android, Cyanogenmod builds freetype with subpixel rendering enabled\".\n\nMaybe there's some connection of all those libxul.so@foo crashes there.","id":6651082,"creation_time":"2012-09-20T13:50:11Z","raw_text":"Hmm, FT2FontEntry::CreateFontEntry is freetype and that reminds me heavily of what bug 756140 comment #13 also is talking about - \"Unlike Android, Cyanogenmod builds freetype with subpixel rendering enabled\".\n\nMaybe there's some connection of all those libxul.so@foo crashes there."},{"is_private":false,"attachment_id":null,"creator":"bugmail.mozilla@staktrace.com","time":"2012-09-20T15:36:24Z","author":"bugmail.mozilla@staktrace.com","bug_id":790139,"tags":[],"text":"I attached gdb and reproduced the crash that AaronMT was seeing on his TF201 with CyanogenMod 10. This was the backtrace I got (definitely looks font-related):\n\n0x643c83d8 in ft_module_get_service () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\nLoading symbols... Done\n(gdb) bt\n#0  0x643c83d8 in ft_module_get_service () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\n#1  0x64400058 in sfnt_init_face () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\n#2  0x643d15b0 in tt_face_init () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\n#3  0x643c4ef4 in open_face () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\n#4  0x643c5f8a in FT_Open_Face () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\n#5  0x643c5002 in FT_New_Memory_Face () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\n#6  0x63dc6206 in FT2FontEntry::CreateFontEntry (aProxyEntry=..., aFontData=0x67840000 \"\", aLength=106400) at /Users/kats/zspace/mozilla-git/gfx/thebes/gfxFT2FontList.cpp:170\n#7  0x63dc3f98 in gfxAndroidPlatform::MakePlatformFont (this=<optimized out>, aProxyEntry=<optimized out>, aFontData=<optimized out>, aLength=<optimized out>)\n    at /Users/kats/zspace/mozilla-git/gfx/thebes/gfxAndroidPlatform.cpp:164\n#8  0x63dbdd40 in gfxUserFontSet::LoadFont (this=0x65c66880, aProxy=0x677ebf00, aFontData=0x67830000 \"wOFF\", aLength=@0x5df28654: 63712)\n    at /Users/kats/zspace/mozilla-git/gfx/thebes/gfxUserFontSet.cpp:690\n#9  0x63dbe316 in gfxUserFontSet::OnLoadComplete (this=0x65c66880, aProxy=0x677ebf00, aFontData=0x67830000 \"wOFF\", aLength=63712, aDownloadStatus=0)\n    at /Users/kats/zspace/mozilla-git/gfx/thebes/gfxUserFontSet.cpp:472\n#10 0x633bb6f2 in nsFontFaceLoader::OnStreamComplete (this=0x6a1ee3d0, aLoader=0x6a1ee400, aContext=<optimized out>, aStatus=0, aStringLen=63712, aString=0x67830000 \"wOFF\")\n    at /Users/kats/zspace/mozilla-git/layout/style/nsFontFaceLoader.cpp:211\n#11 0x6317de16 in nsStreamLoader::OnStopRequest (this=0x6a1ee400, request=<optimized out>, ctxt=<optimized out>, aStatus=0) at /Users/kats/zspace/mozilla-git/netwerk/base/src/nsStreamLoader.cpp:95\n#12 0x634645ac in nsCORSListenerProxy::OnStopRequest (this=0x679d70b0, aRequest=0x679b9834, aContext=0x0, aStatusCode=0)\n    at /Users/kats/zspace/mozilla-git/content/base/src/nsCrossSiteListenerProxy.cpp:604\n#13 0x631921ae in nsHTTPCompressConv::OnStopRequest (this=<optimized out>, request=<optimized out>, aContext=<optimized out>, aStatus=<optimized out>)\n    at /Users/kats/zspace/mozilla-git/netwerk/streamconv/converters/nsHTTPCompressConv.cpp:94\n#14 0x6317d5c2 in nsStreamListenerTee::OnStopRequest (this=0x650294e0, request=0x679b9834, context=0x0, status=0) at /Users/kats/zspace/mozilla-git/netwerk/base/src/nsStreamListenerTee.cpp:49\n#15 0x631ea93a in mozilla::net::nsHttpChannel::OnStopRequest (this=0x679b9800, request=<optimized out>, ctxt=<optimized out>, status=0)\n    at /Users/kats/zspace/mozilla-git/netwerk/protocol/http/nsHttpChannel.cpp:4974\n#16 0x63164162 in nsInputStreamPump::OnStateStop (this=0x679dc8e0) at /Users/kats/zspace/mozilla-git/netwerk/base/src/nsInputStreamPump.cpp:552\n#17 0x63164238 in nsInputStreamPump::OnInputStreamReady (this=0x679dc8e0, stream=<optimized out>) at /Users/kats/zspace/mozilla-git/netwerk/base/src/nsInputStreamPump.cpp:374\n#18 0x63d3cfd2 in nsInputStreamReadyEvent::Run (this=0x677fe540) at /Users/kats/zspace/mozilla-git/xpcom/io/nsStreamUtils.cpp:82\n#19 0x63d4c57e in nsThread::ProcessNextEvent (this=0x5e1510f0, mayWait=<optimized out>, result=0x5df288b7) at /Users/kats/zspace/mozilla-git/xpcom/threads/nsThread.cpp:624\n#20 0x63d17f86 in NS_ProcessNextEvent_P (thread=0x5e1510f0, mayWait=<optimized out>) at /Users/kats/zspace/mozilla-git/obj-android-debug/xpcom/build/nsThreadUtils.cpp:220\n#21 0x63bf23b6 in mozilla::ipc::MessagePump::Run (this=0x5e1532e0, aDelegate=0x5e17f0e0) at /Users/kats/zspace/mozilla-git/ipc/glue/MessagePump.cpp:82\n#22 0x63d7ad1a in MessageLoop::RunInternal (this=0x5e17f0e0) at /Users/kats/zspace/mozilla-git/ipc/chromium/src/base/message_loop.cc:208\n#23 0x63d7ad78 in RunHandler (this=0x5e17f0e0) at /Users/kats/zspace/mozilla-git/ipc/chromium/src/base/message_loop.cc:201\n#24 MessageLoop::Run (this=0x5e17f0e0) at /Users/kats/zspace/mozilla-git/ipc/chromium/src/base/message_loop.cc:175\n#25 0x63b4581a in nsBaseAppShell::Run (this=0x5e1625c0) at /Users/kats/zspace/mozilla-git/widget/xpwidgets/nsBaseAppShell.cpp:163\n#26 0x63a107a0 in nsAppStartup::Run (this=0x600d0880) at /Users/kats/zspace/mozilla-git/toolkit/components/startup/nsAppStartup.cpp:296\n#27 0x6314b59a in XREMain::XRE_mainRun (this=0x5df28ae4) at /Users/kats/zspace/mozilla-git/toolkit/xre/nsAppRunner.cpp:3834\n#28 0x6314ccb6 in XREMain::XRE_main (this=0x5df28ae4, argc=<optimized out>, argv=0x5e16b048, aAppData=<optimized out>) at /Users/kats/zspace/mozilla-git/toolkit/xre/nsAppRunner.cpp:3911\n#29 0x6314ce12 in XRE_main (argc=7, argv=0x5e16b048, aAppData=0x57094c34, aFlags=<optimized out>) at /Users/kats/zspace/mozilla-git/toolkit/xre/nsAppRunner.cpp:3987\n#30 0x63152890 in GeckoStart (data=0x5cb43af0, appData=0x57094c34) at /Users/kats/zspace/mozilla-git/toolkit/xre/nsAndroidStartup.cpp:73\n#31 0x5707afec in Java_org_mozilla_gecko_GeckoAppShell_nativeRun (jenv=0x56f34ec0, jc=<optimized out>, jargs=0x21000005) at /Users/kats/zspace/mozilla-git/mozglue/android/APKOpen.cpp:983\n#32 0x40770ff4 in ?? ()\n#33 0x40770ff4 in ?? ()","id":6651365,"creation_time":"2012-09-20T15:36:24Z","raw_text":"I attached gdb and reproduced the crash that AaronMT was seeing on his TF201 with CyanogenMod 10. This was the backtrace I got (definitely looks font-related):\n\n0x643c83d8 in ft_module_get_service () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\nLoading symbols... Done\n(gdb) bt\n#0  0x643c83d8 in ft_module_get_service () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\n#1  0x64400058 in sfnt_init_face () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\n#2  0x643d15b0 in tt_face_init () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\n#3  0x643c4ef4 in open_face () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\n#4  0x643c5f8a in FT_Open_Face () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\n#5  0x643c5002 in FT_New_Memory_Face () from /Users/kats/zspace/mozilla-git/obj-android-debug/dist/bin/libxul.so\n#6  0x63dc6206 in FT2FontEntry::CreateFontEntry (aProxyEntry=..., aFontData=0x67840000 \"\", aLength=106400) at /Users/kats/zspace/mozilla-git/gfx/thebes/gfxFT2FontList.cpp:170\n#7  0x63dc3f98 in gfxAndroidPlatform::MakePlatformFont (this=<optimized out>, aProxyEntry=<optimized out>, aFontData=<optimized out>, aLength=<optimized out>)\n    at /Users/kats/zspace/mozilla-git/gfx/thebes/gfxAndroidPlatform.cpp:164\n#8  0x63dbdd40 in gfxUserFontSet::LoadFont (this=0x65c66880, aProxy=0x677ebf00, aFontData=0x67830000 \"wOFF\", aLength=@0x5df28654: 63712)\n    at /Users/kats/zspace/mozilla-git/gfx/thebes/gfxUserFontSet.cpp:690\n#9  0x63dbe316 in gfxUserFontSet::OnLoadComplete (this=0x65c66880, aProxy=0x677ebf00, aFontData=0x67830000 \"wOFF\", aLength=63712, aDownloadStatus=0)\n    at /Users/kats/zspace/mozilla-git/gfx/thebes/gfxUserFontSet.cpp:472\n#10 0x633bb6f2 in nsFontFaceLoader::OnStreamComplete (this=0x6a1ee3d0, aLoader=0x6a1ee400, aContext=<optimized out>, aStatus=0, aStringLen=63712, aString=0x67830000 \"wOFF\")\n    at /Users/kats/zspace/mozilla-git/layout/style/nsFontFaceLoader.cpp:211\n#11 0x6317de16 in nsStreamLoader::OnStopRequest (this=0x6a1ee400, request=<optimized out>, ctxt=<optimized out>, aStatus=0) at /Users/kats/zspace/mozilla-git/netwerk/base/src/nsStreamLoader.cpp:95\n#12 0x634645ac in nsCORSListenerProxy::OnStopRequest (this=0x679d70b0, aRequest=0x679b9834, aContext=0x0, aStatusCode=0)\n    at /Users/kats/zspace/mozilla-git/content/base/src/nsCrossSiteListenerProxy.cpp:604\n#13 0x631921ae in nsHTTPCompressConv::OnStopRequest (this=<optimized out>, request=<optimized out>, aContext=<optimized out>, aStatus=<optimized out>)\n    at /Users/kats/zspace/mozilla-git/netwerk/streamconv/converters/nsHTTPCompressConv.cpp:94\n#14 0x6317d5c2 in nsStreamListenerTee::OnStopRequest (this=0x650294e0, request=0x679b9834, context=0x0, status=0) at /Users/kats/zspace/mozilla-git/netwerk/base/src/nsStreamListenerTee.cpp:49\n#15 0x631ea93a in mozilla::net::nsHttpChannel::OnStopRequest (this=0x679b9800, request=<optimized out>, ctxt=<optimized out>, status=0)\n    at /Users/kats/zspace/mozilla-git/netwerk/protocol/http/nsHttpChannel.cpp:4974\n#16 0x63164162 in nsInputStreamPump::OnStateStop (this=0x679dc8e0) at /Users/kats/zspace/mozilla-git/netwerk/base/src/nsInputStreamPump.cpp:552\n#17 0x63164238 in nsInputStreamPump::OnInputStreamReady (this=0x679dc8e0, stream=<optimized out>) at /Users/kats/zspace/mozilla-git/netwerk/base/src/nsInputStreamPump.cpp:374\n#18 0x63d3cfd2 in nsInputStreamReadyEvent::Run (this=0x677fe540) at /Users/kats/zspace/mozilla-git/xpcom/io/nsStreamUtils.cpp:82\n#19 0x63d4c57e in nsThread::ProcessNextEvent (this=0x5e1510f0, mayWait=<optimized out>, result=0x5df288b7) at /Users/kats/zspace/mozilla-git/xpcom/threads/nsThread.cpp:624\n#20 0x63d17f86 in NS_ProcessNextEvent_P (thread=0x5e1510f0, mayWait=<optimized out>) at /Users/kats/zspace/mozilla-git/obj-android-debug/xpcom/build/nsThreadUtils.cpp:220\n#21 0x63bf23b6 in mozilla::ipc::MessagePump::Run (this=0x5e1532e0, aDelegate=0x5e17f0e0) at /Users/kats/zspace/mozilla-git/ipc/glue/MessagePump.cpp:82\n#22 0x63d7ad1a in MessageLoop::RunInternal (this=0x5e17f0e0) at /Users/kats/zspace/mozilla-git/ipc/chromium/src/base/message_loop.cc:208\n#23 0x63d7ad78 in RunHandler (this=0x5e17f0e0) at /Users/kats/zspace/mozilla-git/ipc/chromium/src/base/message_loop.cc:201\n#24 MessageLoop::Run (this=0x5e17f0e0) at /Users/kats/zspace/mozilla-git/ipc/chromium/src/base/message_loop.cc:175\n#25 0x63b4581a in nsBaseAppShell::Run (this=0x5e1625c0) at /Users/kats/zspace/mozilla-git/widget/xpwidgets/nsBaseAppShell.cpp:163\n#26 0x63a107a0 in nsAppStartup::Run (this=0x600d0880) at /Users/kats/zspace/mozilla-git/toolkit/components/startup/nsAppStartup.cpp:296\n#27 0x6314b59a in XREMain::XRE_mainRun (this=0x5df28ae4) at /Users/kats/zspace/mozilla-git/toolkit/xre/nsAppRunner.cpp:3834\n#28 0x6314ccb6 in XREMain::XRE_main (this=0x5df28ae4, argc=<optimized out>, argv=0x5e16b048, aAppData=<optimized out>) at /Users/kats/zspace/mozilla-git/toolkit/xre/nsAppRunner.cpp:3911\n#29 0x6314ce12 in XRE_main (argc=7, argv=0x5e16b048, aAppData=0x57094c34, aFlags=<optimized out>) at /Users/kats/zspace/mozilla-git/toolkit/xre/nsAppRunner.cpp:3987\n#30 0x63152890 in GeckoStart (data=0x5cb43af0, appData=0x57094c34) at /Users/kats/zspace/mozilla-git/toolkit/xre/nsAndroidStartup.cpp:73\n#31 0x5707afec in Java_org_mozilla_gecko_GeckoAppShell_nativeRun (jenv=0x56f34ec0, jc=<optimized out>, jargs=0x21000005) at /Users/kats/zspace/mozilla-git/mozglue/android/APKOpen.cpp:983\n#32 0x40770ff4 in ?? ()\n#33 0x40770ff4 in ?? ()"},{"is_private":false,"attachment_id":null,"creator":"mark.finkle@gmail.com","time":"2012-09-20T21:29:55Z","author":"mark.finkle@gmail.com","bug_id":790139,"tags":[],"text":"Just wanted to confirm that this is only happening on CM10? Not happening on CM9?","id":6652804,"creation_time":"2012-09-20T21:29:55Z","raw_text":"Just wanted to confirm that this is only happening on CM10? Not happening on CM9?"},{"is_private":false,"attachment_id":null,"creator":"aaron.train@gmail.com","time":"2012-09-21T15:22:00Z","author":"aaron.train@gmail.com","bug_id":790139,"tags":[],"text":"CM9 reported here https://support.mozilla.org/en-US/questions/937636#answer-369758 - his issue sounds like exactly what I saw on my TF201 which got this stack from Kats","id":6654755,"creation_time":"2012-09-21T15:22:00Z","raw_text":"CM9 reported here https://support.mozilla.org/en-US/questions/937636#answer-369758 - his issue sounds like exactly what I saw on my TF201 which got this stack from Kats"},{"is_private":false,"attachment_id":null,"creator":"craigktreasure@gmail.com","time":"2012-09-21T18:43:33Z","author":"craigktreasure@gmail.com","bug_id":790139,"tags":[],"text":"That post from Aaron was from me. I wasn't using Reader Mode, so I can't confirm that the crash I was experiencing is related to Reader Mode. However, the crashes on CM10 are ridiculous and happen all of the time. The crashes on CM9 are far fewer in my experience, but still happen enough to cause concern. Let me know if I can help in any way.","id":6655509,"creation_time":"2012-09-21T18:43:33Z","raw_text":"That post from Aaron was from me. I wasn't using Reader Mode, so I can't confirm that the crash I was experiencing is related to Reader Mode. However, the crashes on CM10 are ridiculous and happen all of the time. The crashes on CM9 are far fewer in my experience, but still happen enough to cause concern. Let me know if I can help in any way."},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-23T11:46:04Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"Removing the js::gc::MarkObjectRange signature as it seems unrelated although a top crasher.","id":6658362,"creation_time":"2012-09-23T11:46:04Z","raw_text":"Removing the js::gc::MarkObjectRange signature as it seems unrelated although a top crasher."},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-09-24T15:20:25Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"Based on crash stats, it only happens with Android API Version 16 (CM10).","id":6660484,"creation_time":"2012-09-24T15:20:25Z","raw_text":"Based on crash stats, it only happens with Android API Version 16 (CM10)."},{"is_private":false,"attachment_id":null,"creator":"aaron.train@gmail.com","time":"2012-09-24T21:17:53Z","author":"aaron.train@gmail.com","bug_id":790139,"tags":[],"text":"Might be helpful, but I noticed two changes to CM10 in Freetype from Sept 1st, a new renderer and a new version of Freetype\nhttp://review.cyanogenmod.com/#/q/freetype,n,z","id":6661902,"creation_time":"2012-09-24T21:17:53Z","raw_text":"Might be helpful, but I noticed two changes to CM10 in Freetype from Sept 1st, a new renderer and a new version of Freetype\nhttp://review.cyanogenmod.com/#/q/freetype,n,z"},{"is_private":false,"attachment_id":null,"creator":"teleyinex@gmail.com","time":"2012-09-25T07:22:44Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"Dear all,\n\nI've just updated to the latest nightly from CM10, version 24092012, and the bug stills there: Firefox crashes as soon as I load a page or I touch the screen in the about:crashes page.\n\nDo you need something to help you debug this issue?","id":6663402,"creation_time":"2012-09-25T07:22:44Z","raw_text":"Dear all,\n\nI've just updated to the latest nightly from CM10, version 24092012, and the bug stills there: Firefox crashes as soon as I load a page or I touch the screen in the about:crashes page.\n\nDo you need something to help you debug this issue?"},{"is_private":false,"attachment_id":null,"creator":"mark.finkle@gmail.com","time":"2012-09-25T18:35:28Z","author":"mark.finkle@gmail.com","bug_id":790139,"tags":[],"text":"(In reply to Daniel Lombraa Gonzlez from comment #37)\n> Dear all,\n> \n> I've just updated to the latest nightly from CM10, version 24092012, and the\n> bug stills there: Firefox crashes as soon as I load a page or I touch the\n> screen in the about:crashes page.\n> \n> Do you need something to help you debug this issue?\n\nUnless you have a stack that points to Ft2FontEntry::CreateFontEntry, we can't be sure it's the same crash. We have at least two other bugs where Fennec crashes on CM10. See bug 756140 and bug 792342.","id":6665404,"creation_time":"2012-09-25T18:35:28Z","raw_text":"(In reply to Daniel Lombraa Gonzlez from comment #37)\n> Dear all,\n> \n> I've just updated to the latest nightly from CM10, version 24092012, and the\n> bug stills there: Firefox crashes as soon as I load a page or I touch the\n> screen in the about:crashes page.\n> \n> Do you need something to help you debug this issue?\n\nUnless you have a stack that points to Ft2FontEntry::CreateFontEntry, we can't be sure it's the same crash. We have at least two other bugs where Fennec crashes on CM10. See bug 756140 and bug 792342."},{"is_private":false,"attachment_id":null,"creator":"teleyinex@gmail.com","time":"2012-09-26T06:26:30Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"I'll wait! After reading those bug reports I think that all of them share the same user experience problem: as soon as you load a page, the browser crashes :-( Good luck with the bug hunting!!","id":6667219,"creation_time":"2012-09-26T06:26:30Z","raw_text":"I'll wait! After reading those bug reports I think that all of them share the same user experience problem: as soon as you load a page, the browser crashes :-( Good luck with the bug hunting!!"},{"is_private":false,"attachment_id":665635,"creator":"blassey.bugs@lassey.us","time":"2012-09-27T20:55:54Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"Created attachment 665635\npatch\n\nspeculative fix based on https://crash-stats.mozilla.com/report/index/d0c34bd6-ff3c-4481-87fc-5fc512120927 and other reports with the same signature","id":6673857,"creation_time":"2012-09-27T20:55:54Z","raw_text":"speculative fix based on https://crash-stats.mozilla.com/report/index/d0c34bd6-ff3c-4481-87fc-5fc512120927 and other reports with the same signature"},{"is_private":false,"attachment_id":665635,"creator":"jfkthame@gmail.com","time":"2012-09-27T21:45:51Z","author":"jfkthame@gmail.com","bug_id":790139,"tags":[],"text":"Comment on attachment 665635\npatch\n\nReview of attachment 665635:\n-----------------------------------------------------------------\n\nThis looks like a band-aid for an issue we don't actually understand. I think I'd be happier about taking a complete FreeType update to the current release (2.4.10) than speculatively patching a line like this if we can't explain the root of the problem.\n\n::: modules/freetype2/src/base/ftobjs.c\n@@ +4325,4 @@\n>            {\n>              FT_ASSERT( cur[0]->clazz );\n>  \n> +            if ( cur[0] && cur[0]->clazz && cur[0]->clazz->get_interface )\n\nIf either cur[0] or cur[0]->clazz is NULL here, that seems to imply some pretty serious breakage within FreeType - it's loaded a NULL module? Surely that shouldn't happen; but if it does, wallpapering it here is likely to just defer the crash to some other place where the module is used.","id":6674076,"creation_time":"2012-09-27T21:45:51Z","raw_text":"Review of attachment 665635:\n-----------------------------------------------------------------\n\nThis looks like a band-aid for an issue we don't actually understand. I think I'd be happier about taking a complete FreeType update to the current release (2.4.10) than speculatively patching a line like this if we can't explain the root of the problem.\n\n::: modules/freetype2/src/base/ftobjs.c\n@@ +4325,4 @@\n>            {\n>              FT_ASSERT( cur[0]->clazz );\n>  \n> +            if ( cur[0] && cur[0]->clazz && cur[0]->clazz->get_interface )\n\nIf either cur[0] or cur[0]->clazz is NULL here, that seems to imply some pretty serious breakage within FreeType - it's loaded a NULL module? Surely that shouldn't happen; but if it does, wallpapering it here is likely to just defer the crash to some other place where the module is used."},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-09-29T03:57:47Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"I've been able to confirm that this patch avoids the crash","id":6678346,"creation_time":"2012-09-29T03:57:47Z","raw_text":"I've been able to confirm that this patch avoids the crash"},{"is_private":false,"attachment_id":null,"creator":"jfkthame@gmail.com","time":"2012-09-30T12:27:51Z","author":"jfkthame@gmail.com","bug_id":790139,"tags":[],"text":"Could you check (in gdb) whether the FT library's module list at the end of FT_Init_FreeType (after FT_Add_Default_Modules has returned) contains any NULL module records, or records with NULL clazz pointer? Assuming the pointers are all valid at that time, the question we need to answer is how the module list can be getting changed/corrupted subsequently.","id":6680426,"creation_time":"2012-09-30T12:27:51Z","raw_text":"Could you check (in gdb) whether the FT library's module list at the end of FT_Init_FreeType (after FT_Add_Default_Modules has returned) contains any NULL module records, or records with NULL clazz pointer? Assuming the pointers are all valid at that time, the question we need to answer is how the module list can be getting changed/corrupted subsequently."},{"is_private":false,"attachment_id":null,"creator":"helgalo94@comcast.net","time":"2012-09-30T16:28:13Z","author":"helgalo94@comcast.net","bug_id":790139,"tags":[],"text":"*** Bug 795710 has been marked as a duplicate of this bug. ***","id":6680613,"creation_time":"2012-09-30T16:28:13Z","raw_text":""},{"is_private":false,"attachment_id":null,"creator":"ricardohenrylee@gmail.com","time":"2012-10-01T00:46:07Z","author":"ricardohenrylee@gmail.com","bug_id":790139,"tags":[],"text":"(In reply to Brad Lassey [:blassey] from comment #42)\n> I've been able to confirm that this patch avoids the crash\n\n@blassey or @jfkthame would it be possible for you to upload the builds somewhere for us to test?","id":6681123,"creation_time":"2012-10-01T00:46:07Z","raw_text":"(In reply to Brad Lassey [:blassey] from comment #42)\n> I've been able to confirm that this patch avoids the crash\n\n@blassey or @jfkthame would it be possible for you to upload the builds somewhere for us to test?"},{"is_private":false,"attachment_id":666574,"creator":"blassey.bugs@lassey.us","time":"2012-10-01T16:02:19Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"Created attachment 666574\nlogging patch\n\nwith this logging patch, I see this:\n\nI/GeckoFT ( 4097): checking 18 modules, starting at 0x60c8ecd4 for library: 0x60c8ecc0\nI/GeckoFT ( 4097): checking 18 modules, starting at 0x60c8ef14 for library: 0x60c8ef00\n\n\n\n\nI/GeckoFT ( 4097): cur[0]->clazz is null for 0x60c8ecfc while searching 18 modules, starting at 0x60c8ecd4 for library: 0x60c8ecc0\nI/GeckoFT ( 4097): cur[0]->clazz is null for 0x60c8ecfc while searching 18 modules, starting at 0x60c8ecd4 for library: 0x60c8ecc0\n^C","id":6682602,"creation_time":"2012-10-01T16:02:19Z","raw_text":"with this logging patch, I see this:\n\nI/GeckoFT ( 4097): checking 18 modules, starting at 0x60c8ecd4 for library: 0x60c8ecc0\nI/GeckoFT ( 4097): checking 18 modules, starting at 0x60c8ef14 for library: 0x60c8ef00\n\n\n\n\nI/GeckoFT ( 4097): cur[0]->clazz is null for 0x60c8ecfc while searching 18 modules, starting at 0x60c8ecd4 for library: 0x60c8ecc0\nI/GeckoFT ( 4097): cur[0]->clazz is null for 0x60c8ecfc while searching 18 modules, starting at 0x60c8ecd4 for library: 0x60c8ecc0\n^C"},{"is_private":false,"attachment_id":null,"creator":"jfkthame@gmail.com","time":"2012-10-01T17:22:15Z","author":"jfkthame@gmail.com","bug_id":790139,"tags":[],"text":"OK, so the modules list was intact when first created. Subsequently, *something* set one of those clazz pointers to NULL. I don't think there's anything within FreeType that should do this (AFAIK), so my worry is that we have a bug elsewhere that's stomping on a location that it shouldn't (writing via a wild/uninitialized pointer, maybe?).\n\nAlternatively, it could be a bug within FreeType, leading to damaging its own library record, but I'm inclined to think that's less likely. Unless maybe CM10 includes a bad font that causes FT to stumbles, leading to internal corruption.\n\nRunning this under valgrind to see if it can detect any use of an uninitialized pointer would be awesome...","id":6682954,"creation_time":"2012-10-01T17:22:15Z","raw_text":"OK, so the modules list was intact when first created. Subsequently, *something* set one of those clazz pointers to NULL. I don't think there's anything within FreeType that should do this (AFAIK), so my worry is that we have a bug elsewhere that's stomping on a location that it shouldn't (writing via a wild/uninitialized pointer, maybe?).\n\nAlternatively, it could be a bug within FreeType, leading to damaging its own library record, but I'm inclined to think that's less likely. Unless maybe CM10 includes a bad font that causes FT to stumbles, leading to internal corruption.\n\nRunning this under valgrind to see if it can detect any use of an uninitialized pointer would be awesome..."},{"is_private":false,"attachment_id":null,"creator":"jfkthame@gmail.com","time":"2012-10-01T17:51:44Z","author":"jfkthame@gmail.com","bug_id":790139,"tags":[],"text":"Alternatively, provided the problem is consistent (the rogue NULL is always at the same position, relative to the FT library), you might be able to catch it by setting a gdb data watchpoint on the address after the library has been initialized, to detect when it changes.","id":6683074,"creation_time":"2012-10-01T17:51:44Z","raw_text":"Alternatively, provided the problem is consistent (the rogue NULL is always at the same position, relative to the FT library), you might be able to catch it by setting a gdb data watchpoint on the address after the library has been initialized, to detect when it changes."},{"is_private":false,"attachment_id":666574,"creator":"jfkthame@gmail.com","time":"2012-10-01T17:52:28Z","author":"jfkthame@gmail.com","bug_id":790139,"tags":[],"text":"Comment on attachment 666574\nlogging patch\n\nReview of attachment 666574:\n-----------------------------------------------------------------\n\n::: modules/freetype2/src/base/ftobjs.c\n@@ +4328,5 @@\n>              FT_ASSERT( cur[0]->clazz );\n> +\t    \n> +\n> +\t    if (!cur[0])\n> +\t      __android_log_print(ANDROID_LOG_INFO, \"GeckoFT\", \"cur[0] is null for %p while searching %d modules, starting at %p for library: %p\", library->num_modules, library->modules, library);\n\nBTW, you're missing \"cur\" as a parameter here, before library->num_modules. Though it doesn't matter right now as this isn't the log message that's actually being hit.","id":6683077,"creation_time":"2012-10-01T17:52:28Z","raw_text":"Review of attachment 666574:\n-----------------------------------------------------------------\n\n::: modules/freetype2/src/base/ftobjs.c\n@@ +4328,5 @@\n>              FT_ASSERT( cur[0]->clazz );\n> +\t    \n> +\n> +\t    if (!cur[0])\n> +\t      __android_log_print(ANDROID_LOG_INFO, \"GeckoFT\", \"cur[0] is null for %p while searching %d modules, starting at %p for library: %p\", library->num_modules, library->modules, library);\n\nBTW, you're missing \"cur\" as a parameter here, before library->num_modules. Though it doesn't matter right now as this isn't the log message that's actually being hit."},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-02T01:06:51Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"strangely, when I went to set the watch point, I got this:\n\nBreakpoint 2, FT_Add_Default_Modules (library=0x61982b40) at /Volumes/source/mozilla-central/modules/freetype2/src/base/ftinit.c:229\n229\t      __android_log_print(ANDROID_LOG_INFO, \"GeckoFT\", \"checking %d modules, starting at %p for library: %p\", library->num_modules, library->modules, library);\n(gdb) p cur[0]->clazz\n$1 = (FT_Module_Class *) 0x60844f00\n(gdb) p cur[1]->clazz\n$2 = (FT_Module_Class *) 0x5e446340\n(gdb) p cur[2]->clazz\nCannot access memory at address 0x0\n\nwhich implies my logging is incorrect and clazz is null from the get go","id":6684931,"creation_time":"2012-10-02T01:06:51Z","raw_text":"strangely, when I went to set the watch point, I got this:\n\nBreakpoint 2, FT_Add_Default_Modules (library=0x61982b40) at /Volumes/source/mozilla-central/modules/freetype2/src/base/ftinit.c:229\n229\t      __android_log_print(ANDROID_LOG_INFO, \"GeckoFT\", \"checking %d modules, starting at %p for library: %p\", library->num_modules, library->modules, library);\n(gdb) p cur[0]->clazz\n$1 = (FT_Module_Class *) 0x60844f00\n(gdb) p cur[1]->clazz\n$2 = (FT_Module_Class *) 0x5e446340\n(gdb) p cur[2]->clazz\nCannot access memory at address 0x0\n\nwhich implies my logging is incorrect and clazz is null from the get go"},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-02T01:18:06Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"please ignore that last comment, I was printing cur from the wrong scope","id":6685035,"creation_time":"2012-10-02T01:18:06Z","raw_text":"please ignore that last comment, I was printing cur from the wrong scope"},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-02T01:20:26Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"however, it looks like android's gdb doesn't support watchpoints:\n\n(gdb) c\nContinuing.\nWarning:\nCould not insert hardware watchpoint 3.\nCould not insert hardware breakpoints:\nYou may have requested too many hardware breakpoints/watchpoints.\n\n(gdb) info breakpoints\nNum     Type           Disp Enb Address    What\n3       hw watchpoint  keep y              library->modules[2]->clazz\n(gdb)","id":6685049,"creation_time":"2012-10-02T01:20:26Z","raw_text":"however, it looks like android's gdb doesn't support watchpoints:\n\n(gdb) c\nContinuing.\nWarning:\nCould not insert hardware watchpoint 3.\nCould not insert hardware breakpoints:\nYou may have requested too many hardware breakpoints/watchpoints.\n\n(gdb) info breakpoints\nNum     Type           Disp Enb Address    What\n3       hw watchpoint  keep y              library->modules[2]->clazz\n(gdb)"},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-02T01:55:24Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"Johnathan, is it expected that FT_Init_FreeType gets called twice?\n\nAlso, FWIW, the module that gets gummed up is \"autofitter\"","id":6685270,"creation_time":"2012-10-02T01:55:24Z","raw_text":"Johnathan, is it expected that FT_Init_FreeType gets called twice?\n\nAlso, FWIW, the module that gets gummed up is \"autofitter\""},{"is_private":false,"attachment_id":null,"creator":"jfkthame@gmail.com","time":"2012-10-02T10:55:47Z","author":"jfkthame@gmail.com","bug_id":790139,"tags":[],"text":"(In reply to Brad Lassey [:blassey] from comment #53)\n> Johnathan, is it expected that FT_Init_FreeType gets called twice?\n\nHmm. I don't know if it's *necessarily* a problem - it should be valid to create multiple freetype library objects, I think. But it does seem surprising, as I'd expect us to create a single FT_Library and use it throughout. So where are the two calls coming from? Presumably one comes from gfxAndroidPlatform::gfxAndroidPlatform(); is the other call coming from somewhere in cairo's or skia's font code? Maybe we should be sharing that FT_Library rather than creating a separate one.","id":6688347,"creation_time":"2012-10-02T10:55:47Z","raw_text":"(In reply to Brad Lassey [:blassey] from comment #53)\n> Johnathan, is it expected that FT_Init_FreeType gets called twice?\n\nHmm. I don't know if it's *necessarily* a problem - it should be valid to create multiple freetype library objects, I think. But it does seem surprising, as I'd expect us to create a single FT_Library and use it throughout. So where are the two calls coming from? Presumably one comes from gfxAndroidPlatform::gfxAndroidPlatform(); is the other call coming from somewhere in cairo's or skia's font code? Maybe we should be sharing that FT_Library rather than creating a separate one."},{"is_private":false,"attachment_id":null,"creator":"jfkthame@gmail.com","time":"2012-10-02T11:00:23Z","author":"jfkthame@gmail.com","bug_id":790139,"tags":[],"text":"(In reply to Brad Lassey [:blassey] from comment #52)\n> however, it looks like android's gdb doesn't support watchpoints:\n> \n> (gdb) c\n> Continuing.\n> Warning:\n> Could not insert hardware watchpoint 3.\n> Could not insert hardware breakpoints:\n> You may have requested too many hardware breakpoints/watchpoints.\n> \n> (gdb) info breakpoints\n> Num     Type           Disp Enb Address    What\n> 3       hw watchpoint  keep y              library->modules[2]->clazz\n> (gdb)\n\nFrom the message there, it sounds like maybe it can only watch one or two locations. If you know which of the pointers is going to be damaged, maybe you can set a watch on *only* that one, not on every entry in the array.","id":6688355,"creation_time":"2012-10-02T11:00:23Z","raw_text":"(In reply to Brad Lassey [:blassey] from comment #52)\n> however, it looks like android's gdb doesn't support watchpoints:\n> \n> (gdb) c\n> Continuing.\n> Warning:\n> Could not insert hardware watchpoint 3.\n> Could not insert hardware breakpoints:\n> You may have requested too many hardware breakpoints/watchpoints.\n> \n> (gdb) info breakpoints\n> Num     Type           Disp Enb Address    What\n> 3       hw watchpoint  keep y              library->modules[2]->clazz\n> (gdb)\n\nFrom the message there, it sounds like maybe it can only watch one or two locations. If you know which of the pointers is going to be damaged, maybe you can set a watch on *only* that one, not on every entry in the array."},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-02T15:08:25Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"(In reply to Jonathan Kew (:jfkthame) from comment #54)\n> (In reply to Brad Lassey [:blassey] from comment #53)\n> > Johnathan, is it expected that FT_Init_FreeType gets called twice?\n> \n> Hmm. I don't know if it's *necessarily* a problem - it should be valid to\n> create multiple freetype library objects, I think. But it does seem\n> surprising, as I'd expect us to create a single FT_Library and use it\n> throughout. So where are the two calls coming from? Presumably one comes\n> from gfxAndroidPlatform::gfxAndroidPlatform(); is the other call coming from\n> somewhere in cairo's or skia's font code? Maybe we should be sharing that\n> FT_Library rather than creating a separate one.\n\nIt is being called from here http://mxr.mozilla.org/mozilla-central/source/gfx/thebes/gfxAndroidPlatform.cpp#32 and here http://mxr.mozilla.org/mozilla-central/source/gfx/cairo/cairo/src/cairo-ft-font.c#273\n\nAlso, sorry for typo'ing your name. Johnath has me ruined.","id":6689053,"creation_time":"2012-10-02T15:08:25Z","raw_text":"(In reply to Jonathan Kew (:jfkthame) from comment #54)\n> (In reply to Brad Lassey [:blassey] from comment #53)\n> > Johnathan, is it expected that FT_Init_FreeType gets called twice?\n> \n> Hmm. I don't know if it's *necessarily* a problem - it should be valid to\n> create multiple freetype library objects, I think. But it does seem\n> surprising, as I'd expect us to create a single FT_Library and use it\n> throughout. So where are the two calls coming from? Presumably one comes\n> from gfxAndroidPlatform::gfxAndroidPlatform(); is the other call coming from\n> somewhere in cairo's or skia's font code? Maybe we should be sharing that\n> FT_Library rather than creating a separate one.\n\nIt is being called from here http://mxr.mozilla.org/mozilla-central/source/gfx/thebes/gfxAndroidPlatform.cpp#32 and here http://mxr.mozilla.org/mozilla-central/source/gfx/cairo/cairo/src/cairo-ft-font.c#273\n\nAlso, sorry for typo'ing your name. Johnath has me ruined."},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-02T15:10:18Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"(In reply to Jonathan Kew (:jfkthame) from comment #55)\n> (In reply to Brad Lassey [:blassey] from comment #52)\n> > however, it looks like android's gdb doesn't support watchpoints:\n> > \n> > (gdb) c\n> > Continuing.\n> > Warning:\n> > Could not insert hardware watchpoint 3.\n> > Could not insert hardware breakpoints:\n> > You may have requested too many hardware breakpoints/watchpoints.\n> > \n> > (gdb) info breakpoints\n> > Num     Type           Disp Enb Address    What\n> > 3       hw watchpoint  keep y              library->modules[2]->clazz\n> > (gdb)\n> \n> From the message there, it sounds like maybe it can only watch one or two\n> locations. If you know which of the pointers is going to be damaged, maybe\n> you can set a watch on *only* that one, not on every entry in the array.\n\nThere was only one watch point and no break points set. Previously I had set 2 breakpoints, but had since cleared them. I've also tried only setting the one watch point with the same result.","id":6689062,"creation_time":"2012-10-02T15:10:18Z","raw_text":"(In reply to Jonathan Kew (:jfkthame) from comment #55)\n> (In reply to Brad Lassey [:blassey] from comment #52)\n> > however, it looks like android's gdb doesn't support watchpoints:\n> > \n> > (gdb) c\n> > Continuing.\n> > Warning:\n> > Could not insert hardware watchpoint 3.\n> > Could not insert hardware breakpoints:\n> > You may have requested too many hardware breakpoints/watchpoints.\n> > \n> > (gdb) info breakpoints\n> > Num     Type           Disp Enb Address    What\n> > 3       hw watchpoint  keep y              library->modules[2]->clazz\n> > (gdb)\n> \n> From the message there, it sounds like maybe it can only watch one or two\n> locations. If you know which of the pointers is going to be damaged, maybe\n> you can set a watch on *only* that one, not on every entry in the array.\n\nThere was only one watch point and no break points set. Previously I had set 2 breakpoints, but had since cleared them. I've also tried only setting the one watch point with the same result."},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-02T16:39:40Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"Julian Seward is seeing write after free from Valgrind, so I'm making this private so he can comment (apparently he doesn't have permission to mark as private, we should fix that)","id":6689483,"creation_time":"2012-10-02T16:39:40Z","raw_text":"Julian Seward is seeing write after free from Valgrind, so I'm making this private so he can comment (apparently he doesn't have permission to mark as private, we should fix that)"},{"is_private":false,"attachment_id":667044,"creator":"jseward@acm.org","time":"2012-10-02T17:24:55Z","author":"jseward@acm.org","bug_id":790139,"tags":[],"text":"Created attachment 667044\nValgrind trace -- invalid writes\n\nHere's a bunch of invalid writes observed when loading\n\nhttp://edition.cnn.com/2012/10/01/travel/american-airlines-customers-complaining/index.html?hpt=us_t3\n\nThese were preceded by the complaints listed in bug 795310 and those\nlisted in bug 797002.  I wonder if they might be related, especially\n797002.\n\nAnyway, w.r.t. the invalid writes: after the page finished loading,\nthere were a bunch of invalid writes ending in segfault, due to\ntrashing the heap.  What's interesting about these is that they are to\nblocks that have no relationship at all to the stack doing the\nwriting.  Eg we have some part of gfx/cairo/libpixman writing in the\nmiddle of blocks freed by the JS jit.\n\nMy best-guess interpretation of this is that there is some wildly\nout-of-range writing going on and trashing arbitrary bits of heap.","id":6689689,"creation_time":"2012-10-02T17:24:55Z","raw_text":"Here's a bunch of invalid writes observed when loading\n\nhttp://edition.cnn.com/2012/10/01/travel/american-airlines-customers-complaining/index.html?hpt=us_t3\n\nThese were preceded by the complaints listed in bug 795310 and those\nlisted in bug 797002.  I wonder if they might be related, especially\n797002.\n\nAnyway, w.r.t. the invalid writes: after the page finished loading,\nthere were a bunch of invalid writes ending in segfault, due to\ntrashing the heap.  What's interesting about these is that they are to\nblocks that have no relationship at all to the stack doing the\nwriting.  Eg we have some part of gfx/cairo/libpixman writing in the\nmiddle of blocks freed by the JS jit.\n\nMy best-guess interpretation of this is that there is some wildly\nout-of-range writing going on and trashing arbitrary bits of heap."},{"is_private":false,"attachment_id":null,"creator":"joe@drew.ca","time":"2012-10-02T17:30:48Z","author":"joe@drew.ca","bug_id":790139,"tags":[],"text":"If we're scribbling on the heap, that could definitely cause those invalid writes. There's 0 excuse for layers to be looking at stuff allocated by the jit, though.","id":6689734,"creation_time":"2012-10-02T17:30:48Z","raw_text":"If we're scribbling on the heap, that could definitely cause those invalid writes. There's 0 excuse for layers to be looking at stuff allocated by the jit, though."},{"is_private":false,"attachment_id":null,"creator":"kairo@kairo.at","time":"2012-10-02T17:35:35Z","author":"kairo@kairo.at","bug_id":790139,"tags":[],"text":"Somehow sounds to me like this could be an explanation for bug 792825 as well, then, as there we crash during GC. Interestingly, we seem to have a specific JS change triggering that issue one over there. In any case, I guess it's worth monitoring if there could be a connection.","id":6689753,"creation_time":"2012-10-02T17:35:35Z","raw_text":"Somehow sounds to me like this could be an explanation for bug 792825 as well, then, as there we crash during GC. Interestingly, we seem to have a specific JS change triggering that issue one over there. In any case, I guess it's worth monitoring if there could be a connection."},{"is_private":false,"attachment_id":null,"creator":"jfkthame@gmail.com","time":"2012-10-02T17:42:34Z","author":"jfkthame@gmail.com","bug_id":790139,"tags":[],"text":"(In reply to Brad Lassey [:blassey] from comment #56)\n> (In reply to Jonathan Kew (:jfkthame) from comment #54)\n> > (In reply to Brad Lassey [:blassey] from comment #53)\n> > > Johnathan, is it expected that FT_Init_FreeType gets called twice?\n> > \n> > Hmm. I don't know if it's *necessarily* a problem - it should be valid to\n> > create multiple freetype library objects, I think. But it does seem\n> > surprising, as I'd expect us to create a single FT_Library and use it\n> > throughout. So where are the two calls coming from? Presumably one comes\n> > from gfxAndroidPlatform::gfxAndroidPlatform(); is the other call coming from\n> > somewhere in cairo's or skia's font code? Maybe we should be sharing that\n> > FT_Library rather than creating a separate one.\n> \n> It is being called from here\n> http://mxr.mozilla.org/mozilla-central/source/gfx/thebes/gfxAndroidPlatform.\n> cpp#32 and here\n> http://mxr.mozilla.org/mozilla-central/source/gfx/cairo/cairo/src/cairo-ft-\n> font.c#273\n\nTo confirm, the one from gfxAndroidPlatform is first, I guess? What's the full callstack of the second one (from cairo), then? Could this mean we're doing something font-related with cairo but haven't created and passed it the proper freetype face, so it's trying to make its own?","id":6689776,"creation_time":"2012-10-02T17:42:34Z","raw_text":"(In reply to Brad Lassey [:blassey] from comment #56)\n> (In reply to Jonathan Kew (:jfkthame) from comment #54)\n> > (In reply to Brad Lassey [:blassey] from comment #53)\n> > > Johnathan, is it expected that FT_Init_FreeType gets called twice?\n> > \n> > Hmm. I don't know if it's *necessarily* a problem - it should be valid to\n> > create multiple freetype library objects, I think. But it does seem\n> > surprising, as I'd expect us to create a single FT_Library and use it\n> > throughout. So where are the two calls coming from? Presumably one comes\n> > from gfxAndroidPlatform::gfxAndroidPlatform(); is the other call coming from\n> > somewhere in cairo's or skia's font code? Maybe we should be sharing that\n> > FT_Library rather than creating a separate one.\n> \n> It is being called from here\n> http://mxr.mozilla.org/mozilla-central/source/gfx/thebes/gfxAndroidPlatform.\n> cpp#32 and here\n> http://mxr.mozilla.org/mozilla-central/source/gfx/cairo/cairo/src/cairo-ft-\n> font.c#273\n\nTo confirm, the one from gfxAndroidPlatform is first, I guess? What's the full callstack of the second one (from cairo), then? Could this mean we're doing something font-related with cairo but haven't created and passed it the proper freetype face, so it's trying to make its own?"},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-02T18:27:27Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"Stack for second call to FT_Init_FreeType:\n\n#0  FT_Init_FreeType (alibrary=0x61ceb804) at /Volumes/source/mozilla-central/modules/freetype2/src/base/ftinit.c:250\n#1  0x636873a0 in _cairo_ft_unscaled_font_map_create () at /Volumes/source/mozilla-central/gfx/cairo/cairo/src/cairo-ft-font.c:273\n#2  _cairo_ft_unscaled_font_map_lock () at /Volumes/source/mozilla-central/gfx/cairo/cairo/src/cairo-ft-font.c:336\n#3  0x6368927c in _cairo_ft_unscaled_font_create_internal (out=<optimized out>, font_face=<optimized out>, id=<optimized out>, \n    filename=<optimized out>, from_face=<optimized out>) at /Volumes/source/mozilla-central/gfx/cairo/cairo/src/cairo-ft-font.c:491\n#4  _cairo_ft_unscaled_font_create_from_face (out=<optimized out>, face=<optimized out>)\n    at /Volumes/source/mozilla-central/gfx/cairo/cairo/src/cairo-ft-font.c:580\n#5  _moz_cairo_ft_font_face_create_for_ft_face (face=0x61ceb804, load_flags=1577246784)\n    at /Volumes/source/mozilla-central/gfx/cairo/cairo/src/cairo-ft-font.c:3098\n#6  0x635d8354 in FT2FontEntry::CairoFontFace (this=0x6148de00) at /Volumes/source/mozilla-central/gfx/thebes/gfxFT2FontList.cpp:325\n#7  0x635d85d2 in FT2FontEntry::CreateScaledFont (this=0x6148de00, aStyle=<optimized out>)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFT2FontList.cpp:130\n#8  0x635d8602 in FT2FontEntry::CreateFontInstance (this=0x6148de00, aFontStyle=0x61ce1400, aNeedsBold=172)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFT2FontList.cpp:155\n#9  0x635c556e in gfxFontEntry::FindOrMakeFont (this=0x6148de00, aStyle=0x61cac8e8, aNeedsBold=false)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:191\n#10 0x635c566c in gfxFontGroup::FindPlatformFont (aName=..., aGenericName=<optimized out>, aUseFontSet=<optimized out>, aClosure=<optimized out>)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3210\n#11 0x635bf08a in gfxFontGroup::FontResolverProc (aName=..., aClosure=<optimized out>)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3456\n#12 0x635d5f1e in gfxAndroidPlatform::ResolveFontName (this=<optimized out>, aFontName=<optimized out>, \n    aCallback=0x635bf07d <gfxFontGroup::FontResolverProc(nsAString_internal const&, void*)>, aClosure=0x5f017c74, aAborted=@0x5f017cb7)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxAndroidPlatform.cpp:99\n#13 0x635c2fcc in gfxFontGroup::ForEachFontInternal (this=0x61cac8d0, aFamilies=<optimized out>, aLanguage=<optimized out>, \n    aResolveGeneric=<optimized out>, aResolveFontName=true, aUseFontSet=false, \n    fc=0x635c55f1 <gfxFontGroup::FindPlatformFont(nsAString_internal const&, nsACString_internal const&, bool, void*)>, closure=0x61cac8d0)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3420\n#14 0x635c3076 in gfxFontGroup::ForEachFontInternal (this=0x61cac8d0, aFamilies=<optimized out>, aLanguage=<optimized out>, \n    aResolveGeneric=<optimized out>, aResolveFontName=true, aUseFontSet=true, \n    fc=0x635c55f1 <gfxFontGroup::FindPlatformFont(nsAString_internal const&, nsACString_internal const&, bool, void*)>, closure=0x61cac8d0)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3441\n#15 0x635c3130 in gfxFontGroup::ForEachFont (this=<optimized out>, \n    fc=0x635c55f1 <gfxFontGroup::FindPlatformFont(nsAString_internal const&, nsACString_internal const&, bool, void*)>, closure=<optimized out>)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3268\n#16 0x635c56a4 in gfxFontGroup::BuildFontList (this=0x1) at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3106\n#17 0x635c58f2 in gfxFontGroup::gfxFontGroup (this=0x61cac8d0, aFamilies=<optimized out>, aStyle=0x5f018580, aUserFontSet=0x0)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3097\n#18 0x635d5e8c in gfxAndroidPlatform::CreateFontGroup (this=<optimized out>, aFamilies=..., aStyle=0x5f018580, aUserFontSet=0x0)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxAndroidPlatform.cpp:149\n#19 0x62ddab50 in nsFontMetrics::Init (this=0x61c9a970, aFont=..., aLanguage=<optimized out>, aContext=<optimized out>, aUserFontSet=0x0)\n    at /Volumes/source/mozilla-central/gfx/src/nsFontMetrics.cpp:109\n#20 0x62dd8ffa in nsFontCache::GetMetricsFor (this=0x61cecd20, aFont=..., aLanguage=0x61ca5880, aUserFontSet=0x0, aMetrics=@0x5f01868c)\n#21 0x62dd92f6 in nsDeviceContext::GetMetricsFor (this=0x61cfc680, aFont=..., aLanguage=0x61ca5880, aUserFontSet=0x0, aMetrics=@0x5f01868c)\n    at /Volumes/source/mozilla-central/gfx/src/nsDeviceContext.cpp:254\n#22 0x62e0c9ee in nsLayoutUtils::GetFontMetricsForStyleContext (aStyleContext=<optimized out>, aFontMetrics=0x5f01868c, aInflation=1)\n    at /Volumes/source/mozilla-central/layout/base/nsLayoutUtils.cpp:2050\n#23 0x62e5122e in ComputeLineHeight (aFontSizeInflation=<optimized out>, aBlockHeight=<optimized out>, aStyleContext=<optimized out>)\n    at /Volumes/source/mozilla-central/layout/generic/nsHTMLReflowState.cpp:2344\n#24 nsHTMLReflowState::CalcLineHeight (aStyleContext=0x61f6e908, aBlockHeight=<optimized out>, aFontSizeInflation=1)\n    at /Volumes/source/mozilla-central/layout/generic/nsHTMLReflowState.cpp:2367\n#25 0x62e51320 in nsHTMLReflowState::CalcLineHeight (this=<optimized out>)\n    at /Volumes/source/mozilla-central/layout/generic/nsHTMLReflowState.cpp:2356\n#26 0x62e378a6 in nsBlockReflowState::nsBlockReflowState (this=0x5f018754, aReflowState=..., aPresContext=0x61f61400, aFrame=<optimized out>, \n    aMetrics=..., aTopMarginRoot=true, aBottomMarginRoot=true, aBlockNeedsFloatManager=true)\n    at /Volumes/source/mozilla-central/layout/generic/nsBlockReflowState.cpp:113\n#27 0x62e36238 in nsBlockFrame::Reflow (this=0x61f6ec58, aPresContext=0x61f61400, aMetrics=..., aReflowState=..., aStatus=@0x5f018c6c)\n    at /Volumes/source/mozilla-central/layout/generic/nsBlockFrame.cpp:1023\n#28 0x62e3b092 in nsContainerFrame::ReflowChild (this=<optimized out>, aKidFrame=0x61f6ec58, aPresContext=0x61f61400, aDesiredSize=..., \n    aReflowState=..., aX=0, aY=0, aFlags=0, aStatus=@0x5f018c6c, aTracker=0x0)\n    at /Volumes/source/mozilla-central/layout/generic/nsContainerFrame.cpp:947\n#29 0x62e501f0 in nsCanvasFrame::Reflow (this=0x61f6ddd0, aPresContext=0x61f61400, aDesiredSize=..., aReflowState=..., aStatus=@0x5f018c6c)\n    at /Volumes/source/mozilla-central/layout/generic/nsCanvasFrame.cpp:473\n#30 0x62e3b092 in nsContainerFrame::ReflowChild (this=<optimized out>, aKidFrame=0x61f6ddd0, aPresContext=0x61f61400, aDesiredSize=..., \n    aReflowState=..., aX=0, aY=0, aFlags=3, aStatus=@0x5f018c6c, aTracker=0x0)\n    at /Volumes/source/mozilla-central/layout/generic/nsContainerFrame.cpp:947\n#31 0x62e4cbd4 in nsHTMLScrollFrame::ReflowScrolledFrame (this=0x61f6dfa0, aState=0x5f018d54, aAssumeHScroll=<optimized out>, \n    aAssumeVScroll=<optimized out>, aMetrics=0x5f018ca8, aFirstPass=true)\n    at /Volumes/source/mozilla-central/layout/generic/nsGfxScrollFrame.cpp:526\n#32 0x62e4ce8c in nsHTMLScrollFrame::ReflowContents (this=0x61f6dfa0, aState=0x5f018d54, aDesiredSize=<optimized out>)\n    at /Volumes/source/mozilla-central/layout/generic/nsGfxScrollFrame.cpp:624\n#33 0x62e4d1c2 in nsHTMLScrollFrame::Reflow (this=0x61f6dfa0, aPresContext=<optimized out>, aDesiredSize=..., aReflowState=..., \n    aStatus=@0x5f0192dc) at /Volumes/source/mozilla-central/layout/generic/nsGfxScrollFrame.cpp:865\n#34 0x62e3b092 in nsContainerFrame::ReflowChild (this=<optimized out>, aKidFrame=0x61f6dfa0, aPresContext=0x61f61400, aDesiredSize=..., \n    aReflowState=..., aX=0, aY=0, aFlags=0, aStatus=@0x5f0192dc, aTracker=0x0)\n    at /Volumes/source/mozilla-central/layout/generic/nsContainerFrame.cpp:947\n#35 0x62e7462a in ViewportFrame::Reflow (this=0x61f6d7e8, aPresContext=0x61f61400, aDesiredSize=..., aReflowState=..., aStatus=@0x5f0192dc)\n    at /Volumes/source/mozilla-central/layout/generic/nsViewportFrame.cpp:201\n#36 0x62e15784 in PresShell::DoReflow (this=0x5e241e00, target=Cannot access memory at address 0x0\n) at /Volumes/source/mozilla-central/layout/base/nsPresShell.cpp:7372\n#37 0x62e1cdcc in PresShell::ProcessReflowCommands (this=0x5e241e00, aInterruptible=false)\n    at /Volumes/source/mozilla-central/layout/base/nsPresShell.cpp:7518\n#38 0x62e1d08c in PresShell::FlushPendingNotifications (this=0x5e241e00, aType=Flush_Layout)\n    at /Volumes/source/mozilla-central/layout/base/nsPresShell.cpp:3848\n#39 0x62e0670e in DocumentViewerImpl::LoadComplete (this=0x61ce74f0, aStatus=NS_OK)\n    at /Volumes/source/mozilla-central/layout/base/nsDocumentViewer.cpp:975\n#40 0x632e492e in nsDocShell::EndPageLoad (this=0x61794c00, aProgress=<optimized out>, aChannel=0x5e281cc0, aStatus=NS_OK)\n    at /Volumes/source/mozilla-central/docshell/base/nsDocShell.cpp:6409\n#41 0x632e1e24 in nsDocShell::OnStateChange (this=0x61794c00, aProgress=0x61794c14, aRequest=<optimized out>, aStateFlags=<optimized out>, \n    aStatus=NS_OK) at /Volumes/source/mozilla-central/docshell/base/nsDocShell.cpp:6240\n#42 0x632ea2e4 in nsDocLoader::DoFireOnStateChange (this=0x61794c00, aProgress=0x61794c14, aRequest=<optimized out>, aStateFlags=@0x5f019784, \n    aStatus=NS_OK) at /Volumes/source/mozilla-central/uriloader/base/nsDocLoader.cpp:1351\n#43 0x632ea972 in nsDocLoader::doStopDocumentLoad (this=<optimized out>, request=0x5e281cc0, aStatus=NS_OK)\n    at /Volumes/source/mozilla-central/uriloader/base/nsDocLoader.cpp:931\n#44 0x632eae00 in nsDocLoader::DocLoaderIsEmpty (this=0x61794c00, aFlushLayout=<optimized out>)\n    at /Volumes/source/mozilla-central/uriloader/base/nsDocLoader.cpp:820\n#45 0x632eaf72 in nsDocLoader::OnStopRequest (this=0x61794c00, aRequest=0x61bfd748, aCtxt=<optimized out>, aStatus=NS_OK)\n    at /Volumes/source/mozilla-central/uriloader/base/nsDocLoader.cpp:704\n#46 0x62d0ad0e in nsLoadGroup::RemoveRequest (this=0x6178f100, request=0x61bfd748, ctxt=0x0, aStatus=NS_OK)\n    at /Volumes/source/mozilla-central/netwerk/base/src/nsLoadGroup.cpp:698\n#47 0x62f25ac4 in nsDocument::DoUnblockOnload (this=0x61ce4400) at /Volumes/source/mozilla-central/content/base/src/nsDocument.cpp:7362\n#48 0x62f25b16 in nsDocument::UnblockOnload (this=0x61ce4400, aFireSync=false)\n    at /Volumes/source/mozilla-central/content/base/src/nsDocument.cpp:7304\n#49 0x62f2bca6 in nsDocument::DispatchContentLoadedEvents (this=0x61ce4400) at /Volumes/source/mozilla-central/content/base/src/nsDocument.cpp:4380\n#50 0x62f236e0 in nsRunnableMethodImpl<void (nsDocument::*)(), true>::Run (this=<optimized out>) at ../../../dist/include/nsThreadUtils.h:349\n#51 0x63573782 in nsThread::ProcessNextEvent (this=0x5e2564c0, mayWait=<optimized out>, result=0x5f01994f)\n    at /Volumes/source/mozilla-central/xpcom/threads/nsThread.cpp:612\n#52 0x635518f2 in NS_ProcessNextEvent_P (thread=0x61ce4400, mayWait=false)\n    at /Volumes/source/mozilla-central/objdir-droid/xpcom/build/nsThreadUtils.cpp:220\n#53 0x634728ea in mozilla::ipc::MessagePump::Run (this=0x5e2532b0, aDelegate=0x5e27f0e0)\n    at /Volumes/source/mozilla-central/ipc/glue/MessagePump.cpp:82\n#54 0x63596280 in MessageLoop::RunInternal (this=0x63b372c4) at /Volumes/source/mozilla-central/ipc/chromium/src/base/message_loop.cc:208\n#55 0x63596356 in RunHandler (this=<optimized out>) at /Volumes/source/mozilla-central/ipc/chromium/src/base/message_loop.cc:201\n#56 MessageLoop::Run (this=0x5e27f0e0) at /Volumes/source/mozilla-central/ipc/chromium/src/base/message_loop.cc:175\n#57 0x633f3160 in nsBaseAppShell::Run (this=0x5e2546b0) at /Volumes/source/mozilla-central/widget/xpwidgets/nsBaseAppShell.cpp:163\n#58 0x63320a08 in nsAppStartup::Run (this=0x608c8820) at /Volumes/source/mozilla-central/toolkit/components/startup/nsAppStartup.cpp:290\n#59 0x62cf80b6 in XREMain::XRE_mainRun (this=0x5f019af4) at /Volumes/source/mozilla-central/toolkit/xre/nsAppRunner.cpp:3782\n#60 0x62cfa1bc in XREMain::XRE_main (this=0x5f019af4, argc=<optimized out>, argv=0x5e26b048, aAppData=<optimized out>)\n    at /Volumes/source/mozilla-central/toolkit/xre/nsAppRunner.cpp:3848\n#61 0x62cfa2f0 in XRE_main (argc=7, argv=0x5e26b048, aAppData=0x582df66c, aFlags=<optimized out>)\n    at /Volumes/source/mozilla-central/toolkit/xre/nsAppRunner.cpp:3923\n#62 0x62cfd63a in GeckoStart (data=0x5c679820, appData=0x582df66c) at /Volumes/source/mozilla-central/toolkit/xre/nsAndroidStartup.cpp:73\n#63 0x582c7362 in Java_org_mozilla_gecko_GeckoAppShell_nativeRun (jenv=0x5c385358, jc=<optimized out>, jargs=0x20200005)\n    at /Volumes/source/mozilla-central/mozglue/android/APKOpen.cpp:981\n#64 0x4077b0b4 in dvmPlatformInvoke () from /Volumes/source/jimdb/moz-gdb/lib/HT24WW301665/system/lib/libdvm.so\n#65 0x407aa266 in dvmCallJNIMethod(unsigned int const*, JValue*, Method const*, Thread*) ()\n   from /Volumes/source/jimdb/moz-gdb/lib/HT24WW301665/system/lib/libdvm.so","id":6690029,"creation_time":"2012-10-02T18:27:27Z","raw_text":"Stack for second call to FT_Init_FreeType:\n\n#0  FT_Init_FreeType (alibrary=0x61ceb804) at /Volumes/source/mozilla-central/modules/freetype2/src/base/ftinit.c:250\n#1  0x636873a0 in _cairo_ft_unscaled_font_map_create () at /Volumes/source/mozilla-central/gfx/cairo/cairo/src/cairo-ft-font.c:273\n#2  _cairo_ft_unscaled_font_map_lock () at /Volumes/source/mozilla-central/gfx/cairo/cairo/src/cairo-ft-font.c:336\n#3  0x6368927c in _cairo_ft_unscaled_font_create_internal (out=<optimized out>, font_face=<optimized out>, id=<optimized out>, \n    filename=<optimized out>, from_face=<optimized out>) at /Volumes/source/mozilla-central/gfx/cairo/cairo/src/cairo-ft-font.c:491\n#4  _cairo_ft_unscaled_font_create_from_face (out=<optimized out>, face=<optimized out>)\n    at /Volumes/source/mozilla-central/gfx/cairo/cairo/src/cairo-ft-font.c:580\n#5  _moz_cairo_ft_font_face_create_for_ft_face (face=0x61ceb804, load_flags=1577246784)\n    at /Volumes/source/mozilla-central/gfx/cairo/cairo/src/cairo-ft-font.c:3098\n#6  0x635d8354 in FT2FontEntry::CairoFontFace (this=0x6148de00) at /Volumes/source/mozilla-central/gfx/thebes/gfxFT2FontList.cpp:325\n#7  0x635d85d2 in FT2FontEntry::CreateScaledFont (this=0x6148de00, aStyle=<optimized out>)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFT2FontList.cpp:130\n#8  0x635d8602 in FT2FontEntry::CreateFontInstance (this=0x6148de00, aFontStyle=0x61ce1400, aNeedsBold=172)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFT2FontList.cpp:155\n#9  0x635c556e in gfxFontEntry::FindOrMakeFont (this=0x6148de00, aStyle=0x61cac8e8, aNeedsBold=false)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:191\n#10 0x635c566c in gfxFontGroup::FindPlatformFont (aName=..., aGenericName=<optimized out>, aUseFontSet=<optimized out>, aClosure=<optimized out>)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3210\n#11 0x635bf08a in gfxFontGroup::FontResolverProc (aName=..., aClosure=<optimized out>)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3456\n#12 0x635d5f1e in gfxAndroidPlatform::ResolveFontName (this=<optimized out>, aFontName=<optimized out>, \n    aCallback=0x635bf07d <gfxFontGroup::FontResolverProc(nsAString_internal const&, void*)>, aClosure=0x5f017c74, aAborted=@0x5f017cb7)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxAndroidPlatform.cpp:99\n#13 0x635c2fcc in gfxFontGroup::ForEachFontInternal (this=0x61cac8d0, aFamilies=<optimized out>, aLanguage=<optimized out>, \n    aResolveGeneric=<optimized out>, aResolveFontName=true, aUseFontSet=false, \n    fc=0x635c55f1 <gfxFontGroup::FindPlatformFont(nsAString_internal const&, nsACString_internal const&, bool, void*)>, closure=0x61cac8d0)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3420\n#14 0x635c3076 in gfxFontGroup::ForEachFontInternal (this=0x61cac8d0, aFamilies=<optimized out>, aLanguage=<optimized out>, \n    aResolveGeneric=<optimized out>, aResolveFontName=true, aUseFontSet=true, \n    fc=0x635c55f1 <gfxFontGroup::FindPlatformFont(nsAString_internal const&, nsACString_internal const&, bool, void*)>, closure=0x61cac8d0)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3441\n#15 0x635c3130 in gfxFontGroup::ForEachFont (this=<optimized out>, \n    fc=0x635c55f1 <gfxFontGroup::FindPlatformFont(nsAString_internal const&, nsACString_internal const&, bool, void*)>, closure=<optimized out>)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3268\n#16 0x635c56a4 in gfxFontGroup::BuildFontList (this=0x1) at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3106\n#17 0x635c58f2 in gfxFontGroup::gfxFontGroup (this=0x61cac8d0, aFamilies=<optimized out>, aStyle=0x5f018580, aUserFontSet=0x0)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxFont.cpp:3097\n#18 0x635d5e8c in gfxAndroidPlatform::CreateFontGroup (this=<optimized out>, aFamilies=..., aStyle=0x5f018580, aUserFontSet=0x0)\n    at /Volumes/source/mozilla-central/gfx/thebes/gfxAndroidPlatform.cpp:149\n#19 0x62ddab50 in nsFontMetrics::Init (this=0x61c9a970, aFont=..., aLanguage=<optimized out>, aContext=<optimized out>, aUserFontSet=0x0)\n    at /Volumes/source/mozilla-central/gfx/src/nsFontMetrics.cpp:109\n#20 0x62dd8ffa in nsFontCache::GetMetricsFor (this=0x61cecd20, aFont=..., aLanguage=0x61ca5880, aUserFontSet=0x0, aMetrics=@0x5f01868c)\n#21 0x62dd92f6 in nsDeviceContext::GetMetricsFor (this=0x61cfc680, aFont=..., aLanguage=0x61ca5880, aUserFontSet=0x0, aMetrics=@0x5f01868c)\n    at /Volumes/source/mozilla-central/gfx/src/nsDeviceContext.cpp:254\n#22 0x62e0c9ee in nsLayoutUtils::GetFontMetricsForStyleContext (aStyleContext=<optimized out>, aFontMetrics=0x5f01868c, aInflation=1)\n    at /Volumes/source/mozilla-central/layout/base/nsLayoutUtils.cpp:2050\n#23 0x62e5122e in ComputeLineHeight (aFontSizeInflation=<optimized out>, aBlockHeight=<optimized out>, aStyleContext=<optimized out>)\n    at /Volumes/source/mozilla-central/layout/generic/nsHTMLReflowState.cpp:2344\n#24 nsHTMLReflowState::CalcLineHeight (aStyleContext=0x61f6e908, aBlockHeight=<optimized out>, aFontSizeInflation=1)\n    at /Volumes/source/mozilla-central/layout/generic/nsHTMLReflowState.cpp:2367\n#25 0x62e51320 in nsHTMLReflowState::CalcLineHeight (this=<optimized out>)\n    at /Volumes/source/mozilla-central/layout/generic/nsHTMLReflowState.cpp:2356\n#26 0x62e378a6 in nsBlockReflowState::nsBlockReflowState (this=0x5f018754, aReflowState=..., aPresContext=0x61f61400, aFrame=<optimized out>, \n    aMetrics=..., aTopMarginRoot=true, aBottomMarginRoot=true, aBlockNeedsFloatManager=true)\n    at /Volumes/source/mozilla-central/layout/generic/nsBlockReflowState.cpp:113\n#27 0x62e36238 in nsBlockFrame::Reflow (this=0x61f6ec58, aPresContext=0x61f61400, aMetrics=..., aReflowState=..., aStatus=@0x5f018c6c)\n    at /Volumes/source/mozilla-central/layout/generic/nsBlockFrame.cpp:1023\n#28 0x62e3b092 in nsContainerFrame::ReflowChild (this=<optimized out>, aKidFrame=0x61f6ec58, aPresContext=0x61f61400, aDesiredSize=..., \n    aReflowState=..., aX=0, aY=0, aFlags=0, aStatus=@0x5f018c6c, aTracker=0x0)\n    at /Volumes/source/mozilla-central/layout/generic/nsContainerFrame.cpp:947\n#29 0x62e501f0 in nsCanvasFrame::Reflow (this=0x61f6ddd0, aPresContext=0x61f61400, aDesiredSize=..., aReflowState=..., aStatus=@0x5f018c6c)\n    at /Volumes/source/mozilla-central/layout/generic/nsCanvasFrame.cpp:473\n#30 0x62e3b092 in nsContainerFrame::ReflowChild (this=<optimized out>, aKidFrame=0x61f6ddd0, aPresContext=0x61f61400, aDesiredSize=..., \n    aReflowState=..., aX=0, aY=0, aFlags=3, aStatus=@0x5f018c6c, aTracker=0x0)\n    at /Volumes/source/mozilla-central/layout/generic/nsContainerFrame.cpp:947\n#31 0x62e4cbd4 in nsHTMLScrollFrame::ReflowScrolledFrame (this=0x61f6dfa0, aState=0x5f018d54, aAssumeHScroll=<optimized out>, \n    aAssumeVScroll=<optimized out>, aMetrics=0x5f018ca8, aFirstPass=true)\n    at /Volumes/source/mozilla-central/layout/generic/nsGfxScrollFrame.cpp:526\n#32 0x62e4ce8c in nsHTMLScrollFrame::ReflowContents (this=0x61f6dfa0, aState=0x5f018d54, aDesiredSize=<optimized out>)\n    at /Volumes/source/mozilla-central/layout/generic/nsGfxScrollFrame.cpp:624\n#33 0x62e4d1c2 in nsHTMLScrollFrame::Reflow (this=0x61f6dfa0, aPresContext=<optimized out>, aDesiredSize=..., aReflowState=..., \n    aStatus=@0x5f0192dc) at /Volumes/source/mozilla-central/layout/generic/nsGfxScrollFrame.cpp:865\n#34 0x62e3b092 in nsContainerFrame::ReflowChild (this=<optimized out>, aKidFrame=0x61f6dfa0, aPresContext=0x61f61400, aDesiredSize=..., \n    aReflowState=..., aX=0, aY=0, aFlags=0, aStatus=@0x5f0192dc, aTracker=0x0)\n    at /Volumes/source/mozilla-central/layout/generic/nsContainerFrame.cpp:947\n#35 0x62e7462a in ViewportFrame::Reflow (this=0x61f6d7e8, aPresContext=0x61f61400, aDesiredSize=..., aReflowState=..., aStatus=@0x5f0192dc)\n    at /Volumes/source/mozilla-central/layout/generic/nsViewportFrame.cpp:201\n#36 0x62e15784 in PresShell::DoReflow (this=0x5e241e00, target=Cannot access memory at address 0x0\n) at /Volumes/source/mozilla-central/layout/base/nsPresShell.cpp:7372\n#37 0x62e1cdcc in PresShell::ProcessReflowCommands (this=0x5e241e00, aInterruptible=false)\n    at /Volumes/source/mozilla-central/layout/base/nsPresShell.cpp:7518\n#38 0x62e1d08c in PresShell::FlushPendingNotifications (this=0x5e241e00, aType=Flush_Layout)\n    at /Volumes/source/mozilla-central/layout/base/nsPresShell.cpp:3848\n#39 0x62e0670e in DocumentViewerImpl::LoadComplete (this=0x61ce74f0, aStatus=NS_OK)\n    at /Volumes/source/mozilla-central/layout/base/nsDocumentViewer.cpp:975\n#40 0x632e492e in nsDocShell::EndPageLoad (this=0x61794c00, aProgress=<optimized out>, aChannel=0x5e281cc0, aStatus=NS_OK)\n    at /Volumes/source/mozilla-central/docshell/base/nsDocShell.cpp:6409\n#41 0x632e1e24 in nsDocShell::OnStateChange (this=0x61794c00, aProgress=0x61794c14, aRequest=<optimized out>, aStateFlags=<optimized out>, \n    aStatus=NS_OK) at /Volumes/source/mozilla-central/docshell/base/nsDocShell.cpp:6240\n#42 0x632ea2e4 in nsDocLoader::DoFireOnStateChange (this=0x61794c00, aProgress=0x61794c14, aRequest=<optimized out>, aStateFlags=@0x5f019784, \n    aStatus=NS_OK) at /Volumes/source/mozilla-central/uriloader/base/nsDocLoader.cpp:1351\n#43 0x632ea972 in nsDocLoader::doStopDocumentLoad (this=<optimized out>, request=0x5e281cc0, aStatus=NS_OK)\n    at /Volumes/source/mozilla-central/uriloader/base/nsDocLoader.cpp:931\n#44 0x632eae00 in nsDocLoader::DocLoaderIsEmpty (this=0x61794c00, aFlushLayout=<optimized out>)\n    at /Volumes/source/mozilla-central/uriloader/base/nsDocLoader.cpp:820\n#45 0x632eaf72 in nsDocLoader::OnStopRequest (this=0x61794c00, aRequest=0x61bfd748, aCtxt=<optimized out>, aStatus=NS_OK)\n    at /Volumes/source/mozilla-central/uriloader/base/nsDocLoader.cpp:704\n#46 0x62d0ad0e in nsLoadGroup::RemoveRequest (this=0x6178f100, request=0x61bfd748, ctxt=0x0, aStatus=NS_OK)\n    at /Volumes/source/mozilla-central/netwerk/base/src/nsLoadGroup.cpp:698\n#47 0x62f25ac4 in nsDocument::DoUnblockOnload (this=0x61ce4400) at /Volumes/source/mozilla-central/content/base/src/nsDocument.cpp:7362\n#48 0x62f25b16 in nsDocument::UnblockOnload (this=0x61ce4400, aFireSync=false)\n    at /Volumes/source/mozilla-central/content/base/src/nsDocument.cpp:7304\n#49 0x62f2bca6 in nsDocument::DispatchContentLoadedEvents (this=0x61ce4400) at /Volumes/source/mozilla-central/content/base/src/nsDocument.cpp:4380\n#50 0x62f236e0 in nsRunnableMethodImpl<void (nsDocument::*)(), true>::Run (this=<optimized out>) at ../../../dist/include/nsThreadUtils.h:349\n#51 0x63573782 in nsThread::ProcessNextEvent (this=0x5e2564c0, mayWait=<optimized out>, result=0x5f01994f)\n    at /Volumes/source/mozilla-central/xpcom/threads/nsThread.cpp:612\n#52 0x635518f2 in NS_ProcessNextEvent_P (thread=0x61ce4400, mayWait=false)\n    at /Volumes/source/mozilla-central/objdir-droid/xpcom/build/nsThreadUtils.cpp:220\n#53 0x634728ea in mozilla::ipc::MessagePump::Run (this=0x5e2532b0, aDelegate=0x5e27f0e0)\n    at /Volumes/source/mozilla-central/ipc/glue/MessagePump.cpp:82\n#54 0x63596280 in MessageLoop::RunInternal (this=0x63b372c4) at /Volumes/source/mozilla-central/ipc/chromium/src/base/message_loop.cc:208\n#55 0x63596356 in RunHandler (this=<optimized out>) at /Volumes/source/mozilla-central/ipc/chromium/src/base/message_loop.cc:201\n#56 MessageLoop::Run (this=0x5e27f0e0) at /Volumes/source/mozilla-central/ipc/chromium/src/base/message_loop.cc:175\n#57 0x633f3160 in nsBaseAppShell::Run (this=0x5e2546b0) at /Volumes/source/mozilla-central/widget/xpwidgets/nsBaseAppShell.cpp:163\n#58 0x63320a08 in nsAppStartup::Run (this=0x608c8820) at /Volumes/source/mozilla-central/toolkit/components/startup/nsAppStartup.cpp:290\n#59 0x62cf80b6 in XREMain::XRE_mainRun (this=0x5f019af4) at /Volumes/source/mozilla-central/toolkit/xre/nsAppRunner.cpp:3782\n#60 0x62cfa1bc in XREMain::XRE_main (this=0x5f019af4, argc=<optimized out>, argv=0x5e26b048, aAppData=<optimized out>)\n    at /Volumes/source/mozilla-central/toolkit/xre/nsAppRunner.cpp:3848\n#61 0x62cfa2f0 in XRE_main (argc=7, argv=0x5e26b048, aAppData=0x582df66c, aFlags=<optimized out>)\n    at /Volumes/source/mozilla-central/toolkit/xre/nsAppRunner.cpp:3923\n#62 0x62cfd63a in GeckoStart (data=0x5c679820, appData=0x582df66c) at /Volumes/source/mozilla-central/toolkit/xre/nsAndroidStartup.cpp:73\n#63 0x582c7362 in Java_org_mozilla_gecko_GeckoAppShell_nativeRun (jenv=0x5c385358, jc=<optimized out>, jargs=0x20200005)\n    at /Volumes/source/mozilla-central/mozglue/android/APKOpen.cpp:981\n#64 0x4077b0b4 in dvmPlatformInvoke () from /Volumes/source/jimdb/moz-gdb/lib/HT24WW301665/system/lib/libdvm.so\n#65 0x407aa266 in dvmCallJNIMethod(unsigned int const*, JValue*, Method const*, Thread*) ()\n   from /Volumes/source/jimdb/moz-gdb/lib/HT24WW301665/system/lib/libdvm.so"},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-02T20:17:14Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"This is our #1 unpatched crasher. Can we take the patch we have as a bandaid and leave this open to investigate the core issue?","id":6690511,"creation_time":"2012-10-02T20:17:14Z","raw_text":"This is our #1 unpatched crasher. Can we take the patch we have as a bandaid and leave this open to investigate the core issue?"},{"is_private":false,"attachment_id":null,"creator":"jfkthame@gmail.com","time":"2012-10-03T11:43:32Z","author":"jfkthame@gmail.com","bug_id":790139,"tags":[],"text":"Are people seeing this crash with earlier Firefox releases on CM10 devices, or does it only start appearing with Aurora or Nightly builds? (If so, can we get some kind of regression range?)\n\nI'm a bit reluctant to take a band-aid that just avoids the crash here but doesn't address the root cause, given that the evidence seems to be suggesting heap corruption of some kind. If rogue code is writing wildly to the heap, then crashing quickly is arguably the best outcome; if something besides the FT_Library modules list is being trashed, we could easily have an exploitable situation.","id":6692815,"creation_time":"2012-10-03T11:43:32Z","raw_text":"Are people seeing this crash with earlier Firefox releases on CM10 devices, or does it only start appearing with Aurora or Nightly builds? (If so, can we get some kind of regression range?)\n\nI'm a bit reluctant to take a band-aid that just avoids the crash here but doesn't address the root cause, given that the evidence seems to be suggesting heap corruption of some kind. If rogue code is writing wildly to the heap, then crashing quickly is arguably the best outcome; if something besides the FT_Library modules list is being trashed, we could easily have an exploitable situation."},{"is_private":false,"attachment_id":null,"creator":"teleyinex@gmail.com","time":"2012-10-03T15:54:00Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"Hi everyone,\n\nFirst of all thanks to all of you for the efforts that you are putting into this issue. When I installed CM10 the Nightly version worked more or less well, you could open a web page, but when you opened a second one it crashed. Then, new commits were introduced and since then I cannot browse the web at all with the Nightly because as soon as I open a web page it crashes (I cannot event paste here crash reports, as even that page crashes the browser).\n\nI've also installed in my CM10 Firefox Beta from the Google Play store, but it crashes too from time to time (sometime in this browser I can even enable the reader mode). In any case, if you need a new logcat or something else, let me know it. I'll be happy to help.\n\nBest regards,\n\nDaniel","id":6693490,"creation_time":"2012-10-03T15:54:00Z","raw_text":"Hi everyone,\n\nFirst of all thanks to all of you for the efforts that you are putting into this issue. When I installed CM10 the Nightly version worked more or less well, you could open a web page, but when you opened a second one it crashed. Then, new commits were introduced and since then I cannot browse the web at all with the Nightly because as soon as I open a web page it crashes (I cannot event paste here crash reports, as even that page crashes the browser).\n\nI've also installed in my CM10 Firefox Beta from the Google Play store, but it crashes too from time to time (sometime in this browser I can even enable the reader mode). In any case, if you need a new logcat or something else, let me know it. I'll be happy to help.\n\nBest regards,\n\nDaniel"},{"is_private":false,"attachment_id":null,"creator":"jfkthame@gmail.com","time":"2012-10-03T16:18:34Z","author":"jfkthame@gmail.com","bug_id":790139,"tags":[],"text":"If you're willing to spend some time testing, it might be helpful if you re-install older Nightly versions (mozilla-central-android builds) available from http://ftp.mozilla.org/pub/mozilla.org/mobile/nightly/ (they're in directories named according to date) to identify the specific build where the immediate-crash issue started happening. By going back a month or two (or however long it takes) to confirm when there was a working build, and then repeatedly bisecting the range since then, it shouldn't take more than a half-dozen or so tests to narrow down the date of the regression.","id":6693593,"creation_time":"2012-10-03T16:18:34Z","raw_text":"If you're willing to spend some time testing, it might be helpful if you re-install older Nightly versions (mozilla-central-android builds) available from http://ftp.mozilla.org/pub/mozilla.org/mobile/nightly/ (they're in directories named according to date) to identify the specific build where the immediate-crash issue started happening. By going back a month or two (or however long it takes) to confirm when there was a working build, and then repeatedly bisecting the range since then, it shouldn't take more than a half-dozen or so tests to narrow down the date of the regression."},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-03T17:14:35Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"Just to note, the STR for this bug is to enter reader mode. An immediate crash could be bug 792825, which was a regression from bug 788378, which was introduced on 9/18.","id":6693824,"creation_time":"2012-10-03T17:14:35Z","raw_text":"Just to note, the STR for this bug is to enter reader mode. An immediate crash could be bug 792825, which was a regression from bug 788378, which was introduced on 9/18."},{"is_private":false,"attachment_id":null,"creator":"jseward@acm.org","time":"2012-10-03T17:52:15Z","author":"jseward@acm.org","bug_id":790139,"tags":[],"text":"To clarify, then, the invalid writes I saw in comment #59 happen after\nthe page has finished loading, but before entering reader mode --\nbefore I even pressed on the book-y icon to enter reader mode.\n\nBrad, just to be unambiguous about this, can you nominate a specific\nURL that causes the crash when entering reader mode?  So that we can\nall be clear that we're talking about the same failure.","id":6693992,"creation_time":"2012-10-03T17:52:15Z","raw_text":"To clarify, then, the invalid writes I saw in comment #59 happen after\nthe page has finished loading, but before entering reader mode --\nbefore I even pressed on the book-y icon to enter reader mode.\n\nBrad, just to be unambiguous about this, can you nominate a specific\nURL that causes the crash when entering reader mode?  So that we can\nall be clear that we're talking about the same failure."},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-03T19:38:44Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"At least some of the invalid writes here were bug 795234, Julian is going to re-run valgrind with a build that has that fix","id":6694421,"creation_time":"2012-10-03T19:38:44Z","raw_text":"At least some of the invalid writes here were bug 795234, Julian is going to re-run valgrind with a build that has that fix"},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-04T00:14:48Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"*** Bug 756140 has been marked as a duplicate of this bug. ***","id":6695583,"creation_time":"2012-10-04T00:14:48Z","raw_text":""},{"is_private":false,"attachment_id":null,"creator":"jseward@acm.org","time":"2012-10-04T00:44:23Z","author":"jseward@acm.org","bug_id":790139,"tags":[],"text":"I verified that the fix for bug 795234 gets rid of the invalid writes\nnoted in comment #59.  And with that fix in place, I can't get it to\ncrash, nor can I observe any memory corruption, when entering reader\nmode in a cnn.com article, on ICS.  So maybe this is CM10 specific.","id":6695657,"creation_time":"2012-10-04T00:44:23Z","raw_text":"I verified that the fix for bug 795234 gets rid of the invalid writes\nnoted in comment #59.  And with that fix in place, I can't get it to\ncrash, nor can I observe any memory corruption, when entering reader\nmode in a cnn.com article, on ICS.  So maybe this is CM10 specific."},{"is_private":false,"attachment_id":null,"creator":"teleyinex@gmail.com","time":"2012-10-04T10:33:22Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"Hi,\n\nIs it available the fix in the latest nightly? I would test it right away :-)\n\nDaniel","id":6696827,"creation_time":"2012-10-04T10:33:22Z","raw_text":"Hi,\n\nIs it available the fix in the latest nightly? I would test it right away :-)\n\nDaniel"},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-04T15:35:56Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"The fix for bug 795234 is in the latest nightly, but not the bandaid fix for this bug","id":6697516,"creation_time":"2012-10-04T15:35:56Z","raw_text":"The fix for bug 795234 is in the latest nightly, but not the bandaid fix for this bug"},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-04T16:45:35Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"This prevents the crash as well:\n\ndiff --git a/modules/freetype2/include/freetype/internal/ftobjs.h b/modules/free\n--- a/modules/freetype2/include/freetype/internal/ftobjs.h\n+++ b/modules/freetype2/include/freetype/internal/ftobjs.h\n@@ -436,10 +436,11 @@ FT_BEGIN_HEADER\n   /*                                                                       */\n   /*    memory  :: A handle to the memory manager.                         */\n   /*                                                                       */\n   typedef struct  FT_ModuleRec_\n   {\n+    char              buffer[1024];\n     FT_Module_Class*  clazz;\n     FT_Library        library;\n     FT_Memory         memory;\n \n   } FT_ModuleRec;","id":6697843,"creation_time":"2012-10-04T16:45:35Z","raw_text":"This prevents the crash as well:\n\ndiff --git a/modules/freetype2/include/freetype/internal/ftobjs.h b/modules/free\n--- a/modules/freetype2/include/freetype/internal/ftobjs.h\n+++ b/modules/freetype2/include/freetype/internal/ftobjs.h\n@@ -436,10 +436,11 @@ FT_BEGIN_HEADER\n   /*                                                                       */\n   /*    memory  :: A handle to the memory manager.                         */\n   /*                                                                       */\n   typedef struct  FT_ModuleRec_\n   {\n+    char              buffer[1024];\n     FT_Module_Class*  clazz;\n     FT_Library        library;\n     FT_Memory         memory;\n \n   } FT_ModuleRec;"},{"is_private":false,"attachment_id":null,"creator":"jfkthame@gmail.com","time":"2012-10-04T17:05:01Z","author":"jfkthame@gmail.com","bug_id":790139,"tags":[],"text":"So at this point, we know that the FT_Library created by gfxAndroidPlatform has non-NULL module pointers when it is initially created, but at some later time when we try to use it, one of those pointers has become NULL. What we don't know is who changed it to NULL, or why.\n\nIn the absence of data watchpoints, which would be the obvious tool, maybe you could put the module-pointer-validation code (with an abort as soon as the NULL is found) into a global function in gfxAndroidPlatform and then call it from strategic places - e.g. each time around the browser's event loop, for a start - to try and narrow down when the change is happening.","id":6697937,"creation_time":"2012-10-04T17:05:01Z","raw_text":"So at this point, we know that the FT_Library created by gfxAndroidPlatform has non-NULL module pointers when it is initially created, but at some later time when we try to use it, one of those pointers has become NULL. What we don't know is who changed it to NULL, or why.\n\nIn the absence of data watchpoints, which would be the obvious tool, maybe you could put the module-pointer-validation code (with an abort as soon as the NULL is found) into a global function in gfxAndroidPlatform and then call it from strategic places - e.g. each time around the browser's event loop, for a start - to try and narrow down when the change is happening."},{"is_private":false,"attachment_id":null,"creator":"tdowner@mozilla.com","time":"2012-10-05T17:26:04Z","author":"tdowner@mozilla.com","bug_id":790139,"tags":[],"text":"As discussed in the Mobile QA meeting today, this CM10 crash is still popping up in Firefox Beta 16, so this looks like it will be on the release channel next week. \nhttps://input.mozilla.org/opinion/3242204\nhttps://input.mozilla.org/opinion/3241521","id":6701740,"creation_time":"2012-10-05T17:26:04Z","raw_text":"As discussed in the Mobile QA meeting today, this CM10 crash is still popping up in Firefox Beta 16, so this looks like it will be on the release channel next week. \nhttps://input.mozilla.org/opinion/3242204\nhttps://input.mozilla.org/opinion/3241521"},{"is_private":false,"attachment_id":null,"creator":"akeybl@mozilla.com","time":"2012-10-05T17:41:53Z","author":"akeybl@mozilla.com","bug_id":790139,"tags":[],"text":"(In reply to Tyler Downer [:Tyler] from comment #77)\n> As discussed in the Mobile QA meeting today, this CM10 crash is still\n> popping up in Firefox Beta 16, so this looks like it will be on the release\n> channel next week. \n> https://input.mozilla.org/opinion/3242204\n> https://input.mozilla.org/opinion/3241521\n\nThis bug is not marked as FF15/16 tracking/affected by those involved with stability. I believe the crashes you're seeing here are bug 756140 and were already present in FF15.\n\nDoes that match other people's expectations? Kevin - can you see if you can reproduce on FF15/16 with CM10?","id":6701808,"creation_time":"2012-10-05T17:41:53Z","raw_text":"(In reply to Tyler Downer [:Tyler] from comment #77)\n> As discussed in the Mobile QA meeting today, this CM10 crash is still\n> popping up in Firefox Beta 16, so this looks like it will be on the release\n> channel next week. \n> https://input.mozilla.org/opinion/3242204\n> https://input.mozilla.org/opinion/3241521\n\nThis bug is not marked as FF15/16 tracking/affected by those involved with stability. I believe the crashes you're seeing here are bug 756140 and were already present in FF15.\n\nDoes that match other people's expectations? Kevin - can you see if you can reproduce on FF15/16 with CM10?"},{"is_private":false,"attachment_id":null,"creator":"snorp@snorp.net","time":"2012-10-05T17:45:45Z","author":"snorp@snorp.net","bug_id":790139,"tags":[],"text":"I was able to get valgrind going, here is the log from the run: http://people.mozilla.org/~jwillcox/valgrind-logcat-2.txt\n\nlibz seems to be overrunning. If I replace the libz on the system with the stock libz from jellybean the crash goes away. I'm doing a valgrind run with that right now to see what it looks like.","id":6701830,"creation_time":"2012-10-05T17:45:45Z","raw_text":"I was able to get valgrind going, here is the log from the run: http://people.mozilla.org/~jwillcox/valgrind-logcat-2.txt\n\nlibz seems to be overrunning. If I replace the libz on the system with the stock libz from jellybean the crash goes away. I'm doing a valgrind run with that right now to see what it looks like."},{"is_private":false,"attachment_id":668513,"creator":"blassey.bugs@lassey.us","time":"2012-10-05T18:09:54Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"Created attachment 668513\npatch to force us to use in tree setlcdfilter\n\nit looks like cairo is picking up the system setlcdfilter function and that's what's stomping on our memory.","id":6701931,"creation_time":"2012-10-05T18:09:54Z","raw_text":"it looks like cairo is picking up the system setlcdfilter function and that's what's stomping on our memory."},{"is_private":false,"attachment_id":668517,"creator":"blassey.bugs@lassey.us","time":"2012-10-05T18:19:00Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"Created attachment 668517\npatch to force us to use in tree setlcdfilter\n\nupdated to include the patch and a comment in the README","id":6701972,"creation_time":"2012-10-05T18:19:00Z","raw_text":"updated to include the patch and a comment in the README"},{"is_private":false,"attachment_id":null,"creator":"tdowner@mozilla.com","time":"2012-10-05T19:02:41Z","author":"tdowner@mozilla.com","bug_id":790139,"tags":[],"text":"(In reply to Alex Keybl [:akeybl] from comment #78)\nThose input reports don't indicate closing however (which is a different set up input we are seeing).  So, not sure","id":6702167,"creation_time":"2012-10-05T19:02:41Z","raw_text":"(In reply to Alex Keybl [:akeybl] from comment #78)\nThose input reports don't indicate closing however (which is a different set up input we are seeing).  So, not sure"},{"is_private":false,"attachment_id":668517,"creator":"jfkthame@gmail.com","time":"2012-10-05T19:12:40Z","author":"jfkthame@gmail.com","bug_id":790139,"tags":[],"text":"Comment on attachment 668517\npatch to force us to use in tree setlcdfilter\n\nReview of attachment 668517:\n-----------------------------------------------------------------\n\nThis looks correct to me - running with in-tree freetype but calling this function from system freetype sure sounds like a recipe for trouble!\n\n(It also explains why the problem is system-dependent, as we might get away with the error if the system and in-tree versions happen to be compatible.)","id":6702199,"creation_time":"2012-10-05T19:12:40Z","raw_text":"Review of attachment 668517:\n-----------------------------------------------------------------\n\nThis looks correct to me - running with in-tree freetype but calling this function from system freetype sure sounds like a recipe for trouble!\n\n(It also explains why the problem is system-dependent, as we might get away with the error if the system and in-tree versions happen to be compatible.)"},{"is_private":false,"attachment_id":null,"creator":"blassey.bugs@lassey.us","time":"2012-10-05T21:56:48Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"https://hg.mozilla.org/mozilla-central/rev/acd25563db2f","id":6702886,"creation_time":"2012-10-05T21:56:48Z","raw_text":"https://hg.mozilla.org/mozilla-central/rev/acd25563db2f"},{"is_private":false,"attachment_id":668517,"creator":"blassey.bugs@lassey.us","time":"2012-10-05T22:38:57Z","author":"blassey.bugs@lassey.us","bug_id":790139,"tags":[],"text":"Comment on attachment 668517\npatch to force us to use in tree setlcdfilter\n\n[Approval Request Comment]\nBug caused by (feature/regressing bug #): \nUser impact if declined: \nTesting completed (on m-c, etc.): \nRisk to taking this patch (and alternatives if risky): \nString or UUID changes made by this patch:","id":6703059,"creation_time":"2012-10-05T22:38:57Z","raw_text":"[Approval Request Comment]\nBug caused by (feature/regressing bug #): \nUser impact if declined: \nTesting completed (on m-c, etc.): \nRisk to taking this patch (and alternatives if risky): \nString or UUID changes made by this patch:"},{"is_private":false,"attachment_id":668517,"creator":"akeybl@mozilla.com","time":"2012-10-06T00:08:33Z","author":"akeybl@mozilla.com","bug_id":790139,"tags":[],"text":"Comment on attachment 668517\npatch to force us to use in tree setlcdfilter\n\n[Triage Comment]\nWe'll want to see crash volume drop significantly after this lands on FF17, before considering taking in a 16.0.1.","id":6703365,"creation_time":"2012-10-06T00:08:33Z","raw_text":"[Triage Comment]\nWe'll want to see crash volume drop significantly after this lands on FF17, before considering taking in a 16.0.1."},{"is_private":false,"attachment_id":null,"creator":"akeybl@mozilla.com","time":"2012-10-06T00:08:50Z","author":"akeybl@mozilla.com","bug_id":790139,"tags":[],"text":"(please land asap to make Monday's merge)","id":6703368,"creation_time":"2012-10-06T00:08:50Z","raw_text":"(please land asap to make Monday's merge)"},{"is_private":false,"attachment_id":null,"creator":"mark.finkle@gmail.com","time":"2012-10-06T00:23:48Z","author":"mark.finkle@gmail.com","bug_id":790139,"tags":[],"text":"https://hg.mozilla.org/releases/mozilla-aurora/rev/bf4ea2d4dd97","id":6703407,"creation_time":"2012-10-06T00:23:48Z","raw_text":"https://hg.mozilla.org/releases/mozilla-aurora/rev/bf4ea2d4dd97"},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-10-06T15:36:53Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"(In reply to Daniel Lombraa Gonzlez from comment #73)\n> Is it available the fix in the latest nightly? I would test it right away :-)\nPlease, can you verify it's fixed for you?","id":6704331,"creation_time":"2012-10-06T15:36:53Z","raw_text":"(In reply to Daniel Lombraa Gonzlez from comment #73)\n> Is it available the fix in the latest nightly? I would test it right away :-)\nPlease, can you verify it's fixed for you?"},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-10-07T08:11:26Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"The ft_module_get_service crashes in Trunk and XUL crashes in Aurora has stopped after builds from October 5.","id":6705255,"creation_time":"2012-10-07T08:11:26Z","raw_text":"The ft_module_get_service crashes in Trunk and XUL crashes in Aurora has stopped after builds from October 5."},{"is_private":false,"attachment_id":null,"creator":"scoobidiver@netcourrier.com","time":"2012-10-07T08:13:47Z","author":"scoobidiver@netcourrier.com","bug_id":790139,"tags":[],"text":"*** Bug 795570 has been marked as a duplicate of this bug. ***","id":6705258,"creation_time":"2012-10-07T08:13:47Z","raw_text":""},{"is_private":false,"attachment_id":null,"creator":"teleyinex@gmail.com","time":"2012-10-07T12:16:52Z","author":"teleyinex@gmail.com","bug_id":790139,"tags":[],"text":"Hi everyone,\n\nTHANKS!!!!! It seems to be working right now, even the reader mode!!!! I'll be in the #mozfestival so if someone is around I would love to say thanks in person :-D \n\nCheers,\n\nDaniel","id":6705413,"creation_time":"2012-10-07T12:16:52Z","raw_text":"Hi everyone,\n\nTHANKS!!!!! It seems to be working right now, even the reader mode!!!! I'll be in the #mozfestival so if someone is around I would love to say thanks in person :-D \n\nCheers,\n\nDaniel"},{"is_private":false,"attachment_id":null,"creator":"aaron.train@gmail.com","time":"2012-10-07T14:56:30Z","author":"aaron.train@gmail.com","bug_id":790139,"tags":[],"text":"*** Bug 791781 has been marked as a duplicate of this bug. ***","id":6705545,"creation_time":"2012-10-07T14:56:30Z","raw_text":""},{"is_private":false,"attachment_id":null,"creator":"kbrosnan@mozilla.com","time":"2012-10-08T22:00:53Z","author":"kbrosnan@mozilla.com","bug_id":790139,"tags":[],"text":"*** Bug 756140 has been marked as a duplicate of this bug. ***","id":6709213,"creation_time":"2012-10-08T22:00:53Z","raw_text":""},{"is_private":false,"attachment_id":668517,"creator":"akeybl@mozilla.com","time":"2012-10-10T17:06:06Z","author":"akeybl@mozilla.com","bug_id":790139,"tags":[],"text":"Comment on attachment 668517\npatch to force us to use in tree setlcdfilter\n\n[Triage Comment]\nApproving for inclusion in 16.0.1. This patch introduces almost zero risk, since affected users are already crashing constantly.","id":6716007,"creation_time":"2012-10-10T17:06:06Z","raw_text":"[Triage Comment]\nApproving for inclusion in 16.0.1. This patch introduces almost zero risk, since affected users are already crashing constantly."},{"is_private":false,"attachment_id":null,"creator":"aaron.train@gmail.com","time":"2012-10-11T00:27:49Z","author":"aaron.train@gmail.com","bug_id":790139,"tags":[],"text":"This landed as https://hg.mozilla.org/releases/mozilla-release/rev/10eed4e3cfd2\n\nVerified fixed on mozilla-release (16.0.1) via my TF201/CM10 Nightly","id":6717713,"creation_time":"2012-10-11T00:27:49Z","raw_text":"This landed as https://hg.mozilla.org/releases/mozilla-release/rev/10eed4e3cfd2\n\nVerified fixed on mozilla-release (16.0.1) via my TF201/CM10 Nightly"}]}},"comments":{}}