20503: /* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */
20503: /* ***** BEGIN LICENSE BLOCK *****
20503:  * Version: MPL 1.1/GPL 2.0/LGPL 2.1
20503:  *
20503:  * The contents of this file are subject to the Mozilla Public License Version
20503:  * 1.1 (the "License"); you may not use this file except in compliance with
20503:  * the License. You may obtain a copy of the License at
20503:  * http://www.mozilla.org/MPL/
20503:  *
20503:  * Software distributed under the License is distributed on an "AS IS" basis,
20503:  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
20503:  * for the specific language governing rights and limitations under the
20503:  * License.
20503:  *
20503:  * The Original Code is Mozilla Communicator client code.
20503:  *
20503:  * The Initial Developer of the Original Code is
20503:  * Netscape Communications Corporation.
20503:  * Portions created by the Initial Developer are Copyright (C) 1998
20503:  * the Initial Developer. All Rights Reserved.
20503:  *
20503:  * Contributor(s):
20503:  *
20503:  * Alternatively, the contents of this file may be used under the terms of
20503:  * either of the GNU General Public License Version 2 or later (the "GPL"),
20503:  * or the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
20503:  * in which case the provisions of the GPL or the LGPL are applicable instead
20503:  * of those above. If you wish to allow use of your version of this file only
20503:  * under the terms of either the GPL or the LGPL, and not to allow others to
20503:  * use your version of this file under the terms of the MPL, indicate your
20503:  * decision by deleting the provisions above and replace them with the notice
20503:  * and other provisions required by the GPL or the LGPL. If you do not delete
20503:  * the provisions above, a recipient may use your version of this file under
20503:  * the terms of any one of the MPL, the GPL or the LGPL.
20503:  *
20503:  * ***** END LICENSE BLOCK ***** */
20503: 
20503: /*
20503:  * Implementation of DOM Core's nsIDOMText node.
20503:  */
20503: 
20503: #include "nsGenericDOMDataNode.h"
20503: #include "nsIDOMText.h"
75263: 
96083: #include "nsIAttribute.h"
96083: #include "nsIDocument.h"
96083: #include "nsThreadUtils.h"
96083: 
20503: /**
20503:  * Class used to implement DOM text nodes
20503:  */
70839: class nsTextNode : public nsGenericDOMDataNode,
20503:                    public nsIDOMText
20503: {
20503: public:
94340:   nsTextNode(already_AddRefed<nsINodeInfo> aNodeInfo);
20503:   virtual ~nsTextNode();
20503: 
20503:   // nsISupports
20503:   NS_DECL_ISUPPORTS_INHERITED
20503: 
20503:   // nsIDOMNode
71768:   NS_FORWARD_NSIDOMNODE(nsGenericDOMDataNode::)
20503: 
20503:   // nsIDOMCharacterData
20503:   NS_FORWARD_NSIDOMCHARACTERDATA(nsGenericDOMDataNode::)
20503: 
20503:   // nsIDOMText
20503:   NS_FORWARD_NSIDOMTEXT(nsGenericDOMDataNode::)
20503: 
71768:   // nsINode
79445:   virtual bool IsNodeOfType(PRUint32 aFlags) const;
71768: 
94340:   virtual nsGenericDOMDataNode* CloneDataNode(nsINodeInfo *aNodeInfo,
79445:                                               bool aCloneText) const;
71744: 
96083:   nsresult BindToAttribute(nsIAttribute* aAttr);
96083:   nsresult UnbindFromAttribute();
96083: 
48124:   virtual nsXPCClassInfo* GetClassInfo();
48124: 
76359:   nsresult AppendTextForNormalize(const PRUnichar* aBuffer, PRUint32 aLength,
79445:                                   bool aNotify, nsIContent* aNextSibling);
76359: 
20503: #ifdef DEBUG
20503:   virtual void List(FILE* out, PRInt32 aIndent) const;
79445:   virtual void DumpContent(FILE* out, PRInt32 aIndent, bool aDumpAll) const;
20503: #endif
20503: };
