17092: # -*- Mode: Python -*-
17092: # ***** BEGIN LICENSE BLOCK *****
17092: # Version: MPL 1.1/GPL 2.0/LGPL 2.1
17092: #
17092: # The contents of this file are subject to the Mozilla Public License Version
17092: # 1.1 (the "License"); you may not use this file except in compliance with
17092: # the License. You may obtain a copy of the License at
17092: # http://www.mozilla.org/MPL/
17092: #
17092: # Software distributed under the License is distributed on an "AS IS" basis,
17092: # WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
17092: # for the specific language governing rights and limitations under the
17092: # License.
17092: #
17092: # The Original Code is mozilla.org code.
17092: #
17092: # The Initial Developer of the Original Code is
17092: #   Mozilla Foundation.
17092: # Portions created by the Initial Developer are Copyright (C) 2008
17092: # the Initial Developer. All Rights Reserved.
17092: #
17092: # Contributor(s):
17092: #   Jason Orendorff <jorendorff@mozilla.com>
17092: #
17092: # Alternatively, the contents of this file may be used under the terms of
17092: # either of the GNU General Public License Version 2 or later (the "GPL"),
17092: # or the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
17092: # in which case the provisions of the GPL or the LGPL are applicable instead
17092: # of those above. If you wish to allow use of your version of this file only
17092: # under the terms of either the GPL or the LGPL, and not to allow others to
17092: # use your version of this file under the terms of the MPL, indicate your
17092: # decision by deleting the provisions above and replace them with the notice
17092: # and other provisions required by the GPL or the LGPL. If you do not delete
17092: # the provisions above, a recipient may use your version of this file under
17092: # the terms of any one of the MPL, the GPL or the LGPL.
17092: #
17092: # ***** END LICENSE BLOCK *****
17092: 
17092: name = 'DOM'
17092: 
17092: # A quick warning:
17092: #
17092: # Attributes or methods that call GetCurrentNativeCallContext must not be
17092: # quick-stubbed, because quick stubs don't generate a native call context.
17092: # qsgen.py has no way of knowing which attributes and methods do this, as it
17092: # looks at interfaces, not implementations.  The symptoms, if you quick-stub
17092: # one of those, can be really weird, because GetCurrentNativeCallContext
17092: # doesn't crash--it may in fact return a plausible wrong answer.
17092: 
17092: members = [ 
36760:     # dom/interfaces/base
17092:     #
17092:     # Note that many implementations of interfaces in this directory
17092:     # use GetCurrentNativeCallContext, notably:
17092:     #   - nsIDOMCrypto.{generateCRMFRequest,signText}
17092:     #   - nsIDOMLocation.reload
17092:     #   - nsIDOMNSHistory.go
17092:     #   - nsIDOMJSNavigator.preference
17092:     #   - nsIDOMJSPluginArray.refresh
17092:     #   - nsIDOMWindowInternal.postMessage
17092:     #   - nsIDOMJSWindow.{prompt,setTimeout,setInterval,open,openDialog}
17092:     #
17092:     # (And nsIDOMModalContentWindow.returnValue is an attribute of type
17092:     # nsIVariant, which qsgen.py can't handle.)
17092:     #
17092:     'nsIDOMWindow.name',
17092:     'nsIDOMWindow.parent',
17092:     'nsIDOMWindow.top',
20206:     # Several window properties are magically resolved, including
20206:     # location, _content, navigator, document, and window itself.
20206:     # These do not need quick stubs.
20206:     #'nsIDOMWindow.document',
17092:     'nsIDOMWindow.getSelection',
26402:     'nsIDOMWindow.scrollByLines',
26402:     'nsIDOMJSWindow.dump',
17092:     'nsIDOMScreen.top',
17092:     'nsIDOMScreen.height',
17092:     'nsIDOMScreen.width',
17092:     'nsIDOMScreen.left',
33471:     'nsIDOMClientRect.*',
33471:     'nsIDOMClientRectList.*',
33471:     'nsIDOMPaintRequest.*',
33471:     'nsIDOMPaintRequestList.*',
19313:     # nsLocationSH has ~ALLOW_PROP_MODS_TO_PROTOTYPE, so don't try.
19313:     #'nsIDOMLocation.hostname',
19313:     #'nsIDOMLocation.href',
17092: 
36760:     # dom/interfaces/canvas
17092:     #
38908:     # nsIDOMCanvasRenderingContext2D and friends
37417:     'nsIDOMCanvasRenderingContext2D.*',
38908:     'nsIDOMTextMetrics.*',
38908:     'nsIDOMCanvasGradient.*',
38908:     'nsIDOMCanvasPattern.*',
17092: 
36760:     # dom/interfaces/core
17092:     'nsIDOMCharacterData.data',
17092:     'nsIDOMCharacterData.length',
17092:     'nsIDOMDocument.documentElement',
17092:     'nsIDOMDocument.implementation',
17092:     'nsIDOMDocument.getElementsByTagName',
17092:     'nsIDOMDocument.doctype',
17092:     'nsIDOMDocument.getElementsByTagNameNS',
17092:     'nsIDOMDocument.getElementById',
17092:     'nsIDOMDocument.createDocumentFragment',
17092:     'nsIDOMDocument.createElement',
17092:     'nsIDOMDocument.importNode',
17092:     'nsIDOMDocument.createTextNode',
17092:     'nsIDOMElement.removeAttributeNS',
17092:     'nsIDOMElement.removeAttribute',
17092:     'nsIDOMElement.getAttribute',
17092:     'nsIDOMElement.getElementsByTagName',
17092:     'nsIDOMElement.setAttribute',
17092:     'nsIDOMElement.getElementsByTagNameNS',
17092:     'nsIDOMElement.hasAttributeNS',
17092:     'nsIDOMElement.tagName',
17092:     'nsIDOMElement.setAttributeNS',
17092:     'nsIDOMElement.hasAttribute',
17092:     'nsIDOMElement.getAttributeNS',
17092:     'nsIDOMNamedNodeMap.item',
17092:     'nsIDOMNamedNodeMap.length',
17092:     'nsIDOMNode.appendChild',
17092:     'nsIDOMNode.nextSibling',
17092:     'nsIDOMNode.cloneNode',
17092:     'nsIDOMNode.firstChild',
17092:     'nsIDOMNode.prefix',
17092:     'nsIDOMNode.nodeValue',
17092:     'nsIDOMNode.childNodes',
17092:     'nsIDOMNode.normalize',
17092:     'nsIDOMNode.nodeName',
17092:     'nsIDOMNode.namespaceURI',
17092:     'nsIDOMNode.hasChildNodes',
17092:     'nsIDOMNode.previousSibling',
17092:     'nsIDOMNode.nodeType',
17092:     'nsIDOMNode.insertBefore',
17092:     'nsIDOMNode.replaceChild',
17092:     'nsIDOMNode.localName',
17092:     'nsIDOMNode.lastChild',
17092:     'nsIDOMNode.ownerDocument',
17092:     'nsIDOMNode.parentNode',
17092:     'nsIDOMNode.removeChild',
17092:     'nsIDOMNode.hasAttributes',
17092:     'nsIDOMNode.attributes',
17092:     'nsIDOMNodeList.item',
17092:     'nsIDOMNodeList.length',
29393:     'nsIDOMNodeSelector.querySelector',
29393:     'nsIDOMNodeSelector.querySelectorAll',
17092:     'nsIDOMText.splitText',
17092:     'nsIDOM3Document.documentURI',
17092:     'nsIDOM3Document.adoptNode',
17092:     'nsIDOM3Document.renameNode',
41912:     'nsIDOM3Node.*',
17092:     'nsIDOMDOMStringList.item',
17092:     'nsIDOMDOMStringList.length',
17092:     'nsIDOMDOMStringList.contains',
36760:     'nsIDOMDOMTokenList.*',
41438:     'nsIDOMDOMSettableTokenList.*',
17092:     'nsIDOMNameList.getName',
17092:     'nsIDOMNameList.contains',
17092:     'nsIDOMNameList.containsNS',
17092:     'nsIDOMNameList.length',
17092:     'nsIDOMNameList.getNamespaceURI',
17092:     'nsIDOMNSDocument.getElementsByClassName',
17092:     'nsIDOMNSDocument.title',
17092:     'nsIDOMNSDocument.hasFocus',
19260:     # This property is treated specially in nsDOMClassInfo in a way that
19260:     # would shadow any quick stub.  Also, document.location is a special
19260:     # case for security.
19260:     #'nsIDOMNSDocument.location',
17092:     'nsIDOMNSDocument.elementFromPoint',
17092:     'nsIDOMNSDocument.activeElement',
26701:     'nsIDOMXULDocument.getBoxObjectFor',
17092:     'nsIDOMXMLDocument.evaluateXPointer',
17092:     'nsIDOMXMLDocument.evaluateFIXptr',
17092:     'nsIDOMNSElement.getClientRects',
17092:     'nsIDOMNSElement.getBoundingClientRect',
17092:     'nsIDOMNSElement.getElementsByClassName',
17092:     'nsIDOMNSElement.scrollWidth',
17092:     'nsIDOMNSElement.clientLeft',
17092:     'nsIDOMNSElement.clientHeight',
17092:     'nsIDOMNSElement.clientWidth',
17092:     'nsIDOMNSElement.clientTop',
33351:     'nsIDOMNSElement.mozMatchesSelector',
17092: 
36760:     # dom/interfaces/css
17092:     'nsIDOMElementCSSInlineStyle.style',
32848:     'nsIDOMCSS2Properties.*',
32848:     'nsIDOMNSCSS2Properties.*',
17092:     'nsIDOMRect.top',
17092:     'nsIDOMRect.right',
17092:     'nsIDOMRect.left',
17092:     'nsIDOMRect.bottom',
17092:     'nsIDOMViewCSS.getComputedStyle',
17092: 
36760:     # dom/interfaces/events
17092:     'nsIDOMEventTarget.dispatchEvent',
17092:     'nsIDOMEventTarget.removeEventListener',
37187:     'nsIDOMNSEventTarget.addEventListener',
17092:     'nsIDOMDocumentEvent.createEvent',
33471: 
33471:     'nsIDOMEvent.*',
33471:     'nsIDOMMouseEvent.*',
33471:     'nsIDOMKeyEvent.*',
33471:     'nsIDOMMutationEvent.*',
33471:     'nsIDOMDragEvent.*',
33471:     'nsIDOMScrollAreaEvent.*',
33471:     'nsIDOMNotifyPaintEvent.*',
33471:     'nsIDOMMessageEvent.*',
33471:     'nsIDOMMouseScrollEvent.*',
33471:     'nsIDOMProgressEvent.lengthComputable',
33471:     'nsIDOMProgressEvent.loaded',
33471:     'nsIDOMProgressEvent.total',
33471:     #XXX Can't quickstub initProgressEvent because it has long long parameters.
17092:     'nsIDOMNSEvent.originalTarget',
29471:     'nsIDOMNSEvent.getPreventDefault',
17092:     'nsIDOMNSUIEvent.which',
17092:     'nsIDOMNSUIEvent.rangeParent',
17092:     'nsIDOMNSUIEvent.rangeOffset',
17092:     'nsIDOMNSUIEvent.pageX',
17092:     'nsIDOMNSUIEvent.pageY',
17092:     'nsIDOMNSUIEvent.isChar',
17092: 
36760:     # dom/interfaces/geolocation - None.
17092: 
36760:     # dom/interfaces/html
17092:     'nsIDOMHTMLAnchorElement.href',
17092:     'nsIDOMHTMLAnchorElement.rel',
17092:     'nsIDOMHTMLAnchorElement.target',
25992:     'nsIDOMHTMLAnchorElement.name',
17092:     'nsIDOMHTMLBaseElement.href',
17092:     'nsIDOMHTMLBaseElement.target',
17092:     'nsIDOMHTMLButtonElement.name',
17092:     'nsIDOMHTMLButtonElement.form',
17092:     'nsIDOMHTMLButtonElement.value',
17092:     'nsIDOMHTMLButtonElement.disabled',
17092:     'nsIDOMHTMLCollection.item',
19260:     # This is shadowed by nsIDOMHTMLOptionsCollection.length,
19260:     # but it is also present in other objects where it isn't shadowed.
19260:     # Quick stubs handle the shadowing the same as XPConnect.
19260:     'nsIDOMHTMLCollection.length',
17092:     'nsIDOMHTMLDocument.body',
17092:     'nsIDOMHTMLDocument.getElementsByName',
17092:     'nsIDOMHTMLDocument.anchors',
17092:     'nsIDOMHTMLDocument.links',
17092:     'nsIDOMHTMLDocument.title',
17092:     'nsIDOMHTMLDocument.URL',
17092:     'nsIDOMHTMLDocument.referrer',
17092:     'nsIDOMHTMLDocument.forms',
17092:     'nsIDOMHTMLDocument.cookie',
17092:     'nsIDOMHTMLDocument.images',
31979:     'nsIDOMHTMLDocument.write',
31979:     'nsIDOMHTMLDocument.writeln',
17092:     'nsIDOMHTMLElement.className',
17092:     'nsIDOMHTMLElement.id',
17092:     'nsIDOMHTMLElement.title',
17092:     'nsIDOMHTMLFormElement.elements',
17092:     'nsIDOMHTMLFormElement.name',
17092:     'nsIDOMHTMLFormElement.submit',
17092:     'nsIDOMHTMLFormElement.length',
17092:     'nsIDOMHTMLFormElement.target',
17092:     'nsIDOMHTMLFormElement.action',
17092:     'nsIDOMHTMLFrameElement.src',
17092:     'nsIDOMHTMLFrameElement.contentDocument',
17092:     'nsIDOMHTMLFrameElement.name',
17092:     'nsIDOMHTMLFrameSetElement.rows',
17092:     'nsIDOMHTMLFrameSetElement.cols',
17092:     'nsIDOMHTMLIFrameElement.src',
17092:     'nsIDOMHTMLIFrameElement.contentDocument',
17092:     'nsIDOMHTMLImageElement.src',
17092:     'nsIDOMHTMLImageElement.name',
17092:     'nsIDOMHTMLImageElement.height',
17092:     'nsIDOMHTMLImageElement.width',
17092:     'nsIDOMHTMLInputElement.defaultChecked',
17092:     'nsIDOMHTMLInputElement.disabled',
17092:     'nsIDOMHTMLInputElement.select',
17092:     'nsIDOMHTMLInputElement.checked',
17092:     'nsIDOMHTMLInputElement.type',
17092:     'nsIDOMHTMLInputElement.form',
17092:     'nsIDOMHTMLInputElement.src',
17092:     'nsIDOMHTMLInputElement.name',
17092:     'nsIDOMHTMLInputElement.value',
17092:     'nsIDOMHTMLLinkElement.disabled',
17092:     'nsIDOMHTMLOptionElement.index',
17092:     'nsIDOMHTMLOptionElement.selected',
17092:     'nsIDOMHTMLOptionElement.form',
19260:     # Readonly, shadowed by nsIDOMNSHTMLOptionElement.text (below).
18549:     #'nsIDOMHTMLOptionElement.text',
17092:     'nsIDOMHTMLOptionElement.defaultSelected',
17092:     'nsIDOMHTMLOptionElement.value',
17092:     'nsIDOMHTMLOptionElement.label',
17092:     'nsIDOMHTMLOptionElement.disabled',
17092:     'nsIDOMHTMLOptionsCollection.item',
17092:     'nsIDOMHTMLOptionsCollection.length',
17092:     'nsIDOMHTMLSelectElement.name',
17092:     'nsIDOMHTMLSelectElement.form',
17092:     'nsIDOMHTMLSelectElement.add',
17092:     'nsIDOMHTMLSelectElement.value',
17092:     'nsIDOMHTMLSelectElement.disabled',
17092:     'nsIDOMHTMLSelectElement.length',
17092:     'nsIDOMHTMLSelectElement.remove',
17092:     'nsIDOMHTMLSelectElement.selectedIndex',
17092:     'nsIDOMHTMLSelectElement.type',
17092:     'nsIDOMHTMLSelectElement.options',
17092:     'nsIDOMHTMLSelectElement.size',
17092:     'nsIDOMHTMLStyleElement.disabled',
17092:     'nsIDOMHTMLTableCellElement.colSpan',
17092:     'nsIDOMHTMLTableCellElement.headers',
17092:     'nsIDOMHTMLTableCellElement.cellIndex',
17092:     'nsIDOMHTMLTableCellElement.rowSpan',
17092:     'nsIDOMHTMLTableCellElement.abbr',
17092:     'nsIDOMHTMLTableCellElement.scope',
17092:     'nsIDOMHTMLTableCellElement.noWrap',
17092:     'nsIDOMHTMLTableCellElement.width',
17092:     'nsIDOMHTMLTableColElement.span',
17092:     'nsIDOMHTMLTableColElement.width',
17092:     'nsIDOMHTMLTableElement.rows',
17092:     'nsIDOMHTMLTableElement.deleteRow',
17092:     'nsIDOMHTMLTableElement.summary',
17092:     'nsIDOMHTMLTableElement.insertRow',
17092:     'nsIDOMHTMLTableRowElement.sectionRowIndex',
17092:     'nsIDOMHTMLTableRowElement.rowIndex',
17092:     'nsIDOMHTMLTableRowElement.cells',
17092:     'nsIDOMHTMLTableRowElement.deleteCell',
17092:     'nsIDOMHTMLTableRowElement.insertCell',
17092:     'nsIDOMHTMLTableSectionElement.rows',
17092:     'nsIDOMHTMLTableSectionElement.insertRow',
17092:     'nsIDOMHTMLTableSectionElement.deleteRow',
17092:     'nsIDOMHTMLTextAreaElement.rows',
17092:     'nsIDOMHTMLTextAreaElement.name',
17092:     'nsIDOMHTMLTextAreaElement.form',
17092:     'nsIDOMHTMLTextAreaElement.defaultValue',
17092:     'nsIDOMHTMLTextAreaElement.cols',
17092:     'nsIDOMHTMLTextAreaElement.value',
17092:     'nsIDOMHTMLTextAreaElement.type',
17092:     'nsIDOMHTMLTextAreaElement.select',
17092:     'nsIDOMHTMLTitleElement.text',
17092:     'nsIDOMHTMLCanvasElement.width',
17092:     'nsIDOMHTMLCanvasElement.height',
17092:     'nsIDOMHTMLCanvasElement.getContext',
34227:     'nsIDOMHTMLCanvasElement.toDataURL',
17092:     'nsIDOMNSHTMLAnchorElement.text',
25992:     'nsIDOMNSHTMLAnchorElement.search',
25992:     'nsIDOMNSHTMLAnchorElement.hash',
17092:     'nsIDOMNSHTMLDocument.width',
17092:     'nsIDOMNSHTMLDocument.height',
17092:     'nsIDOMNSHTMLDocument.domain',
17092:     'nsIDOMNSHTMLDocument.getSelection',
17092:     'nsIDOMNSHTMLDocument.designMode',
17092:     'nsIDOMNSHTMLElement.contentEditable',
39457:     'nsIDOMNSHTMLElement.isContentEditable',
17092:     'nsIDOMNSHTMLElement.offsetParent',
17092:     'nsIDOMNSHTMLElement.innerHTML',
17092:     'nsIDOMNSHTMLElement.offsetLeft',
17092:     'nsIDOMNSHTMLElement.offsetTop',
17092:     'nsIDOMNSHTMLElement.offsetHeight',
17092:     'nsIDOMNSHTMLElement.offsetWidth',
34227:     'nsIDOMNSHTMLElement.scrollIntoView',
17092:     'nsIDOMNSHTMLFrameElement.contentWindow',
17092:     'nsIDOMNSHTMLImageElement.complete',
17092:     'nsIDOMNSHTMLInputElement.files',
17092:     'nsIDOMNSHTMLInputElement.textLength',
17092:     'nsIDOMNSHTMLInputElement.selectionStart',
17092:     'nsIDOMNSHTMLInputElement.selectionEnd',
17092:     'nsIDOMNSHTMLInputElement.setSelectionRange',
17092:     'nsIDOMNSHTMLOptionCollection.selectedIndex',
34227:     'nsIDOMNSHTMLOptionCollection.add',
17092:     'nsIDOMNSHTMLOptionElement.text',
17092:     'nsIDOMNSHTMLSelectElement.item',
17092:     'nsIDOMNSHTMLTextAreaElement.setSelectionRange',
17092:     'nsIDOMNSHTMLTextAreaElement.selectionStart',
17092:     'nsIDOMNSHTMLTextAreaElement.selectionEnd',
17092:     'nsIDOMNSHTMLTextAreaElement.textLength',
37938:     'nsIDOMNSHTMLTextAreaElement.wrap',
17092: 
36760:     # dom/interfaces/json - None.
17092:     # All 4 methods of nsIJSON call GetCurrentNativeCallContext.
17092: 
36760:     # dom/interfaces/load-save - None.
17092: 
36760:     # dom/interfaces/offline - None.
36760: 
36760:     # dom/interfaces/range
40537:     'nsIDOMRange.*',
17092: 
36760:     # dom/interfaces/sidebar - None.
17092: 
36760:     # dom/interfaces/smil - None.
36760: 
36760:     # dom/interfaces/storage
17092:     'nsIDOMToString.toString',
28438:     'nsIDOMStorage.setItem',
28438:     'nsIDOMStorage.length',
28438:     'nsIDOMStorage.getItem',
28438:     'nsIDOMStorage.key',
28438:     'nsIDOMStorage.removeItem',
28438:     'nsIDOMStorage.clear',
17092:     'nsIDOMStorageItem.value',
36918:     'nsIDOMStorageWindow.*',
17092: 
36760:     # dom/interfaces/stylesheets - None.
17092: 
36760:     # dom/interfaces/svg - None.
36760: 
36760:     # dom/interfaces/threads - None.
36760: 
36760:     # dom/interfaces/traversal
17092:     'nsIDOMDocumentTraversal.createNodeIterator',
17092:     'nsIDOMNodeIterator.nextNode',
17092: 
36760:     # dom/interfaces/views
17092:     'nsIDOMDocumentView.defaultView',
17092:     
36760:     # dom/interfaces/xbl - None.
17092: 
36760:     # dom/interfaces/xpath
17092:     'nsIDOMXPathEvaluator.evaluate',
17092:     'nsIDOMXPathEvaluator.createExpression',
17092:     'nsIDOMXPathEvaluator.createNSResolver',
17092:     'nsIDOMXPathExpression.evaluate',
17092:     'nsIDOMXPathNSResolver.lookupNamespaceURI',
17092:     'nsIDOMXPathResult.snapshotItem',
17092:     'nsIDOMXPathResult.iterateNext',
17092:     'nsIDOMXPathResult.snapshotLength',
17092:     'nsIDOMXPathResult.resultType',
17092:     'nsIDOMXPathResult.numberValue',
17092:     'nsIDOMXPathResult.stringValue',
17092:     'nsIDOMXPathResult.booleanValue',
17092:     'nsIDOMXPathResult.singleNodeValue',
17092:     'nsIDOMNSXPathExpression.evaluateWithContext',
17092: 
36760:     # dom/interfaces/xul - None.
37417: 
41198:     # XHR
41198:     'nsIXMLHttpRequest.*',
41198:     # nsIXMLHttpRequest.channel is not used on the web, and more
41198:     # importantly relies on the CAPS check that quickstubs don't make.
41198:     '-nsIXMLHttpRequest.channel',
41198:     # nsIXMLHttpRequest.open uses the JS stack
41198:     '-nsIXMLHttpRequest.open',
41198:     # various XHR things use ACString and AUTF8String and [cstring]
41198:     # which quickstubs don't handle as return values (or at all in the
41198:     # case of AUTF8String) yet.
41198:     '-nsIXMLHttpRequest.statusText',
41198:     '-nsIXMLHttpRequest.getAllResponseHeaders',
41198:     '-nsIXMLHttpRequest.getResponseHeader',
41198:     '-nsIXMLHttpRequest.setRequestHeader',
41198:     '-nsIXMLHttpRequest.overrideMimeType',
41198:     # nsIXMLHttpRequestUpload doesn't live in its own IDL file, so
41198:     # can't be quickstubbed
41198:     '-nsIXMLHttpRequest.upload',
41198: 
37417:     # webgl
37417:     'nsICanvasRenderingContextWebGL.*',
37417:     # These all use GetCurrentNativeCallContext and should be
37417:     # custom-quickstubbed.
37417:     '-nsICanvasRenderingContextWebGL.getActiveAttrib',
37417:     '-nsICanvasRenderingContextWebGL.getActiveUniform',
37417:     '-nsICanvasRenderingContextWebGL.getParameter',
37417:     '-nsICanvasRenderingContextWebGL.getBufferParameter',
37417:     '-nsICanvasRenderingContextWebGL.getFramebufferAttachmentParameter',
37417:     '-nsICanvasRenderingContextWebGL.getRenderbufferParameter',
37417:     '-nsICanvasRenderingContextWebGL.getProgramParameter',
37417:     '-nsICanvasRenderingContextWebGL.texParameterf',
37417:     '-nsICanvasRenderingContextWebGL.texParameteri',
37417:     '-nsICanvasRenderingContextWebGL.getUniform',
37417:     '-nsICanvasRenderingContextWebGL.getVertexAttrib',
37417:     '-nsICanvasRenderingContextWebGL.readPixels',
37417:     '-nsICanvasRenderingContextWebGL.getShaderParameter',
17092:     ]
17092: 
17092: # Most interfaces can be found by searching the includePath; to find
17092: # nsIDOMEvent, for example, just look for nsIDOMEvent.idl.  But IDL filenames
17092: # for very long interface names are slightly abbreviated, and many interfaces
17092: # don't have their own files, just for extra wackiness.  So qsgen.py needs
17092: # a little help.
17092: #
17092: irregularFilenames = {
17092:     # abbreviations
17092:     'nsIDOMNSHTMLOptionCollection': 'nsIDOMNSHTMLOptionCollectn',
17092:     'nsIDOMHTMLTableSectionElement': 'nsIDOMHTMLTableSectionElem',
17092: 
17092:     # stowaways
19260:     'nsIDOMTextMetrics': 'nsIDOMCanvasRenderingContext2D',
37417:     'nsIDOMCanvasGradient': 'nsIDOMCanvasRenderingContext2D',
37417:     'nsIDOMCanvasPattern': 'nsIDOMCanvasRenderingContext2D',
17092:     'nsIXPointerResult': 'nsIXPointer',
37417: 
37417:     'nsIWebGLTexture': 'nsICanvasRenderingContextWebGL',
37417:     'nsIWebGLBuffer': 'nsICanvasRenderingContextWebGL',
37417:     'nsIWebGLProgram': 'nsICanvasRenderingContextWebGL',
37417:     'nsIWebGLShader': 'nsICanvasRenderingContextWebGL',
37417:     'nsIWebGLShaderArray': 'nsICanvasRenderingContextWebGL',
37417:     'nsIWebGLFramebuffer': 'nsICanvasRenderingContextWebGL',
37417:     'nsIWebGLRenderbuffer': 'nsICanvasRenderingContextWebGL',
37417:     'nsIWebGLActiveInfo': 'nsICanvasRenderingContextWebGL',
17092:     }
23258: 
23258: customIncludes = [
23258:     'nsINode.h',
23258:     'nsIContent.h',
23258:     'nsIDocument.h',
32848:     'nsINodeList.h',
37417:     'nsCSSPropertiesQS.h',
41912:     'nsGenericDOMDataNode.h',
41912:     'nsGenericElement.h',
40491:     'nsDOMQS.h',
37417:     ]
37417: 
37417: customQuickStubs = [
38908:     'CustomQS_WebGL.h',
38908:     'CustomQS_Canvas2D.h'
38908:     ]
38908: 
38908: customReturnInterfaces = [
38908:     'nsIDOMCanvasPattern',
38908:     'nsIDOMCanvasGradient',
23258:     ]
23258: 
23258: nsIDOMNode_GetChildNodes_customMethodCallCode = """
23258:     nsIDOMNodeList* result = self->GetChildNodesList();
31979:     rv = result ? NS_OK : NS_ERROR_OUT_OF_MEMORY;
31979: """
31979: 
31979: nsIDOMHTMLDocument_Write_customMethodCallCode = """
31979:     nsAString &str = arg0;
31979:     for (uintN i = 1; i < argc; ++i) {
33019:       xpc_qsDOMString next_arg(cx, argv[i], &argv[i],
33019:                                xpc_qsDOMString::eStringify,
33019:                                xpc_qsDOMString::eStringify);
31979:       if (!next_arg.IsValid())
31979:         return JS_FALSE;
31979: 
31979:       str.Append(next_arg);
31979:     }
31979: 
31979:     rv = self->%s(arg0);
23258: """
23258: 
34779: nsIDOMStorage_Clear_customMethodCallCode = """
41911:     rv = self->Clear();
34779:     if (NS_SUCCEEDED(rv))
34779:         JS_ClearScope(cx, obj);
34779: """
34779: 
32848: CSS2Properties_ = {
32848:     'thisType': 'nsICSSDeclaration',
32848:     'additionalArguments': 'const nsCSSProperty prop',
32848:     'additionalArgumentValues': 'QS_CSS_PROP_%s',
32848:     'getter_code': '    nsString result;\n' + 
32848:                    '    rv = self->GetPropertyValue(prop, result);',
32848:     'setter_code': '    rv = self->SetPropertyValue(prop, arg0);',
32848:     'canFail': True
32848: }
32848: 
37417: CUSTOM_QS = {
37417:     'skipgen': True,
37417:     'traceable': False
37417: }
37417: 
37417: CUSTOM_QS_TN = {
37417:     'skipgen': True,
37417:     'traceable': True
37417: }
37417: 
23258: customMethodCalls = {
23258:     'nsIDOMNode_GetNextSibling': {
23258:         'thisType': 'nsINode',
41911:         'code': '    nsINode *result = self->GetSibling(1);',
41911:         'canFail': False
23258:         },
23258:     'nsIDOMNode_GetFirstChild': {
23258:         'thisType': 'nsINode',
41911:         'code': '    nsINode *result = self->GetChildAt(0);',
41911:         'canFail': False
23258:         },
23258:     'nsIDOMNode_GetChildNodes': {
23258:         'thisType': 'nsINode',
41911:         'code': nsIDOMNode_GetChildNodes_customMethodCallCode
23258:         },
23258:     'nsIDOMNode_GetPreviousSibling': {
23258:         'thisType': 'nsINode',
41911:         'code': '    nsINode *result = self->GetSibling(-1);',
41911:         'canFail': False
23258:         },
23258:     'nsIDOMNode_GetLastChild': {
23258:         'thisType': 'nsINode',
41911:         'code': '    nsINode *result = self->GetLastChild();',
41911:         'canFail': False
23258:         },
23258:     'nsIDOMNode_GetOwnerDocument': {
23258:         'thisType': 'nsINode',
41911:         'code': '    nsIDocument *result = self->GetOwnerDocument();',
41911:         'canFail': False
23258:         },
23258:     'nsIDOMNode_GetParentNode': {
23258:         'thisType': 'nsINode',
41911:         'code': '    nsINode *result = self->GetNodeParent();',
41911:         'canFail': False
23258:         },
40488:     'nsIDOMNode_InsertBefore': {
40488:         'thisType': 'nsINode',
40488:         'arg0Type': 'nsINode',
40488:         'arg1Type': 'nsINode',
40488:         'code': '    nsINode *result = self->InsertBefore(arg0, arg1, &rv);\n'
40488:                 '    if(NS_FAILED(rv))\n'
41911:                 '        result = nsnull;'
40488:         },
40488:     'nsIDOMNode_ReplaceChild': {
40488:         'thisType': 'nsINode',
40488:         'arg0Type': 'nsINode',
40488:         'arg1Type': 'nsINode',
40488:         'code': '    nsINode *result = self->ReplaceChild(arg0, arg1, &rv);\n'
40488:                 '    if(NS_FAILED(rv))\n'
41911:                 '        result = nsnull;'
40488:         },
40488:     'nsIDOMNode_RemoveChild': {
40488:         'thisType': 'nsINode',
40488:         'arg0Type': 'nsINode',
40488:         'code': '    rv = self->RemoveChild(arg0);\n'
41911:                 '    nsINode *result = NS_SUCCEEDED(rv) ? arg0 : nsnull;'
40488:         },
40488:     'nsIDOMNode_AppendChild': {
40488:         'thisType': 'nsINode',
40488:         'arg0Type': 'nsINode',
40488:         'code': '    nsINode *result = self->AppendChild(arg0, &rv);\n'
40488:                 '    if(NS_FAILED(rv))\n'
41911:                 '        result = nsnull;'
40488:         },
23258:     'nsIDOMNodeList_Item': {
23258:         'thisType': 'nsINodeList',
41911:         'code': '    nsINode *result = self->GetNodeAt(arg0);',
41911:         'canFail': False
31979:         },
31979:     'nsIDOMHTMLDocument_Write': {
41911:         'code': nsIDOMHTMLDocument_Write_customMethodCallCode % 'Write'
31979:         },
31979:     'nsIDOMHTMLDocument_Writeln': {
41911:         'code': nsIDOMHTMLDocument_Write_customMethodCallCode % 'Writeln'
32848:         },
34779:     'nsIDOMStorage_Clear': {
34779:         'code': nsIDOMStorage_Clear_customMethodCallCode
34779:         },
38908:     'nsIDOMCanvasRenderingContext2D_StrokeStyle': { 'skipgen': True },
38908:     'nsIDOMCanvasRenderingContext2D_StrokeStyle': { 'skipgen': True },
38908:     'nsIDOMCanvasRenderingContext2D_FillStyle': { 'skipgen': True },
38908:     'nsIDOMCanvasRenderingContext2D_FillStyle': { 'skipgen': True },
32848:     'nsIDOMCSS2Properties_': CSS2Properties_,
37417:     'nsIDOMNSCSS2Properties_': CSS2Properties_,
41912:     'nsIDOMNSElement_GetClientRects': {
41912:         'thisType': 'nsGenericElement'
41912:         },
41912:     'nsIDOMNSElement_GetBoundingClientRect': {
41912:         'thisType': 'nsGenericElement'
41912:         },
41912:     'nsIDOMNSElement_GetElementsByClassName': {
41912:         'thisType': 'nsGenericElement'
41912:         },
41912:     'nsIDOMNSElement_GetScrollWidth': {
41912:         'thisType': 'nsGenericElement',
41912:         'code': '    PRInt32 result = self->GetScrollWidth();',
41912:         'canFail': False
41912:         },
41912:     'nsIDOMNSElement_GetClientTop': {
41912:         'thisType': 'nsGenericElement',
41912:         'code': '    PRInt32 result = self->GetClientTop();',
41912:         'canFail': False
41912:         },
41912:     'nsIDOMNSElement_SetClientTop': {
41912:         'thisType': 'nsGenericElement',
41912:         'canFail': False
41912:         },
41912:     'nsIDOMNSElement_GetClientLeft': {
41912:         'thisType': 'nsGenericElement',
41912:         'code': '    PRInt32 result = self->GetClientLeft();',
41912:         'canFail': False
41912:         },
41912:     'nsIDOMNSElement_SetClientLeft': {
41912:         'thisType': 'nsGenericElement',
41912:         'canFail': False
41912:         },
41912:     'nsIDOMNSElement_GetClientHeight': {
41912:         'thisType': 'nsGenericElement',
41912:         'code': '    PRInt32 result = self->GetClientHeight();',
41912:         'canFail': False
41912:         },
41912:     'nsIDOMNSElement_GetClientWidth': {
41912:         'thisType': 'nsGenericElement',
41912:         'code': '    PRInt32 result = self->GetClientWidth();',
41912:         'canFail': False
41912:         },
41912:     'nsIDOMNSElement_MozMatchesSelector': {
41912:         'thisType': 'nsGenericElement',
41912:         'code': '    PRBool result = self->MozMatchesSelector(arg0);',
41912:         'canFail': False
41912:         },
41912:     'nsIDOM3Text_IsElementContentWhitespace': {
41912:         'thisType': 'nsGenericTextNode',
41912:         'code': '    PRBool result = self->IsElementContentWhitespace();',
41912:         'canFail': False
41912:         },
41912:     'nsIDOM3Text_ReplaceWholeText': {
41912:         'thisType': 'nsGenericTextNode',
41912:         'code': '    nsIContent* result = '
41912:                 'self->ReplaceWholeText(PromiseFlatString(arg0), &rv);'
41912:         },
41912:     'nsIDOM3Text_WholeText': {
41912:         'thisType': 'nsGenericTextNode'
41912:         },
41912:     'nsIDOMNodeSelector_QuerySelector': {
41912:         'thisType': 'nsINode',
41912:         'code': '    nsIContent* result = '
41912:                 'nsGenericElement::doQuerySelector(self, arg0, &rv);'
41912:         },
41912:     'nsIDOMNodeSelector_QuerySelectorAll': {
41912:         'thisType': 'nsINode',
41912:         'code': '    nsCOMPtr<nsIDOMNodeList> result;\n'
41912:                 '    rv = nsGenericElement::doQuerySelectorAll(self, '
41912:                 'arg0, getter_AddRefs(result));'
41912:         },
41912:     'nsIDOM3Node_GetBaseURI': {
41912:         'thisType': 'nsINode',
41912:         'canFail': False
41912:         },
41912:     'nsIDOM3Node_CompareDocumentPosition': {
41912:         'thisType': 'nsINode',
42132:         'arg0Type': 'nsINode'
41912:         },
41912:     'nsIDOM3Node_GetTextContent': {
41912:         'thisType': 'nsINode',
41912:         'canFail': False
41912:         },
41912:     'nsIDOM3Node_SetTextContent': {
41912:         'thisType': 'nsINode'
41912:         },
41912:     'nsIDOM3Node_IsSameNode': {
41912:         'thisType': 'nsINode',
41912:         'arg0Type': 'nsINode',
41912:         'code': '    PRBool result = self->IsSameNode(arg0);',
41912:         'canFail': False
41912:         },
41912:     'nsIDOM3Node_LookupPrefix': {
41912:         'thisType': 'nsINode',
41912:         'canFail': False
41912:         },
41912:     'nsIDOM3Node_IsDefaultNamespace': {
41912:         'thisType': 'nsINode',
41912:         'code': '    PRBool result = self->IsDefaultNamespace(arg0);',
41912:         'canFail': False
41912:         },
41912:     'nsIDOM3Node_LookupNamespaceURI': {
41912:         'thisType': 'nsINode',
41912:         'canFail': False
41912:         },
41912:     'nsIDOM3Node_IsEqualNode': {
41912:         'thisType': 'nsINode',
41912:         'arg0Type': 'nsINode',
41912:         'code': '    PRBool result = self->IsEqualNode(arg0);',
41912:         'canFail': False
41912:         },
41912:     'nsIDOM3Node_GetFeature': {
41912:         'thisType': 'nsINode'
41912:         },
41912:     'nsIDOM3Node_GetUserData': {
41912:         'thisType': 'nsINode',
41912:         'code': '    nsIVariant *result = self->GetUserData(arg0);',
41912:         'canFail': False
41912:         },
41912:     'nsIDOM3Node_SetUserData': {
41912:         'thisType': 'nsINode'
41912:         },
37417:     # WebGL
37417:     'nsICanvasRenderingContextWebGL_BufferData': CUSTOM_QS,
37417:     'nsICanvasRenderingContextWebGL_BufferSubData': CUSTOM_QS,
37417:     'nsICanvasRenderingContextWebGL_TexImage2D': CUSTOM_QS,
37417:     'nsICanvasRenderingContextWebGL_TexSubImage2D': CUSTOM_QS,
37417:     'nsICanvasRenderingContextWebGL_Uniform1iv': CUSTOM_QS_TN,
37417:     'nsICanvasRenderingContextWebGL_Uniform2iv': CUSTOM_QS_TN,
37417:     'nsICanvasRenderingContextWebGL_Uniform3iv': CUSTOM_QS_TN,
37417:     'nsICanvasRenderingContextWebGL_Uniform4iv': CUSTOM_QS_TN,
37417:     'nsICanvasRenderingContextWebGL_Uniform1fv': CUSTOM_QS_TN,
37417:     'nsICanvasRenderingContextWebGL_Uniform2fv': CUSTOM_QS_TN,
37417:     'nsICanvasRenderingContextWebGL_Uniform3fv': CUSTOM_QS_TN,
37417:     'nsICanvasRenderingContextWebGL_Uniform4fv': CUSTOM_QS_TN,
37417:     'nsICanvasRenderingContextWebGL_UniformMatrix2fv': CUSTOM_QS_TN,
37417:     'nsICanvasRenderingContextWebGL_UniformMatrix3fv': CUSTOM_QS_TN,
37417:     'nsICanvasRenderingContextWebGL_UniformMatrix4fv': CUSTOM_QS_TN,
37417:     'nsICanvasRenderingContextWebGL_VertexAttrib1fv': CUSTOM_QS,
37417:     'nsICanvasRenderingContextWebGL_VertexAttrib2fv': CUSTOM_QS,
37417:     'nsICanvasRenderingContextWebGL_VertexAttrib3fv': CUSTOM_QS,
38927:     'nsICanvasRenderingContextWebGL_VertexAttrib4fv': CUSTOM_QS,
38927:     # Canvas 2D
38927:     'nsIDOMCanvasRenderingContext2D_CreateImageData': CUSTOM_QS,
38927:     'nsIDOMCanvasRenderingContext2D_GetImageData': CUSTOM_QS,
38927:     'nsIDOMCanvasRenderingContext2D_PutImageData': CUSTOM_QS,
23258:     }
32848: 
