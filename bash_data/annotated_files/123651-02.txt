 31916: # -*- Mode: makefile -*-
 31916: #
 98983: # This Source Code Form is subject to the terms of the Mozilla Public
 98983: # License, v. 2.0. If a copy of the MPL was not distributed with this
 98983: # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 31916: 
107436: DEPTH		= @DEPTH@
 31916: topsrcdir	= @top_srcdir@
 31916: srcdir		= @srcdir@
 31916: VPATH		= @srcdir@
 31916: 
 31916: include $(DEPTH)/config/autoconf.mk
 31916: 
 31916: PROGRAM         = jsapi-tests$(BIN_SUFFIX)
 47400: 
 31916: CPPSRCS = \
 31916:   tests.cpp \
 31916:   selfTest.cpp \
 81393:   testAddPropertyPropcache.cpp \
110924:   testArrayBuffer.cpp \
 70319:   testArgumentsObject.cpp \
101216:   testBindCallable.cpp \
 58723:   testBug604087.cpp \
101216:   testCallNonGenericMethodOnProxy.cpp \
 75376:   testChromeBuffer.cpp \
 47595:   testClassGetter.cpp \
 55633:   testCloneScript.cpp \
 47439:   testConservativeGC.cpp \
 35082:   testContexts.cpp \
 75376:   testCustomIterator.cpp \
 35331:   testDebugger.cpp \
 54563:   testDeepFreeze.cpp \
 34312:   testDefineGetterSetterNonEnumerable.cpp \
 42405:   testDefineProperty.cpp \
 35473:   testExtendedEq.cpp \
 75376:   testExternalStrings.cpp \
 54563:   testFuncCallback.cpp \
 73059:   testFunctionProperties.cpp \
 77907:   testGCOutOfMemory.cpp \
 90853:   testOOM.cpp \
 56211:   testGetPropertyDefault.cpp \
 93238:   testHashTable.cpp \
 74600:   testIndexToString.cpp \
 34312:   testIntString.cpp \
 84760:   testIntTypesABI.cpp \
 70270:   testIntern.cpp \
 34312:   testLookup.cpp \
 64551:   testLooselyEqual.cpp \
 40293:   testNewObject.cpp \
 40896:   testOps.cpp \
 84691:   testOriginPrincipals.cpp \
 67923:   testParseJSON.cpp \
 31916:   testPropCache.cpp \
 70280:   testRegExp.cpp \
 64302:   testResolveRecursion.cpp \
 54563:   testSameValue.cpp \
 73768:   testScriptInfo.cpp \
 54563:   testScriptObject.cpp \
 60780:   testSetProperty.cpp \
123651:   testSourcePolicy.cpp \
 64383:   testStringBuffer.cpp \
 35076:   testTrap.cpp \
 95834:   testTypedArrays.cpp \
 57819:   testVersion.cpp \
 31916:   testXDR.cpp \
103915:   testProfileStrings.cpp \
106063:   testJSEvaluateScript.cpp \
109046:   testErrorCopying.cpp \
121515:   testEnclosingFunction.cpp \
 31916:   $(NULL)
 31916: 
 67937: # Disabled: an entirely unrelated test seems to cause this to fail.  Moreover,
 67937: # given the test's dependence on interactions between the compiler, the GC, and
 67937: # conservative stack scanning, the fix isn't obvious: more investigation
 67937: # needed.
 67937: #CPPSRCS += \
 67937: #  testRegExpInstanceProperties.cpp \
 67937: #  $(NULL)
 67937: 
 31916: DEFINES         += -DEXPORT_JS_API
 90070: # Building against js_static requires that we declare mfbt sybols "exported"
 90070: # on its behalf.
 90070: DEFINES         += -DIMPL_MFBT
 31916: 
104337: LIBS      = $(DEPTH)/$(LIB_PREFIX)js_static.$(LIB_SUFFIX) $(NSPR_LIBS) $(MOZ_ZLIB_LIBS)
 31916: 
 31916: LOCAL_INCLUDES += -I$(topsrcdir) -I..
 31916: 
122091: ifdef QEMU_EXE
122091: MOZ_POST_PROGRAM_COMMAND = $(topsrcdir)/build/qemu-wrap --qemu $(QEMU_EXE) --libdir $(CROSS_LIB)
122091: endif
122091: 
 31916: include $(topsrcdir)/config/rules.mk
 31916: 
 31916: check::
 31916: 	$(wildcard $(RUN_TEST_PROGRAM)) $(DIST)/bin/jsapi-tests$(BIN_SUFFIX)
