90222: <html xmlns="http://www.w3.org/1999/xhtml">
90222: <!--
90222: https://bugzilla.mozilla.org/show_bug.cgi?id=629200
90222: -->
90222: <head>
90222:   <title>Tests specific to SVGNumberList</title>
90222:   <script type="text/javascript" src="/tests/SimpleTest/SimpleTest.js"></script>
90222:   <script type="text/javascript" src="MutationEventChecker.js"></script>
90222:   <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css" />
90222: </head>
90222: <body>
90222: <a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=629200">Mozilla Bug 629200</a>
90222: <p id="display"></p>
90222: <div id="content" style="display:none;">
90222: <svg id="svg" xmlns="http://www.w3.org/2000/svg" width="100" height="100">
90222:   <text id="text" rotate="10 20 30">abc</text>
90222: </svg>
90222: </div>
90222: <pre id="test">
90222: <script class="testbody" type="text/javascript">
90222: <![CDATA[
90222: 
90222: SimpleTest.waitForExplicitFinish();
90222: 
90222: /*
90222: This file runs a series of SVGNumberList specific tests. Generic SVGXxxList
90222: tests can be found in test_SVGxxxList.xhtml. Anything that can be generalized
90222: to other list types belongs there.
90222: */
90222: 
90222: function run_tests()
90222: {
90222:   document.getElementById('svg').pauseAnimations();
90222: 
90222:   var text = document.getElementById("text");
90222:   var numbers = text.rotate.baseVal;
90222: 
90222:   is(numbers.numberOfItems, 3, 'Checking numberOfItems');
90222: 
90222:   // Test mutation events
90222:   // --- Initialization
90222:   eventChecker = new MutationEventChecker;
90222:   eventChecker.watchAttr(text, "rotate");
90222:   // -- Actual changes
90222:   eventChecker.expect("modify modify");
90222:   numbers[0].value = 15;
90222:   text.setAttribute("rotate", "17 20 30");
90222:   // -- Redundant changes
90222:   eventChecker.expect("");
90222:   numbers[0].value = 17;
90222:   numbers[1].value = 20;
90222:   text.setAttribute("rotate", "17 20 30");
91863:   // -- Attribute removal
91863:   eventChecker.expect("remove");
91863:   text.removeAttribute("rotate");
91863:   // -- Non-existent attribute removal
91863:   eventChecker.expect("");
91863:   text.removeAttribute("rotate");
91863:   text.removeAttributeNS(null, "rotate");
90222:   eventChecker.finish();
90222: 
90222:   SimpleTest.finish();
90222: }
90222: 
90222: window.addEventListener("load", run_tests, false);
90222: 
90222: ]]>
90222: </script>
90222: </pre>
90222: </body>
90222: </html>
