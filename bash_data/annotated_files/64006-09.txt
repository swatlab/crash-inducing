35133: <!DOCTYPE html>
35133: <html>
35133: <head>
35133:   <title>HTML ul/li element tests</title>
35133:   <link rel="stylesheet" type="text/css"
35133:         href="chrome://mochikit/content/tests/SimpleTest/test.css" />
35133: 
35133:   <script type="application/javascript"
35133:           src="chrome://mochikit/content/MochiKit/packed.js"></script>
35133:   <script type="application/javascript"
35133:           src="chrome://mochikit/content/tests/SimpleTest/SimpleTest.js"></script>
35133: 
35133:   <script type="application/javascript"
51856:           src="../common.js"></script>
35133:   <script type="application/javascript"
51856:           src="../role.js"></script>
35133: 
35133:   <script type="application/javascript">
35133:     function listItemTree(aBulletText, aName, aSubtree)
35133:     {
35133:       var obj = {
35133:         role: ROLE_LISTITEM,
35133:         children: [
35133:           {
35133:             role: ROLE_STATICTEXT,
35133:             name: aBulletText
35133:           },
35133:           {
35133:             role: ROLE_TEXT_LEAF,
35133:             name: aName
35133:           }
35133:         ]
35133:       };
35133: 
35133:       if (aSubtree)
35133:         obj.children.push(aSubtree);
35133: 
35133:       return obj;
35133:     }
35133: 
35133:     function doTest()
35133:     {
35133:       // list1
55876:       var discAccTree = {
35133:         role: ROLE_LIST,
35133:         children: [
64006:           new listItemTree(kDiscBulletText, "Oranges"),
64006:           new listItemTree(kDiscBulletText, "Apples"),
64006:           new listItemTree(kDiscBulletText, "Bananas")
35133:         ]
35133:       };
35133: 
55876:       testAccessibleTree("list1", discAccTree);
35133: 
35133:       // list2
55876:       var circleAccTree = {
55876:         role: ROLE_LIST,
55876:         children: [
64006:           new listItemTree(kCircleBulletText, "Oranges"),
64006:           new listItemTree(kCircleBulletText, "Apples"),
64006:           new listItemTree(kCircleBulletText, "Bananas")
55876:         ]
55876:       };
55876: 
55876:       testAccessibleTree("list2", circleAccTree);
55876: 
55876:       // list3
55876:       var squareAccTree = {
55876:         role: ROLE_LIST,
55876:         children: [
64006:           new listItemTree(kSquareBulletText, "Oranges"),
64006:           new listItemTree(kSquareBulletText, "Apples"),
64006:           new listItemTree(kSquareBulletText, "Bananas")
55876:         ]
55876:       };
55876: 
55876:       testAccessibleTree("list3", squareAccTree);
55876: 
55876:       // list4
55876:       var nestedAccTree = {
35133:         role: ROLE_LIST,
35133:         children: [
35133:           new listItemTree("1. ", "Oranges"),
35133:           new listItemTree("2. ", "Apples"),
55876:           new listItemTree("3. ", "Bananas", circleAccTree)
35133:         ]
35133:       };
35133: 
55876:       testAccessibleTree("list4", nestedAccTree);
35133: 
64006:       // dl list
64006:       var tree =
64006:         { LIST: [ // dl
64006:           { LISTITEM: [ // dt
64006:             { TEXT_LEAF: [] },
64006:           ] },
64006:           { PARAGRAPH: [ // dd
64006:             { TEXT_LEAF: [] }
64006:           ] },
64006:           { LISTITEM: [ // dt
64006:             { TEXT_LEAF: [] }
64006:           ] },
64006:           { PARAGRAPH: [ // dd
64006:             { TEXT_LEAF: [] }
64006:           ] }
64006:         ] };
64006: 
64006:       testAccessibleTree("list5", tree);
64006: 
64006:       // dl list inside ordered list
64006:       tree =
64006:         { LIST: [ // ol
64006:           { LISTITEM: [ // li
64006:             { STATICTEXT: [ ] },
64006:             { LIST: [ // dl
64006:               { LISTITEM: [ // dt
64006:                 { TEXT_LEAF: [] }
64006:               ] },
64006:               { PARAGRAPH: [ // dd
64006:                 { TEXT_LEAF: [] }
64006:               ] }
64006:             ] }
64006:           ] }
64006:         ] };
64006: 
64006:       testAccessibleTree("list6", tree);
64006: 
35133:       SimpleTest.finish();
35133:     }
35133: 
35133:     SimpleTest.waitForExplicitFinish();
35133:     addA11yLoadEvent(doTest);
35133:   </script>
35133: </head>
35133: <body>
35133: 
35133:   <a target="_blank"
35133:      title="Fix O(n^2) access to all the children of a container"
35133:      href="https://bugzilla.mozilla.org/show_bug.cgi?id=342045">
35133:     Mozilla Bug 342045
35133:   </a>
55876:   <a target="_blank"
55876:      title="Bullets of nested not ordered lists have one and the same character."
55876:      href="https://bugzilla.mozilla.org/show_bug.cgi?id=604587">
55876:     Mozilla Bug 604587
55876:   </a>
64006:   <a target="_blank"
64006:      title="Fix list bullets for DL list (crash [@ nsBulletFrame::GetListItemText])"
64006:      href="https://bugzilla.mozilla.org/show_bug.cgi?id=629114">
64006:     Mozilla Bug 629114
64006:   </a>
35133:   <p id="display"></p>
35133:   <div id="content" style="display: none"></div>
35133:   <pre id="test">
35133:   </pre>
35133: 
35133:   <ul id="list1">
55876:     <li id="l1_li1">Oranges</li>
55876:     <li id="l1_li2">Apples</li>
55876:     <li id="l1_li3">Bananas</li>
35133:   </ul>
35133: 
55876:   <ul id="list2" style="list-style-type: circle">
55876:     <li id="l2_li1">Oranges</li>
55876:     <li id="l2_li2">Apples</li>
55876:     <li id="l2_li3">Bananas</li>
55876:   </ul>
55876: 
55876:   <ul id="list3" style="list-style-type: square">
55876:     <li id="l3_li1">Oranges</li>
55876:     <li id="l3_li2">Apples</li>
55876:     <li id="l3_li3">Bananas</li>
55876:   </ul>
55876: 
55876:   <ol id="list4">
35133:     <li id="li4">Oranges</li>
35133:     <li id="li5">Apples</li>
35133:     <li id="li6">Bananas<ul>
35133:         <li id="n_li4">Oranges</li>
35133:         <li id="n_li5">Apples</li>
35133:         <li id="n_li6">Bananas</li>
35133:       </ul>
35133:     </li>
35133:   </ol>
64006: 
64006:   <dl id="list5">
64006:     <dt>item1</dt><dd>description</dd>
64006:     <dt>item2</td><dd>description</dd>
64006:   </dl>
64006: 
64006:   <ol id="list6">
64006:     <li>
64006:       <dl id="dl">
64006:         <dt>item1</dt><dd>description</dd>
64006:       </dl>
64006:     </li>
64006:   </ol>
35133: </body>
35133: </html>
