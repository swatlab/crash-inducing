72423: #
72423: # ***** BEGIN LICENSE BLOCK *****
72423: # Version: MPL 1.1/GPL 2.0/LGPL 2.1
72423: #
72423: # The contents of this file are subject to the Mozilla Public License Version
72423: # 1.1 (the "License"); you may not use this file except in compliance with
72423: # the License. You may obtain a copy of the License at
72423: # http://www.mozilla.org/MPL/
72423: #
72423: # Software distributed under the License is distributed on an "AS IS" basis,
72423: # WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
72423: # for the specific language governing rights and limitations under the
72423: # License.
72423: #
72423: # The Original Code is Mozilla Corporation code.
72423: #
72423: # The Initial Developer of the Original Code is Mozilla Foundation.
72423: # Portions created by the Initial Developer are Copyright (C) 2011
72423: # the Initial Developer. All Rights Reserved.
72423: #
72423: # Contributor(s):
72423: #   Bas Schouten <bschouten@mozilla.com>
72423: #
72423: # Alternatively, the contents of this file may be used under the terms of
72423: # either of the GNU General Public License Version 2 or later (the "GPL"),
72423: # or the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
72423: # in which case the provisions of the GPL or the LGPL are applicable instead
72423: # of those above. If you wish to allow use of your version of this file only
72423: # under the terms of either the GPL or the LGPL, and not to allow others to
72423: # use your version of this file under the terms of the MPL, indicate your
72423: # decision by deleting the provisions above and replace them with the notice
72423: # and other provisions required by the GPL or the LGPL. If you do not delete
72423: # the provisions above, a recipient may use your version of this file under
72423: # the terms of any one of the MPL, the GPL or the LGPL.
72423: #
72423: # ***** END LICENSE BLOCK *****
72423: 
72423: DEPTH		= ../..
72423: topsrcdir	= @top_srcdir@
72423: srcdir		= @srcdir@
72423: VPATH		= @srcdir@
72423: 
72423: include $(DEPTH)/config/autoconf.mk
72423: 
72423: MODULE		= gfx2d
72423: LIBRARY_NAME	= gfx2d
72423: LIBXUL_LIBRARY	= 1
72423: EXPORT_LIBRARY	= 1
72423: 
72423: EXPORTS_NAMESPACES = mozilla/gfx
72423: EXPORTS_mozilla/gfx	= \
72423:         2D.h \
72423:         BasePoint.h \
74751:         BasePoint3D.h \
77290:         BasePoint4D.h \
72423:         BaseMargin.h \
72423:         BaseRect.h \
72423:         BaseSize.h \
82453:         Blur.h \
81282:         PathHelpers.h \
72423:         Point.h \
72423:         Matrix.h \
72423:         Rect.h \
72423:         Types.h \
87514:         UserData.h \
72423: 	$(NULL)
72423: 
72423: CPPSRCS	= \
72423: 	Factory.cpp \
72423:         Matrix.cpp \
72423:         DrawTargetCairo.cpp \
72423:         SourceSurfaceCairo.cpp \
87055:         PathCairo.cpp \
82453:         Blur.cpp \
87511:         ScaledFontBase.cpp \
72423:         $(NULL)
72423: 
87511: ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))
87511: CPPSRCS	+= \
87511: 	   SourceSurfaceCG.cpp \
87511: 	   DrawTargetCG.cpp \
87511: 	   PathCG.cpp \
87511: 	   $(NULL)
87511: endif
81281: 
72423: DEFINES += -DMOZ_GFX -DUSE_CAIRO
72423: 
84535: ifdef MOZ_ENABLE_SKIA
81281: CPPSRCS	+= \
81281:         SourceSurfaceSkia.cpp \
81281:         DrawTargetSkia.cpp \
81281:         PathSkia.cpp \
90013:         ScaledFontFreetype.cpp
84535:         $(NULL)
84535: 
84535: DEFINES += -DUSE_SKIA
84535: 
84535: endif
84535: 
84535: ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))
84535: ifdef MOZ_ENABLE_SKIA
84535: CPPSRCS += \
81281:         ScaledFontMac.cpp \
81281:         $(NULL)
84535: 
84535: endif
81281: endif
81281: 
81281: ifeq (android,$(MOZ_WIDGET_TOOLKIT))
84535: DEFINES += -DSK_BUILD_FOR_ANDROID_NDK
81281: endif
81281: 
81281: DEFINES += -DSK_A32_SHIFT=24 -DSK_R32_SHIFT=16 -DSK_G32_SHIFT=8 -DSK_B32_SHIFT=0
81281: 
72423: ifdef MOZ_DEBUG
72423: DEFINES += -DGFX_LOG_DEBUG -DGFX_LOG_WARNING
72423: endif
72423: 
72423: ifeq ($(MOZ_WIDGET_TOOLKIT),windows)
72423: CPPSRCS	+= \
72423:         DrawTargetD2D.cpp \
72423:         SourceSurfaceD2D.cpp \
72423:         SourceSurfaceD2DTarget.cpp \
72423:         PathD2D.cpp \
72423:         ScaledFontDWrite.cpp \
84535:         $(NULL)
84535: DEFINES += -DWIN32
84535: 
84535: ifdef MOZ_ENABLE_SKIA
84535: CPPSRCS += \
82414:         ScaledFontWin.cpp \
72423:         $(NULL)
84535: endif
72423: endif
72423: 
72423: #ifeq ($(MOZ_WIDGET_TOOLKIT),cocoa)
72423: #CPPSRCS	+= \
72423: #        DrawTargetCG.cpp \
72423: #        SourceSurfaceCG.cpp \
72423: #	$(NULL)
72423: #
72423: ## Always link with OpenGL/AGL
72423: #EXTRA_DSO_LDOPTS += -framework OpenGL -framework AGL -framework QuickTime -framework AppKit -framework QuartzCore
72423: #endif
72423: 
72512: include $(topsrcdir)/config/rules.mk
72423: 
72512: CXXFLAGS += $(MOZ_CAIRO_CFLAGS)
