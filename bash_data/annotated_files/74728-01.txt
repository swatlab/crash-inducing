    1: #
    1: # ***** BEGIN LICENSE BLOCK *****
    1: # Version: MPL 1.1/GPL 2.0/LGPL 2.1
    1: #
    1: # The contents of this file are subject to the Mozilla Public License Version
    1: # 1.1 (the "License"); you may not use this file except in compliance with
    1: # the License. You may obtain a copy of the License at
    1: # http://www.mozilla.org/MPL/
    1: #
    1: # Software distributed under the License is distributed on an "AS IS" basis,
    1: # WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
    1: # for the specific language governing rights and limitations under the
    1: # License.
    1: #
    1: # The Original Code is mozilla.org code.
    1: #
    1: # The Initial Developer of the Original Code is
    1: # Netscape Communications Corporation.
    1: # Portions created by the Initial Developer are Copyright (C) 1998
    1: # the Initial Developer. All Rights Reserved.
    1: #
    1: # Contributor(s):
    1: #
    1: # Alternatively, the contents of this file may be used under the terms of
    1: # either the GNU General Public License Version 2 or later (the "GPL"), or
    1: # the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
    1: # in which case the provisions of the GPL or the LGPL are applicable instead
    1: # of those above. If you wish to allow use of your version of this file only
    1: # under the terms of either the GPL or the LGPL, and not to allow others to
    1: # use your version of this file under the terms of the MPL, indicate your
    1: # decision by deleting the provisions above and replace them with the notice
    1: # and other provisions required by the GPL or the LGPL. If you do not delete
    1: # the provisions above, a recipient may use your version of this file under
    1: # the terms of any one of the MPL, the GPL or the LGPL.
    1: #
    1: # ***** END LICENSE BLOCK *****
    1: 
    1: DEPTH = ../../..
    1: topsrcdir = @top_srcdir@
    1: srcdir = @srcdir@
    1: VPATH = @srcdir@
63497: 
    1: include $(DEPTH)/config/autoconf.mk
63497: 
74728: ifdef ENABLE_TESTS
74728: TOOL_DIRS += test
74728: endif
74728: 
63497: MODULE = feeds
63497: LIBRARY_NAME = feed_s
63497: MOZILLA_INTERNAL_API = 1
63497: FORCE_STATIC_LIB = 1
63497: LIBXUL_LIBRARY = 1
63497: 
63497: XPIDLSRCS = \
63497:   nsIFeed.idl \
63497:   nsIFeedContainer.idl \
63497:   nsIFeedElementBase.idl \
63497:   nsIFeedEntry.idl \
63497:   nsIFeedGenerator.idl \
63497:   nsIFeedListener.idl \
63497:   nsIFeedPerson.idl \
63497:   nsIFeedProcessor.idl \
63497:   nsIFeedResult.idl \
63497:   nsIFeedTextConstruct.idl \
63497:   nsIScriptableUnescapeHTML.idl \
63497:   $(NULL)
63497: 
63497: CPPSRCS = \
63497:   nsScriptableUnescapeHTML.cpp \
63497:   $(NULL)
63497: 
63497: EXTRA_COMPONENTS = FeedProcessor.js FeedProcessor.manifest
63497: 
    1: include $(topsrcdir)/config/rules.mk
    1: 
    1: ABS_SRCDIR := $(shell cd $(srcdir) && pwd)
    1: ifeq ($(OS_ARCH),WINNT)
    1: 
    1: ABS_DEPTH := $(shell cd $(DEPTH) && pwd)
    1: 
    1: check::
69743: 	cd $(srcdir)/test; $(LIBXUL_DIST)/bin/xpcshell$(BIN_SUFFIX) shell.js 
    1: 
    1: else
    1: 
    1: check::
69743: 	$(RUN_TEST_PROGRAM) $(LIBXUL_DIST)/bin/xpcshell$(BIN_SUFFIX) $(srcdir)/test/shell.js $(ABS_SRCDIR)/test
    1: 
    1: endif # WINNT
