38120: 
38120: namespace mozilla {
38120: namespace _ipdltest {
38120: 
38120: rpc protocol PTestHangs {
38120: both:
38120:     rpc StackFrame();
38120: 
39262: parent:
39262:     async Nonce();
39262: 
38120: child:
39262:     async Start();
38120:     rpc Hang();
38120:     __delete__();
38120: 
38120: 
38120: state START:
39262:     send Start goto RACE;
39262: 
39262: state RACE:
39262:     recv Nonce goto RACE1;
39262:     call StackFrame goto RACE2;
39262: state RACE1:
38120:     call StackFrame goto FRAME2;
39262: state RACE2:
39262:     recv Nonce goto FRAME2;
38120: 
38120: // So as to test unwinding the RPC stack
38120: state FRAME2: answer StackFrame goto FRAME3;
38120: state FRAME3: call StackFrame goto FRAME4;
38120: state FRAME4: answer StackFrame goto HANG;
38120: state HANG:   call Hang goto DEATH;
38120: 
38120: state DEATH:
38120:     send __delete__;
38120: };
38120: 
38120: } // namespace _ipdltest
38120: } // namespace mozilla
