 81006: # 
 99753: # This Source Code Form is subject to the terms of the Mozilla Public
 99753: # License, v. 2.0. If a copy of the MPL was not distributed with this
 99753: # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 81006: 
 81006: DEPTH		= ../..
 81006: topsrcdir	= @top_srcdir@
 81006: srcdir		= @srcdir@
 81006: VPATH		= @srcdir@
 81006: 
 81006: include $(DEPTH)/config/autoconf.mk
 81006: 
 81006: MODULE		= skia
 81006: LIBRARY_NAME	= skia
 81006: LIBXUL_LIBRARY  = 1
 81006: EXPORT_LIBRARY  = 1
 81006: 
 81006: EXPORTS_NAMESPACES = skia
 81006: 
 81006: DEFINES += -DSK_A32_SHIFT=24 -DSK_R32_SHIFT=16 -DSK_G32_SHIFT=8 -DSK_B32_SHIFT=0
 81006: 
 81006: LOCAL_INCLUDES += \
 81006: 	-I$(srcdir)/include/core \
 81006: 	-I$(srcdir)/include/config \
 81006: 	-I$(srcdir)/include/ports \
 81006: 	-I$(srcdir)/src/core \
 81006: 	-I$(srcdir)/include/images \
 99651: 	-I$(srcdir)/include/utils \
 81006: 	-I$(srcdir)/include/utils/mac \
 82414: 	-I$(srcdir)/include/utils/win \
 81006: 	-I$(srcdir)/include/views \
 81006: 	-I$(srcdir)/include/effects \
 81006: 	$(NULL)
 81006: 
 81006: VPATH += \
 81006: 	$(srcdir)/src/core \
 81006: 	$(srcdir)/src/ports \
 81006: 	$(srcdir)/src/opts \
 81006: 	$(srcdir)/src/effects \
 88236: 	$(srcdir)/src/utils \
 99651: 	$(srcdir)/src/utils/mac \
 81006: 	$(NULL)
 81006: 
 81006: EXPORTS_skia = \
 81006: 	include/core/Sk64.h \
 99651: 	include/core/SkAdvancedTypefaceMetrics.h \
 81006: 	include/core/SkAutoKern.h \
 81006: 	include/core/SkBitmap.h \
 81006: 	include/core/SkBlitRow.h \
 81006: 	include/core/SkBlitter.h \
 81006: 	include/core/SkBounder.h \
 81006: 	include/core/SkBuffer.h \
 81006: 	include/core/SkCanvas.h \
 81006: 	include/core/SkChunkAlloc.h \
 81006: 	include/core/SkClipStack.h \
 81006: 	include/core/SkColor.h \
 81006: 	include/core/SkColorFilter.h \
 81006: 	include/core/SkColorPriv.h \
 81006: 	include/core/SkColorShader.h \
 81006: 	include/core/SkComposeShader.h \
 81006: 	include/core/SkData.h \
 81006: 	include/core/SkDeque.h \
 81006: 	include/core/SkDescriptor.h \
 81006: 	include/core/SkDevice.h \
 99651: 	include/core/SkDeviceProfile.h \
 81006: 	include/core/SkDither.h \
 81006: 	include/core/SkDraw.h \
 81006: 	include/core/SkDrawFilter.h \
 81006: 	include/core/SkDrawLooper.h \
 81006: 	include/core/SkEdgeClipper.h \
 81006: 	include/core/SkEmptyShader.h \
 81006: 	include/core/SkEndian.h \
 81006: 	include/core/SkFDot6.h \
 81006: 	include/core/SkFixed.h \
 81006: 	include/core/SkFlattenable.h \
 81006: 	include/core/SkFloatBits.h \
 81006: 	include/core/SkFloatingPoint.h \
 81006: 	include/core/SkFontHost.h \
 81006: 	include/core/SkGeometry.h \
 81006: 	include/core/SkGlobals.h \
 81006: 	include/core/SkGraphics.h \
 81006: 	include/core/SkLineClipper.h \
 81006: 	include/core/SkMMapStream.h \
 81006: 	include/core/SkMallocPixelRef.h \
 81006: 	include/core/SkMask.h \
 81006: 	include/core/SkMaskFilter.h \
 81006: 	include/core/SkMath.h \
 81006: 	include/core/SkMatrix.h \
 81006: 	include/core/SkMetaData.h \
 81006: 	include/core/SkOSFile.h \
 99651: 	include/core/SkOrderedReadBuffer.h \
 99651: 	include/core/SkOrderedWriteBuffer.h \
 81006: 	include/core/SkPackBits.h \
 81006: 	include/core/SkPaint.h \
 81006: 	include/core/SkPath.h \
 81006: 	include/core/SkPathEffect.h \
 81006: 	include/core/SkPathMeasure.h \
 81006: 	include/core/SkPerspIter.h \
 81006: 	include/core/SkPicture.h \
 81006: 	include/core/SkPixelRef.h \
 81006: 	include/core/SkPoint.h \
 81006: 	include/core/SkPostConfig.h \
 81006: 	include/core/SkPreConfig.h \
 81006: 	include/core/SkPtrRecorder.h \
 81006: 	include/core/SkRandom.h \
 81006: 	include/core/SkRasterizer.h \
 81006: 	include/core/SkReader32.h \
 81006: 	include/core/SkRect.h \
 81006: 	include/core/SkRefCnt.h \
 81006: 	include/core/SkRefDict.h \
 81006: 	include/core/SkRegion.h \
 81006: 	include/core/SkRelay.h \
 81006: 	include/core/SkScalar.h \
 81006: 	include/core/SkScalarCompare.h \
 81006: 	include/core/SkScalerContext.h \
 81006: 	include/core/SkScan.h \
 81006: 	include/core/SkShader.h \
 81006: 	include/core/SkShape.h \
 81006: 	include/core/SkSize.h \
 81006: 	include/core/SkStream.h \
 81006: 	include/core/SkString.h \
 81006: 	include/core/SkStroke.h \
 81006: 	include/core/SkTDArray.h \
 81006: 	include/core/SkTDStack.h \
 81006: 	include/core/SkTDict.h \
 81006: 	include/core/SkTLazy.h \
 81006: 	include/core/SkTRegistry.h \
 81006: 	include/core/SkTScopedPtr.h \
 81006: 	include/core/SkTSearch.h \
 81006: 	include/core/SkTemplates.h \
 81006: 	include/core/SkThread.h \
 81006: 	include/core/SkThread_platform.h \
 81006: 	include/core/SkTime.h \
 81006: 	include/core/SkTrace.h \
 81006: 	include/core/SkTypeface.h \
 81006: 	include/core/SkTypes.h \
 81006: 	include/core/SkUnPreMultiply.h \
 81006: 	include/core/SkUnitMapper.h \
 81006: 	include/core/SkUtils.h \
 99651: 	include/core/SkWeakRefCnt.h \
 81006: 	include/core/SkWriter32.h \
 81006: 	include/core/SkXfermode.h \
 81006: 	include/config/SkUserConfig.h \
 99651: 	include/effects/SkDashPathEffect.h \
 81006: 	include/effects/SkGradientShader.h \
 81006: 	include/effects/SkBlurDrawLooper.h \
 81006: 	include/effects/SkBlurMaskFilter.h \
 81006: 	include/effects/SkLayerDrawLooper.h \
 81006: 	include/effects/SkLayerRasterizer.h \
 99651: 	include/effects/SkMorphologyImageFilter.h \
 99651: 	include/utils/SkDeferredCanvas.h \
 99651: 	include/views/SkTextBox.h \
 81006: 	$(NULL)
 81006: 
 81006: DEFINES += -DUSE_SKIA
 81006: 
 81006: CPPSRCS = \
 81006: 	Sk64.cpp \
 81006: 	SkAAClip.cpp \
 81006: 	SkAdvancedTypefaceMetrics.cpp \
 81006: 	SkAlphaRuns.cpp \
 99651: 	SkBase64.cpp \
 99651: 	SkBitSet.cpp \
 81006: 	SkBitmap.cpp \
 99651: 	SkBitmapCache.cpp \
 81006: 	SkBitmapProcShader.cpp \
 81006: 	SkBitmapProcState.cpp \
 81006: 	SkBitmapProcState_matrixProcs.cpp \
 81006: 	SkBitmapSampler.cpp \
 81006: 	SkBitmap_scroll.cpp \
 81006: 	SkBlitMask_D32.cpp \
 81006: 	SkBlitRow_D16.cpp \
 81006: 	SkBlitRow_D32.cpp \
 81006: 	SkBlitRow_D4444.cpp \
 81006: 	SkBlitter.cpp \
 81006: 	SkBlitter_4444.cpp \
 81006: 	SkBlitter_A1.cpp \
 81006: 	SkBlitter_A8.cpp \
 81006: 	SkBlitter_ARGB32.cpp \
 81006: 	SkBlitter_RGB16.cpp \
 81006: 	SkBlitter_Sprite.cpp \
 99651: 	SkBlurDrawLooper.cpp \
 99651: 	SkBlurMaskFilter.cpp \
 99651: 	SkBlurMask.cpp \
 81006: 	SkBuffer.cpp \
 81006: 	SkCanvas.cpp \
 81006: 	SkChunkAlloc.cpp \
 81006: 	SkClampRange.cpp \
 81006: 	SkClipStack.cpp \
 81006: 	SkColor.cpp \
 81006: 	SkColorFilter.cpp \
 99651: 	SkColorFilters.cpp \
 99651: 	SkColorMatrix.cpp \
 81006: 	SkColorTable.cpp \
 81006: 	SkComposeShader.cpp \
 81006: 	SkConcaveToTriangles.cpp \
 99651: 	SkConfig8888.cpp \
 81006: 	SkCordic.cpp \
 81006: 	SkCubicClipper.cpp \
 99651: 	SkDashPathEffect.cpp \
 81006: 	SkData.cpp \
 81006: 	SkDebug.cpp \
 99651: 	SkDeferredCanvas.cpp \
 81006: 	SkDeque.cpp \
 81006: 	SkDevice.cpp \
 99651: 	SkDeviceProfile.cpp \
 81006: 	SkDither.cpp \
 81006: 	SkDraw.cpp \
 81006: 	SkEdge.cpp \
 81006: 	SkEdgeBuilder.cpp \
 81006: 	SkEdgeClipper.cpp \
 81006: 	SkFilterProc.cpp \
 81006: 	SkFlattenable.cpp \
 81006: 	SkFloat.cpp \
 81006: 	SkFloatBits.cpp \
 81006: 	SkFontHost.cpp \
 81006: 	SkGeometry.cpp \
 81006: 	SkGlobals.cpp \
 99651: 	SkGlobals_global.cpp \
 81006: 	SkGlyphCache.cpp \
 99651: 	SkGradientShader.cpp \
 81006: 	SkGraphics.cpp \
 99651: 	SkLayerDrawLooper.cpp \
 99651: 	SkLayerRasterizer.cpp \
 81006: 	SkLineClipper.cpp \
 81006: 	SkMallocPixelRef.cpp \
 81006: 	SkMask.cpp \
 81006: 	SkMaskFilter.cpp \
 81006: 	SkMath.cpp \
 81006: 	SkMatrix.cpp \
 87139: 	SkMemory_malloc.cpp \
 81006: 	SkMetaData.cpp \
 99651: 	SkMorphologyImageFilter.cpp \
 99651: 	SkOrderedReadBuffer.cpp \
 99651: 	SkOrderedWriteBuffer.cpp \
 99651: 	SkOSFile_stdio.cpp \
 81006: 	SkPackBits.cpp \
 81006: 	SkPaint.cpp \
 81006: 	SkPath.cpp \
 81006: 	SkPathEffect.cpp \
 81006: 	SkPathHeap.cpp \
 81006: 	SkPathMeasure.cpp \
 81006: 	SkPicture.cpp \
 81006: 	SkPictureFlat.cpp \
 81006: 	SkPicturePlayback.cpp \
 81006: 	SkPictureRecord.cpp \
 81006: 	SkPixelRef.cpp \
 81006: 	SkPoint.cpp \
 81006: 	SkProcSpriteBlitter.cpp \
 81006: 	SkPtrRecorder.cpp \
 81006: 	SkQuadClipper.cpp \
 81006: 	SkRasterClip.cpp \
 81006: 	SkRasterizer.cpp \
 81006: 	SkRect.cpp \
 81006: 	SkRefDict.cpp \
 81006: 	SkRegion.cpp \
 81006: 	SkRegion_path.cpp \
 81006: 	SkRegion_rects.cpp \
 81006: 	SkScalar.cpp \
 81006: 	SkScalerContext.cpp \
 81006: 	SkScan.cpp \
 81006: 	SkScan_AntiPath.cpp \
 81006: 	SkScan_Antihair.cpp \
 81006: 	SkScan_Hairline.cpp \
 81006: 	SkScan_Path.cpp \
 81006: 	SkShader.cpp \
 81006: 	SkShape.cpp \
 81006: 	SkSpriteBlitter_ARGB32.cpp \
 81006: 	SkSpriteBlitter_RGB16.cpp \
 81006: 	SkStream.cpp \
 81006: 	SkString.cpp \
 81006: 	SkStroke.cpp \
 81006: 	SkStrokerPriv.cpp \
 99651: 	SkTLS.cpp \
 81006: 	SkTSearch.cpp \
 81006: 	SkTypeface.cpp \
 81006: 	SkTypefaceCache.cpp \
 81006: 	SkUnPreMultiply.cpp \
 81006: 	SkUtils.cpp \
 81006: 	SkWriter32.cpp \
 81006: 	SkXfermode.cpp \
 81006: 	$(NULL)
 81006: 
 81006: ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))
 81006: EXPORTS_skia += \
 81006: 	include/ports/SkTypeface_mac.h \
 81006: 	$(NULL)
 81006: CPPSRCS += \
 81006: 	SkFontHost_mac_coretext.cpp \
 99651: 	SkStream_mac.cpp \
 82414: 	SkTime_Unix.cpp \
 81006: 	$(NULL)
 81006: endif
 81006: 
 81006: ifeq (android,$(MOZ_WIDGET_TOOLKIT))
 81006: CPPSRCS += \
 94316: 	SkDebug_android.cpp \
 99659: 	SkFontHost_android_old.cpp \
 99659: 	SkFontHost_gamma.cpp \
 99659: 	SkFontHost_FreeType.cpp \
 99659: 	SkFontHost_tables.cpp \
 82414: 	SkMMapStream.cpp \
 82414: 	SkTime_Unix.cpp \
 99651: 	SkThread_pthread.cpp \
 81006: 	$(NULL)
 81006: 
 81006: DEFINES += -DSK_BUILD_FOR_ANDROID_NDK
 81006: OS_CXXFLAGS += $(CAIRO_FT_CFLAGS)
 94316: else
 94316: CPPSRCS += \
 94316: 	SkDebug_stdio.cpp \
 99651: 	SkThread_none.cpp \
 94316: 	$(NULL)
 81006: endif
 81006: 
 88236: ifeq (gtk2,$(MOZ_WIDGET_TOOLKIT))
 88236: CPPSRCS += \
 88236: 	SkFontHost_FreeType.cpp \
 88607: 	SkFontHost_gamma_none.cpp \
 88236: 	SkFontHost_linux.cpp \
 99651: 	SkFontHost_tables.cpp \
 88236: 	SkTime_Unix.cpp \
 88236: 	SkMMapStream.cpp \
 88236: 	SkOSFile.cpp \
 88236: 	$(NULL)
 88236: 
 88236: OS_CXXFLAGS += $(MOZ_PANGO_CFLAGS)
 88236: endif
 88236: 
 93811: ifeq (qt,$(MOZ_WIDGET_TOOLKIT))
 93811: CPPSRCS += \
 93811: 	SkFontHost_FreeType.cpp \
 93811: 	SkFontHost_gamma_none.cpp \
 99651: 	SkFontHost_tables.cpp \
 93811: 	SkMMapStream.cpp \
 93811: 	SkOSFile.cpp \
 93811: 	$(NULL)
 93811: ifeq (Linux,$(OS_TARGET))
 93811: CPPSRCS += \
 93811: 	SkFontHost_linux.cpp \
 99651: 	SkFontHost_tables.cpp \
 93811: 	SkTime_Unix.cpp \
 93811: 	$(NULL)
 93811: endif
 93811: OS_CXXFLAGS += $(MOZ_PANGO_CFLAGS)
 93811: endif
 93811: 
 82414: ifeq (windows,$(MOZ_WIDGET_TOOLKIT))
 82414: EXPORTS_skia += \
 82414: 	include/config/sk_stdint.h \
 82414: 	include/ports/SkTypeface_win.h \
 82414: 	$(NULL)
 82414: CPPSRCS += \
 82414: 	SkFontHost_win.cpp \
 87689: 	SkFontHost_sandbox_none.cpp \
 82414: 	SkTime_win.cpp \
 86204: 	$(NULL)
 86204: endif
 86204: 
 86204: ifneq (,$(INTEL_ARCHITECTURE))
 86204: CPPSRCS += \
 82414: 	SkBitmapProcState_opts_SSE2.cpp \
 99651: 	SkBlitRect_opts_SSE2.cpp \
 82414: 	SkBlitRow_opts_SSE2.cpp \
 82414: 	SkUtils_opts_SSE2.cpp \
 82414: 	opts_check_SSE2.cpp \
 82414: 	$(NULL)
100095: ifdef HAVE_COMPILER_FLAG_MSSSE3
100095: DEFINES += -DSK_BUILD_SSSE3
100095: CPPSRCS += SkBitmapProcState_opts_SSSE3.cpp
100095: endif
 86204: else
 86204: ifeq ($(CPU_ARCH)_$(GNU_CC),arm_1)
 86204: CPPSRCS += \
 86204: 	SkBitmapProcState_opts_arm.cpp \
 86204: 	SkBlitRow_opts_arm.cpp \
 86204: 	opts_check_arm.cpp \
 86204: 	$(NULL)
 86204: SSRCS += memset.arm.S
 86204: else
 86204: CPPSRCS += \
 86204: 	SkBitmapProcState_opts_none.cpp \
 86204: 	SkBlitRow_opts_none.cpp \
 86204: 	SkUtils_opts_none.cpp \
 86204: 	$(NULL)
 86204: endif
 82414: endif
 82414: 
 81006: include $(topsrcdir)/config/rules.mk
 82995: 
 82995: ifneq (,$(INTEL_ARCHITECTURE))
 82995: ifdef GNU_CC
 82995: SkBitmapProcState_opts_SSE2.$(OBJ_SUFFIX): CXXFLAGS+=-msse2
 99651: SkBitmapProcState_opts_SSSE3.$(OBJ_SUFFIX): CXXFLAGS+=-mssse3
 82995: SkBlitRow_opts_SSE2.$(OBJ_SUFFIX): CXXFLAGS+=-msse2
 99651: SkBlitRect_opts_SSE2.$(OBJ_SUFFIX): CXXFLAGS+=-msse2
 82995: SkUtils_opts_SSE2.$(OBJ_SUFFIX): CXXFLAGS+=-msse2
 82995: endif
 82995: endif
