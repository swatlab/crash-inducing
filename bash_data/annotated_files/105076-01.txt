 94512: # This Source Code Form is subject to the terms of the Mozilla Public
 94512: # License, v. 2.0. If a copy of the MPL was not distributed with this file,
 94512: # You can obtain one at http://mozilla.org/MPL/2.0/.
 94512: 
 94512: DEPTH = ../../..
 94512: topsrcdir = @top_srcdir@
 94512: srcdir = @srcdir@
 94512: VPATH = @srcdir@
 94512: relativesrcdir = dom/bindings/test
 94512: 
 99235: MODULE           = dom
 99235: LIBRARY_NAME     = dombindings_test_s
 99235: LIBXUL_LIBRARY   = 1
 99235: FORCE_STATIC_LIB = 1
 99235: # Do NOT export this library.  We don't actually want our test code
 99235: # being added to libxul or anything.
 99235: 
 94512: include $(DEPTH)/config/autoconf.mk
 99235: 
 99235: # Need this to find all our DOM source files.
 99235: include $(topsrcdir)/dom/dom-config.mk
 99235: 
 99235: # And need this for $(test_webidl_files)
 99235: include $(topsrcdir)/dom/webidl/WebIDL.mk
 99235: 
 99235: # But the webidl actually lives in our parent dir
 99235: test_webidl_files := $(addprefix ../,$(test_webidl_files))
 99235: 
 99235: CPPSRCS := $(subst .webidl,Binding.cpp,$(test_webidl_files))
 99235: 
 99235: LOCAL_INCLUDES += \
 99235:   -I$(topsrcdir)/js/xpconnect/src \
 99235:   -I$(topsrcdir)/js/xpconnect/wrappers \
101625:   -I$(topsrcdir)/dom/bindings \
 99235:   $(NULL)
 99235: 
 94512: 
 99235: # If you change bindinggen_dependencies here, change it in
 99235: # dom/bindings/Makefile.in too.  But note that we include ../Makefile
 99235: # here manually, since $(GLOBAL_DEPS) won't cover it.
 99235: bindinggen_dependencies := \
 99235:   ../BindingGen.py \
 99235:   ../Bindings.conf \
 99235:   ../Configuration.py \
 99235:   ../Codegen.py \
101718:   ../parser/WebIDL.py \
 99235:   ../ParserResults.pkl \
 99235:   ../Makefile \
 99235:   $(GLOBAL_DEPS) \
 99235:   $(NULL)
 99235: 
 99235: $(CPPSRCS): ../%Binding.cpp: $(bindinggen_dependencies) \
 99235:                              ../%.webidl \
 99235:                              $(NULL)
 99235: 	$(MAKE) -C .. $*Binding.h
 99235: 	$(MAKE) -C .. $*Binding.cpp
 99235: 
104017: MOCHITEST_FILES = \
102418:   test_enums.html \
102929:   test_integers.html \
 97507:   test_interfaceToString.html \
 94512:   test_lookupGetter.html \
 97423:   test_InstanceOf.html \
 97506:   test_traceProtos.html \
104818:   test_sequence_wrapping.html \
105076:   file_bug775543.html \
105076:   $(NULL)
105076: 
105076: MOCHITEST_CHROME_FILES = \
105076:   test_bug775543.html \
 94512:   $(NULL)
 94512: 
 99235: 
104017: include $(topsrcdir)/config/rules.mk
101616: 
101616: check::
103414: 	PYTHONDONTWRITEBYTECODE=1 $(PYTHON) $(topsrcdir)/config/pythonpath.py \
103414: 	  $(PLY_INCLUDE) $(srcdir)/../parser/runtests.py
102735: 
102735: check-interactive:
103414: 	PYTHONDONTWRITEBYTECODE=1 $(PYTHON) $(topsrcdir)/config/pythonpath.py \
103414: 	  $(PLY_INCLUDE) $(srcdir)/../parser/runtests.py -q
