31916: # -*- Mode: makefile -*-
31916: #
31916: # ***** BEGIN LICENSE BLOCK *****
31916: # Version: MPL 1.1/GPL 2.0/LGPL 2.1
31916: #
31916: # The contents of this file are subject to the Mozilla Public License Version
31916: # 1.1 (the "License"); you may not use this file except in compliance with
31916: # the License. You may obtain a copy of the License at
31916: # http://www.mozilla.org/MPL/
31916: #
31916: # Software distributed under the License is distributed on an "AS IS" basis,
31916: # WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
31916: # for the specific language governing rights and limitations under the
31916: # License.
31916: #
31916: # The Original Code is Spidermonkey build system.
31916: #
31916: # The Initial Developer of the Original Code is
31916: # The Mozilla Foundation.
31916: # Portions created by the Initial Developer are Copyright (C) 2009
31916: # the Initial Developer. All Rights Reserved.
31916: #
31916: # Contributor(s):
31916: #     Jason Orendorff
31916: #
31916: # Alternatively, the contents of this file may be used under the terms of
31916: # either of the GNU General Public License Version 2 or later (the "GPL"),
31916: # or the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
31916: # in which case the provisions of the GPL or the LGPL are applicable instead
31916: # of those above. If you wish to allow use of your version of this file only
31916: # under the terms of either the GPL or the LGPL, and not to allow others to
31916: # use your version of this file under the terms of the MPL, indicate your
31916: # decision by deleting the provisions above and replace them with the notice
31916: # and other provisions required by the GPL or the LGPL. If you do not delete
31916: # the provisions above, a recipient may use your version of this file under
31916: # the terms of any one of the MPL, the GPL or the LGPL.
31916: #
31916: # ***** END LICENSE BLOCK *****
31916: 
31916: DEPTH		= ..
31916: topsrcdir	= @top_srcdir@
31916: srcdir		= @srcdir@
31916: VPATH		= @srcdir@
31916: 
31916: include $(DEPTH)/config/autoconf.mk
31916: 
31916: PROGRAM         = jsapi-tests$(BIN_SUFFIX)
31916: CPPSRCS = \
31916:   tests.cpp \
31916:   selfTest.cpp \
35082:   testContexts.cpp \
35331:   testDebugger.cpp \
34312:   testDefineGetterSetterNonEnumerable.cpp \
34312:   testIntString.cpp \
34312:   testLookup.cpp \
31916:   testPropCache.cpp \
35076:   testTrap.cpp \
34312:   testSameValue.cpp \
31916:   testXDR.cpp \
31916:   $(NULL)
31916: 
31916: DEFINES         += -DEXPORT_JS_API
31916: 
31916: LIBS      = $(NSPR_LIBS) $(DEPTH)/$(LIB_PREFIX)js_static.$(LIB_SUFFIX)
31916: 
31916: LOCAL_INCLUDES += -I$(topsrcdir) -I..
31916: 
31916: ifdef _MSC_VER
31916: ifdef WINCE
31916: WIN32_EXE_LDFLAGS += -ENTRY:mainACRTStartup
31916: endif
31916: endif
31916: 
31916: include $(topsrcdir)/config/rules.mk
31916: 
31916: check::
31916: 	$(wildcard $(RUN_TEST_PROGRAM)) $(DIST)/bin/jsapi-tests$(BIN_SUFFIX)
