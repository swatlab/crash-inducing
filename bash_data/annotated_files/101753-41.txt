 84612: #
 98983: # This Source Code Form is subject to the terms of the Mozilla Public
 98983: # License, v. 2.0. If a copy of the MPL was not distributed with this
 98983: # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 84612: 
 84612: DEPTH		= ../..
 84612: topsrcdir	= @top_srcdir@
 84612: srcdir		= @srcdir@
 84612: VPATH		= @srcdir@
 84612: 
 84612: include $(DEPTH)/config/autoconf.mk
 84612: 
 84612: MODULE		= layout
 84612: LIBRARY_NAME	= gkmedias
 84612: EXPORT_LIBRARY	= $(DIST)/lib
 84612: ifeq (WINNT,$(OS_TARGET))
 84612: FORCE_SHARED_LIB = 1
 84612: endif
 84612: 
 97991: SHARED_LIBRARY_LIBS = \
 97991:     $(MOZ_OTS_LIBS) \
 97991:     $(QCMS_LIBS) \
 97991:     $(MOZ_HARFBUZZ_LIBS) \
 97991:     $(NULL)
 84612: 
 99513: ifdef MOZ_TREE_CAIRO
 99513: SHARED_LIBRARY_LIBS += $(MOZ_CAIRO_LIBS)
 99513: endif
 99513: 
 99513: ifdef MOZ_TREE_PIXMAN
 99513: SHARED_LIBRARY_LIBS += $(MOZ_PIXMAN_LIBS)
 99513: endif
 99513: 
 97381: ifdef MOZ_GRAPHITE
 97381: SHARED_LIBRARY_LIBS += $(MOZ_GRAPHITE_LIBS)
 97381: endif
 97381: 
 84612: ifdef MOZ_VORBIS
 84612: SHARED_LIBRARY_LIBS 	+= \
 84612: 	$(DEPTH)/media/libvorbis/lib/$(LIB_PREFIX)vorbis.$(LIB_SUFFIX) \
 84612: 	$(DEPTH)/media/libogg/src/$(LIB_PREFIX)ogg.$(LIB_SUFFIX) \
 84612: 	$(NULL)
 84612: endif
 84612: 
 84612: ifdef MOZ_TREMOR
 84612: SHARED_LIBRARY_LIBS	+= \
 84612: 	$(DEPTH)/media/libtremor/lib/$(LIB_PREFIX)tremor.$(LIB_SUFFIX) \
 84612: 	$(DEPTH)/media/libogg/src/$(LIB_PREFIX)ogg.$(LIB_SUFFIX) \
 84612: 	$(NULL)
 84612: endif
 84612: 
 84612: ifdef MOZ_OGG
 84612: SHARED_LIBRARY_LIBS 	+= \
 84612: 	$(DEPTH)/media/libtheora/lib/$(LIB_PREFIX)theora.$(LIB_SUFFIX) \
 84612: 	$(NULL)
 84612: endif
 84612: 
 97351: ifdef MOZ_OPUS
 97351: SHARED_LIBRARY_LIBS += \
 97351:   $(DEPTH)/media/libopus/$(LIB_PREFIX)opus.$(LIB_SUFFIX) \
 97351:   $(NULL)
 97351: endif
 97351: 
 84612: ifdef MOZ_WEBM
 84612: SHARED_LIBRARY_LIBS 	+= \
 84612: 	$(DEPTH)/media/libnestegg/src/$(LIB_PREFIX)nestegg.$(LIB_SUFFIX) \
 84612: 	$(NULL)
 84612: ifndef MOZ_NATIVE_LIBVPX
 84612: SHARED_LIBRARY_LIBS 	+= $(DEPTH)/media/libvpx/$(LIB_PREFIX)vpx.$(LIB_SUFFIX)
 84612: endif
 84612: endif
 84612: 
 84612: ifdef MOZ_SYDNEYAUDIO
 84612: SHARED_LIBRARY_LIBS 	+= \
 84612: 	$(DEPTH)/media/libsydneyaudio/src/$(LIB_PREFIX)sydneyaudio.$(LIB_SUFFIX) \
 84612: 	$(NULL)
 84612: endif
 84612: 
 98438: ifdef MOZ_SPEEX_RESAMPLER
 98438: SHARED_LIBRARY_LIBS 	+= \
 98438: 	$(DEPTH)/media/libspeex_resampler/src/$(LIB_PREFIX)speex_resampler.$(LIB_SUFFIX) \
 98438: 	$(NULL)
 98438: endif
 98438: 
 89287: ifdef MOZ_CUBEB
 89287: SHARED_LIBRARY_LIBS 	+= \
 89287: 	$(DEPTH)/media/libcubeb/src/$(LIB_PREFIX)cubeb.$(LIB_SUFFIX) \
 89287: 	$(NULL)
 89287: endif
 89287: 
 97388: ifndef MOZ_NATIVE_PNG
 97388: SHARED_LIBRARY_LIBS 	+= \
 97388: 	$(DEPTH)/media/libpng/$(LIB_PREFIX)mozpng.$(LIB_SUFFIX) \
 97388: 	$(NULL)
 97388: endif
 97388: 
 97384: ifndef MOZ_NATIVE_JPEG
 97384: SHARED_LIBRARY_LIBS 	+= \
 97384: 	$(DEPTH)/media/libjpeg/$(LIB_PREFIX)mozjpeg.$(LIB_SUFFIX) \
 97384: 	$(NULL)
 97384: endif
 97384: 
 84614: SHARED_LIBRARY_LIBS 	+= \
 84614: 	$(DEPTH)/gfx/angle/$(LIB_PREFIX)angle.$(LIB_SUFFIX) \
 97390: 	$(DEPTH)/parser/expat/lib/$(LIB_PREFIX)mozexpat_s.$(LIB_SUFFIX) \
 84614: 	$(NULL)
 84614: 
 97521: SHARED_LIBRARY_LIBS 	+= \
 97521: 	$(DEPTH)/gfx/2d/$(LIB_PREFIX)gfx2d.$(LIB_SUFFIX) \
 97521: 	$(NULL)
 97521:   
 99163: ifdef MOZ_ENABLE_SKIA
 99163: SHARED_LIBRARY_LIBS += $(MOZ_SKIA_LIBS)
 99163: endif
 99163: 
 87794: ifeq (WINNT,$(OS_TARGET))
 84614: EXTRA_DSO_LDOPTS = $(MOZALLOC_LIB) $(NSPR_LIBS)
101753: OS_LIBS += $(call EXPAND_LIBNAME,usp10)
 84614: 
 84927: # OTS uses uncompress2() from libz, so we need to link with this
 84927: ifdef MOZ_NATIVE_ZLIB
 84927: EXTRA_DSO_LDOPTS += $(ZLIB_LIBS)
 84927: else
 84927: EXTRA_DSO_LDOPTS += $(MOZ_ZLIB_LIBS)
 84927: endif
 84927: 
 84773: DEFFILE = symbols.def
 87794: endif
 84773: 
 87794: include $(topsrcdir)/config/rules.mk
 87794: 
 87794: ifeq (WINNT,$(OS_TARGET))
 84773: symbols.def: symbols.def.in
 84773: 	$(PYTHON) $(topsrcdir)/config/Preprocessor.py $(ACDEFINES) $< > $@
 95152: 
 97398: OS_LIBS += $(call EXPAND_LIBNAME, msimg32)
 97398: 
 95152: ifdef MOZ_CUBEB
 95152: OS_LIBS += $(call EXPAND_LIBNAME, winmm)
 84612: endif
 95152: 
 95152: endif
