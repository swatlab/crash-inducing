    1: #
    1: # ***** BEGIN LICENSE BLOCK *****
    1: # Version: MPL 1.1/GPL 2.0/LGPL 2.1
    1: #
    1: # The contents of this file are subject to the Mozilla Public License Version
    1: # 1.1 (the "License"); you may not use this file except in compliance with
    1: # the License. You may obtain a copy of the License at
    1: # http://www.mozilla.org/MPL/
    1: #
    1: # Software distributed under the License is distributed on an "AS IS" basis,
    1: # WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
    1: # for the specific language governing rights and limitations under the
    1: # License.
    1: #
    1: # The Original Code is mozilla.org code.
    1: #
    1: # The Initial Developer of the Original Code is
    1: # Mozilla Foundation.
    1: # Portions created by the Initial Developer are Copyright (C) 2007
    1: # the Initial Developer. All Rights Reserved.
    1: #
    1: # Contributor(s):
    1: #
    1: # Alternatively, the contents of this file may be used under the terms of
    1: # either of the GNU General Public License Version 2 or later (the "GPL"),
    1: # or the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
    1: # in which case the provisions of the GPL or the LGPL are applicable instead
    1: # of those above. If you wish to allow use of your version of this file only
    1: # under the terms of either the GPL or the LGPL, and not to allow others to
    1: # use your version of this file under the terms of the MPL, indicate your
    1: # decision by deleting the provisions above and replace them with the notice
    1: # and other provisions required by the GPL or the LGPL. If you do not delete
    1: # the provisions above, a recipient may use your version of this file under
    1: # the terms of any one of the MPL, the GPL or the LGPL.
    1: #
    1: # ***** END LICENSE BLOCK *****
    1: 
    1: DEPTH		= ../../..
    1: topsrcdir	= @top_srcdir@
    1: srcdir		= @srcdir@
    1: VPATH		= @srcdir@
    1: relativesrcdir  = content/base/test
    1: 
    1: include $(DEPTH)/config/autoconf.mk
11887: 
13240: DIRS += \
13240:   chrome \
13240:   $(NULL)
13240: 
20734: MODULE = content
20734: 
22273: CPP_UNIT_TESTS = \
22273:                  TestNativeXMLHttpRequest.cpp \
31562:                  TestGetURL.cpp \
22273:                  TestPlainTextSerializer.cpp \
22273:                  $(NULL)
11887: 
11887: 
20734: XPCSHELL_TESTS = \
20734:                unit \
20734:                $(NULL)
20734: 
    1: include $(topsrcdir)/config/rules.mk
    1: 
42010: # Split files arbitrarily in two groups to not run into too-long command lines
42010: # which break on Windows (see bug 563151)
42010: _TEST_FILES1 = 	test_bug5141.html \
    1: 		test_bug51034.html \
40657: 		test_bug166235.html \
15879: 		test_bug199959.html \
    1: 		test_bug218236.html \
 4106: 		file_bug218236_multipart.txt \
 4106: 		file_bug218236_multipart.txt^headers^ \
    1: 		test_bug218277.html \
    1: 		test_bug238409.html \
19769: 		test_bug254337.html \
    1: 		test_bug276037-1.html \
    1: 		test_bug276037-2.xhtml \
21811: 		test_bug298064.html \
21811: 		bug298064-subframe.html \
57507: 		test_xhr_forbidden_headers.html \
  557: 		test_bug311681.xml \
 8068: 		test_bug322317.html \
10274: 		test_bug330925.xhtml \
34007: 		test_bug333673.html \
    1: 		test_bug337631.html \
    1: 		test_bug338541.xhtml \
    1: 		test_bug338679.html \
    1: 		test_bug339494.html \
    1: 		test_bug339494.xhtml \
    1: 		test_bug339494.xul \
26701: 		test_bug340571.html \
    1: 		test_bug343596.html \
22740: 		test_bug345339.html \
22740: 		345339_iframe.html \
    1: 		test_bug352728.html \
    1: 		test_bug352728.xhtml \
 8608: 		test_bug353334.html \
    1: 		test_bug355026.html \
    1: 		test_bug357450.js \
    1: 		test_bug357450.html \
    1: 		test_bug357450.xhtml \
    1: 		test_bug357450.xul \
    1: 		test_bug357450_svg.xhtml \
    1: 		test_bug357509.html \
    1: 		test_bug358660.html \
  536: 		test_bug362391.xhtml \
  536: 		test_bug364092.xhtml \
  536: 		test_bug364413.xhtml \
    1: 		test_bug366946.html \
  536: 		test_bug367164.html \
    1: 		test_bug371576-1.html \
    1: 		test_bug371576-2.html \
    1: 		test_bug371576-3.html \
    1: 		test_bug371576-4.html \
    1: 		test_bug371576-5.html \
  484: 		test_bug372086.html \
16664: 		test_bug372964.html \
17034: 		test_bug372964-2.html \
  832: 		test_bug373181.xhtml \
 2501: 		test_bug375314.html \
11465: 		test_bug378969.html \
 2708: 		test_bug382113.html \
19701: 		test_bug382871.html \
13282: 		test_bug383430.html \
29215: 		test_bug384003.xhtml \
 6423: 		test_bug390219.html \
 4511: 		test_bug390735.html \
 6170: 		test_bug392318.html \
 5871: 		test_bug392511.html \
 8603: 		test_bug393968.html \
 6158: 		test_bug395915.html \
 8603: 		test_bug397234.html \
 6688: 		test_bug398243.html \
27819: 		$(warning test_bug419132.html disabled because it takes 60 seconds) \
27819: 		$(warning bug419132.html disabled because it takes 60 seconds) \
 6688: 		formReset.html \
 2708: 		bug382113_object.html \
 6423: 		test_bug326337.html \
 6423: 		file_bug326337_inner.html \
10795: 		file_bug326337_outer.html \
 6423: 		file_bug326337.xml \
 6423: 		file_bug326337_multipart.txt \
 6423: 		file_bug326337_multipart.txt^headers^ \
25722: 		test_bug333198.html \
 7801: 		test_bug402150.html \
 7801: 		test_bug402150.html^headers^ \
 7891: 		test_bug401662.html \
 9323: 		test_bug403852.html \
33620: 		test_fileapi.html \
55459: 		test_fileapi_slice.html \
 8276: 		test_bug403868.xml \
 8522: 		test_bug405182.html \
 9429: 		test_bug403841.html \
12178: 		test_bug409380.html \
 9797: 		test_bug410229.html \
12421: 		test_bug413974.html \
11516: 		test_bug415860.html \
10833: 		test_bug414190.html \
11371: 		test_bug414796.html \
35606: 		test_bug527896.html \
16106: 		test_bug416317-1.html \
16106: 		test_bug416317-2.html \
33532: 		test_XHRSendData.html \
33532: 		file_XHRSendData.sjs \
33532: 		file_XHRSendData_doc.xml \
33532: 		file_XHRSendData_doc.xml^headers^ \
16106: 		file_bug416317.xhtml \
11538: 		test_bug416383.html \
12349: 		test_bug417255.html \
11862: 		test_bug417384.html \
11871: 		test_bug418214.html \
13002: 		test_bug419527.xhtml \
12593: 		test_bug420609.xhtml \
12676: 		test_bug420700.html \
13293: 		test_bug421602.html \
13258: 		test_bug422537.html \
20734: 		test_bug424359-1.html \
53966: 		test_bug499656.html \
53966: 		test_bug499656.xhtml \
20734: 		file_htmlserializer_1.html \
20734: 		file_htmlserializer_1_bodyonly.html \
20734: 		file_htmlserializer_1_format.html \
20734: 		file_htmlserializer_1_linebreak.html \
20734: 		file_htmlserializer_1_links.html \
20734: 		file_htmlserializer_1_noflag.html \
20734: 		file_htmlserializer_1_noformatpre.html \
20734: 		file_htmlserializer_1_raw.html \
20734: 		file_htmlserializer_1_nested_body.html \
20734: 		file_htmlserializer_1_sibling_body.html \
20734: 		file_htmlserializer_1_sibling_body_only_body.html \
20734: 		file_htmlserializer_1_no_body.html \
40203: 		file_htmlserializer_1_wrap.html \
20734: 		test_bug424359-2.html \
20734: 		file_htmlserializer_2.html \
22769: 		test_bug431082.html \
20734: 		file_htmlserializer_2_basic.html \
20734: 		file_htmlserializer_2_enthtml.html \
20734: 		file_htmlserializer_2_entw3c.html \
20734: 		file_htmlserializer_2_latin1.html \
13466: 		test_bug424212.html \
13583: 		test_bug425013.html \
13898: 		bug426308-redirect.sjs \
13898: 		test_bug426308.html \
14757: 		test_bug426646.html \
14757: 		file_bug426646-1.html \
14757: 		file_bug426646-2.html \
14391: 		test_bug429157.html \
13557: 		test_XHR.html \
13557: 		file_XHR_pass1.xml \
13557: 		file_XHR_pass2.txt \
13557: 		file_XHR_pass3.txt \
13557: 		file_XHR_pass3.txt^headers^ \
13557: 		file_XHR_fail1.txt \
13557: 		file_XHR_fail1.txt^headers^ \
50604: 		file_XHR_binary1.bin \
50604: 		file_XHR_binary1.bin^headers^ \
14436: 		test_bug428847.html \
14436: 		file_bug428847-1.xhtml \
14436: 		file_bug428847-2.xhtml \
18503: 		test_bug431701.html \
15950: 		test_bug431833.html \
19011: 		test_bug435425.html \
19011: 		bug435425.sjs \
19011: 		bug435425_redirect.sjs \
18945: 		test_bug438519.html \
15900: 		test_bug444722.html \
18406: 		test_bug451376.html \
15250: 		test_text_replaceWholeText.html \
15250: 		test_text_wholeText.html \
19769: 		test_bug433533.html \
15250: 		wholeTexty-helper.xml \
15899: 		test_bug444030.xhtml \
16105: 		test_NodeIterator_basics_filters.xhtml \
16105: 		test_NodeIterator_mutations_1.xhtml \
16105: 		test_NodeIterator_mutations_2.html \
38706: 		test_NodeIterator_mutations_3.html \
16373: 		test_bug28293.html \
26256: 		test_bug28293.xhtml \
16373: 		file_bug28293.sjs \
19152: 		test_bug445225.html \
19152: 		file_bug445225_multipart.txt \
19152: 		file_bug445225_multipart.txt^headers^ \
16977: 		test_title.html \
19010: 		test_bug453521.html \
22933: 		test_bug391728.html \
19014: 		file_bug391728.html \
20321: 		test_bug454325.html \
19014: 		file_bug391728_2.html \
20379: 		test_bug456262.html \
51989: 		test_bug590870.html \
51989: 		file_bug590870.html \
51990: 		test_bug590812.html \
51990: 		file_bug590812.xml \
51990: 		file_bug590812-ref.xhtml \
19239: 		test_bug368972.html \
22216: 		test_bug448993.html \
19464: 		test_bug450160.html \
23652: 		test_bug453736.html \
19294: 		test_bug454326.html \
33456: 		test_bug505783.html \
19872: 		test_bug457746.html \
54146: 		test_bug587931.html \
54924: 		test_bug592829.html \
33527: 		test_bug518104.html \
19872: 		bug457746.sjs \
19952: 		test_CrossSiteXHR.html \
40560: 		test_CrossSiteXHR_origin.html \
19952: 		file_CrossSiteXHR_inner.html \
24084: 		file_CrossSiteXHR_inner_data.sjs \
24084: 		file_CrossSiteXHR_inner.jar \
19952: 		file_CrossSiteXHR_server.sjs \
19952: 		test_CrossSiteXHR_cache.html \
19952: 		file_CrossSiteXHR_cache_server.sjs \
20331: 		test_XHRDocURI.html \
20331: 		file_XHRDocURI.xml \
20331: 		file_XHRDocURI.xml^headers^ \
20331: 		file_XHRDocURI.text \
20331: 		file_XHRDocURI.text^headers^ \
42010: 		$(NULL)
42010: 
42010: _TEST_FILES2 = \
20463: 		test_bug459424.html \
21560: 		bug461735-redirect1.sjs \
21560: 		bug461735-redirect2.sjs \
21560: 		bug461735-post-redirect.js \
34990: 		test_bug513194.html \
21560: 		test_bug461735.html \
21639: 		test_bug380418.html \
36707: 		test_bug469304.html \
22218: 		test_bug465767.html \
21639: 		test_bug380418.html^headers^ \
27852: 		test_bug422403-1.html \
27852: 		file_xhtmlserializer_1.xhtml \
27852: 		file_xhtmlserializer_1_bodyonly.xhtml \
27852: 		file_xhtmlserializer_1_format.xhtml \
27852: 		file_xhtmlserializer_1_linebreak.xhtml \
27852: 		file_xhtmlserializer_1_links.xhtml \
27852: 		file_xhtmlserializer_1_noflag.xhtml \
27852: 		file_xhtmlserializer_1_noformatpre.xhtml \
27852: 		file_xhtmlserializer_1_raw.xhtml \
27852: 		file_xhtmlserializer_1_nested_body.xhtml \
27852: 		file_xhtmlserializer_1_sibling_body.xhtml \
27852: 		file_xhtmlserializer_1_sibling_body_only_body.xhtml \
27852: 		file_xhtmlserializer_1_no_body.xhtml \
40203: 		file_xhtmlserializer_1_wrap.xhtml \
27852: 		test_bug422403-2.xhtml \
27852: 		file_xhtmlserializer_2.xhtml \
27852: 		file_xhtmlserializer_2_basic.xhtml \
27852: 		file_xhtmlserializer_2_enthtml.xhtml \
27852: 		file_xhtmlserializer_2_entw3c.xhtml \
27852: 		file_xhtmlserializer_2_latin1.xhtml \
33238: 		test_bug500937.html \
27852: 		test_htmlcopyencoder.html \
54235: 		test_bug313646.html \
54235: 		bug313646.txt \
27852: 		test_htmlcopyencoder.xhtml \
27852: 		test_bug270145.xhtml \
22155: 		test_elementTraversal.html \
22155: 		test_w3element_traversal.html \
22155: 		test_w3element_traversal.xhtml \
22768: 		test_bug469020.html \
22155: 		test_w3element_traversal_svg.html \
22158: 		w3element_traversal.svg \
22702: 		test_bug444322.html \
22702: 		bug444322.txt \
22702: 		bug444322.js \
35425: 		test_bug455472.html \
22961: 		test_bug455629.html \
22961: 		bug455629-helper.svg \
23622: 		test_bug473162-1.html \
23622: 		test_bug473162-2.html \
23817: 		test_bug466751.xhtml \
24229: 		test_bug461555.html \
27828: 		test_sync_xhr_timer.xhtml \
31645: 		test_bug498240.html \
29264: 		file_htmlserializer_ipv6.html \
29264: 		file_htmlserializer_ipv6_out.html \
29264: 		test_bug498433.html \
29477: 		test_bug498897.html \
29477: 		file_bug498897.html \
29477: 		file_bug498897.html^headers^ \
29477: 		file_bug498897.css \
29832: 		test_bug493881.js \
29832: 		test_bug493881.html \
30320: 		bug466409-page.html \
30320: 		bug466409-empty.css \
30320: 		test_bug466409.html \
31383: 		test_classList.html \
32360: 		test_bug514487.html \
33361: 		test_range_bounds.html \
54969: 		test_mozfiledataurl.html \
54969: 		file_mozfiledataurl_audio.ogg \
54969: 		file_mozfiledataurl_img.jpg \
54969: 		file_mozfiledataurl_inner.html \
54969: 		file_mozfiledataurl_doc.html \
54969: 		file_mozfiledataurl_text.txt \
34058: 		test_bug475156.html \
34058: 		bug475156.sjs \
38663: 		test_bug544642.html \
43079: 		test_bug564863.xhtml \
34681: 		test_copypaste.html \
34712: 		test_bug503481.html \
34712: 		file_bug503481.sjs \
34712: 		test_bug503481b.html \
34712: 		file_bug503481b_inner.html \
37060: 		test_viewport_scroll.html \
37418: 		test_CSP.html \
37418: 		file_CSP.sjs \
37418: 		file_CSP_main.html \
39365: 		file_CSP_main.html^headers^ \
37418: 		file_CSP_main.js \
37926: 		test_CSP_frameancestors.html \
37926: 		file_CSP_frameancestors.sjs \
37926: 		file_CSP_frameancestors_main.html \
37926: 		file_CSP_frameancestors_main.js \
38438: 		test_CSP_inlinescript.html \
38438: 		file_CSP_inlinescript_main.html \
38438: 		file_CSP_inlinescript_main.html^headers^ \
39061: 		test_CSP_evalscript.html \
39061: 		file_CSP_evalscript_main.html \
39365: 		file_CSP_evalscript_main.html^headers^ \
39061: 		file_CSP_evalscript_main.js \
37512: 		test_bug540854.html \
37512: 		bug540854.sjs \
39584: 		test_bug548463.html \
39588: 		test_bug545644.html \
39588: 		test_bug545644.xhtml \
39708: 		test_bug553896.xhtml \
41221: 		test_bug515401.html \
39749: 		test_bug541937.html \
39749: 		file_bug541937.html \
39749: 		file_bug541937.xhtml \
40760: 		test_bug558726.html \
40789: 		test_bug557892.html \
40789: 		file_bug557892.html \
40942: 		test_bug559526.html \
41213: 		test_csp_redirects.html \
41213: 		file_csp_redirects_page.sjs \
41213: 		file_csp_redirects_main.html \
41213: 		file_csp_redirects_resource.sjs \
41439: 		test_bug346485.html \
41480: 		test_bug560780.html \
41627: 		test_bug562652.html \
41927: 		test_bug562137.html \
41927: 		file_bug562137.txt \
42869: 		test_bug548193.html \
42869: 		file_bug548193.sjs \
43064: 		test_html_colors_quirks.html \
43064: 		test_html_colors_standards.html \
43572: 		test_bug571390.xul \
46273: 		test_bug300992.html \
43835: 		test_websocket_hello.html \
43835: 		file_websocket_hello_wsh.py \
43837: 		test_ws_basic_tests.html \
43837: 		file_ws_basic_tests_wsh.py \
43840: 		test_websocket.html \
43840: 		file_websocket_wsh.py \
43840: 		file_websocket_http_resource.txt \
48017: 		test_x-frame-options.html \
48017: 		file_x-frame-options_main.html \
48017: 		file_x-frame-options_page.sjs \
52011: 		test_createHTMLDocument.html \
58598: 		test_bug564047.html \
55937: 		test_bug567350.html \
55937: 		test_bug574596.html \
52432: 		test_bug578096.html \
58891: 		test_bug592366.html \
58773: 		test_bug597345.html \
58773: 		script-1_bug597345.sjs \
58773: 		script-2_bug597345.js \
55102: 		test_bug598877.html \
57328: 		test_bug599588.html \
55103: 		test_bug600466.html \
55104: 		test_bug600468.html \
55105: 		test_bug600471.html \
55663: 		test_bug601803.html \
55663: 		file_bug601803a.html \
55663: 		file_bug601803b.html \
57321: 		test_bug602838.html \
57321: 		script_bug602838.sjs \
59211: 		test_bug614583.html \
56806: 		test_bug604660.html \
56806: 		file_bug604660-1.xml \
56806: 		file_bug604660-2.xsl \
56806: 		file_bug604660-3.js \
56806: 		file_bug604660-4.js \
56806: 		file_bug604660-5.xml \
56806: 		file_bug604660-6.xsl \
56306: 		test_bug605982.html \
57850: 		test_bug606729.html \
57490: 		test_treewalker_nextsibling.xml \
58470: 		test_bug614058.html \
    1: 		$(NULL)
33031: 
39456: # This test fails on the Mac for some reason
39456: ifneq (,$(filter gtk2 windows,$(MOZ_WIDGET_TOOLKIT)))
42010: _TEST_FILES2 += 	test_copyimage.html \
39456: 		$(NULL)
39456: endif
39456: 
28159: # Disabled; see bug 492181
28159: #		test_plugin_freezing.html
    1: 
20643: # Disabled for now. Mochitest isn't reliable enough for these.
20643: # test_bug444546.html \
20643: # bug444546.sjs \
20643: 
35001: # Disabled due to making the harness time out
35001: #		test_bug503473.html \
35001: #		file_bug503473-frame.sjs \
35001: 
54338: _BROWSER_TEST_FILES = \
54338: 		browser_bug593387.js \
54338: 		$(NULL)
54338: 
42010: libs:: $(_TEST_FILES1)
 4297: 	$(INSTALL) $(foreach f,$^,"$f") $(DEPTH)/_tests/testing/mochitest/tests/$(relativesrcdir)
42010: 
42010: libs:: $(_TEST_FILES2)
42010: 	$(INSTALL) $(foreach f,$^,"$f") $(DEPTH)/_tests/testing/mochitest/tests/$(relativesrcdir)
54338: 
54338: libs:: $(_BROWSER_TEST_FILES)
54338: 	$(INSTALL) $(foreach f,$^,"$f") $(DEPTH)/_tests/testing/mochitest/browser/$(relativesrcdir)
