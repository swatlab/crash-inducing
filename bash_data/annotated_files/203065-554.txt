138652: # -*- Mode: python; c-basic-offset: 4; indent-tabs-mode: nil; tab-width: 40 -*-
134439: # vim: set filetype=python:
134439: # This Source Code Form is subject to the terms of the Mozilla Public
134439: # License, v. 2.0. If a copy of the MPL was not distributed with this
134439: # file, You can obtain one at http://mozilla.org/MPL/2.0/.
134439: 
140753: EXPORTS += [
142529:     'mozAutoDocUpdate.h',
140753:     'nsAtomListUtils.h',
142529:     'nsAttrAndChildArray.h',
140753:     'nsAttrName.h',
142529:     'nsAttrValue.h',
142529:     'nsAttrValueInlines.h',
140753:     'nsContentList.h',
140753:     'nsContentListDeclarations.h',
140753:     'nsContentSink.h',
142529:     'nsCrossSiteListenerProxy.h',
142529:     'nsDOMAttributeMap.h',
202837:     'nsElementFrameLoaderOwner.h',
142529:     'nsFrameMessageManager.h',
181362:     'nsGenericDOMDataNode.h',
140753:     'nsGkAtomList.h',
140753:     'nsGkAtoms.h',
159582:     'nsImageLoadingContent.h',
142529:     'nsMappedAttributeElement.h',
140753:     'nsNodeInfoManager.h',
140753:     'nsNodeUtils.h',
140753:     'nsPropertyTable.h',
140753:     'nsRange.h',
142529:     'nsSandboxFlags.h',
140753:     'nsScriptLoader.h',
140753:     'nsStubDocumentObserver.h',
140753:     'nsStubMutationObserver.h',
142529:     'nsStyledElement.h',
140753:     'nsTextFragment.h',
181362:     'nsTraversal.h',
140753: ]
140753: 
140753: if CONFIG['MOZ_WEBRTC']:
144721:     EXPORTS += [
144722:         'nsDOMDataChannel.h',
144721:         'nsDOMDataChannelDeclarations.h',
144721:     ]
166802:     SOURCES += [
145395:         'nsDOMDataChannel.cpp',
145395:     ]
169860:     LOCAL_INCLUDES += [
169860:         '/netwerk/sctp/datachannel',
169860:     ]
145395: 
145395: # Are we targeting x86-32 or x86-64?  If so, we want to include SSE2 code for
145395: # nsTextFragment.cpp
145395: if CONFIG['INTEL_ARCHITECTURE']:
190022:     SOURCES += ['nsTextFragmentSSE2.cpp']
193956:     SOURCES['nsTextFragmentSSE2.cpp'].flags += CONFIG['SSE2_FLAGS']
140753: 
194484: EXPORTS.mozilla += [
194484:     'FeedWriterEnabled.h',
194484: ]
194484: 
140753: EXPORTS.mozilla.dom += [
140753:     'Attr.h',
140753:     'Comment.h',
166678:     'DocumentFragment.h',
166678:     'DocumentType.h',
142529:     'DOMImplementation.h',
158949:     'DOMParser.h',
194231:     'DOMPoint.h',
194233:     'DOMQuad.h',
164372:     'DOMRect.h',
189242:     'DOMStringList.h',
140753:     'EventSource.h',
140753:     'Link.h',
140753:     'NodeIterator.h',
173932:     'ShadowRoot.h',
197820:     'StyleSheetList.h',
140753:     'Text.h',
140753:     'TreeWalker.h',
140753: ]
140753: 
171990: UNIFIED_SOURCES += [
145395:     'Attr.cpp',
166677:     'ChildIterator.cpp',
145395:     'Comment.cpp',
166678:     'DirectionalityUtils.cpp',
166678:     'DocumentFragment.cpp',
166678:     'DocumentType.cpp',
145395:     'DOMImplementation.cpp',
166677:     'DOMParser.cpp',
194231:     'DOMPoint.cpp',
194233:     'DOMQuad.cpp',
164372:     'DOMRect.cpp',
189242:     'DOMStringList.cpp',
145395:     'Element.cpp',
145395:     'EventSource.cpp',
145395:     'FileIOObject.cpp',
145395:     'FragmentOrElement.cpp',
145395:     'Link.cpp',
145395:     'NodeIterator.cpp',
145395:     'nsAtomListUtils.cpp',
145395:     'nsAttrAndChildArray.cpp',
145395:     'nsAttrValue.cpp',
145395:     'nsAttrValueOrString.cpp',
145395:     'nsCCUncollectableMarker.cpp',
145395:     'nsChannelPolicy.cpp',
145395:     'nsContentAreaDragDrop.cpp',
145395:     'nsContentIterator.cpp',
145395:     'nsContentList.cpp',
145395:     'nsContentPolicy.cpp',
145395:     'nsContentSink.cpp',
145395:     'nsCopySupport.cpp',
145395:     'nsCrossSiteListenerProxy.cpp',
166678:     'nsCSPService.cpp',
166678:     'nsDataDocumentContentPolicy.cpp',
166678:     'nsDocumentEncoder.cpp',
145395:     'nsDOMAttributeMap.cpp',
145395:     'nsDOMBlobBuilder.cpp',
145395:     'nsDOMCaretPosition.cpp',
145395:     'nsDOMFile.cpp',
145395:     'nsDOMFileReader.cpp',
145395:     'nsDOMMutationObserver.cpp',
145395:     'nsDOMSerializer.cpp',
145395:     'nsDOMSettableTokenList.cpp',
145395:     'nsDOMTokenList.cpp',
202837:     'nsElementFrameLoaderOwner.cpp',
145395:     'nsFormData.cpp',
145395:     'nsFrameLoader.cpp',
145395:     'nsFrameMessageManager.cpp',
145395:     'nsGenConImageContent.cpp',
145395:     'nsGenericDOMDataNode.cpp',
145395:     'nsGkAtoms.cpp',
145395:     'nsHostObjectProtocolHandler.cpp',
145395:     'nsHostObjectURI.cpp',
166678:     'nsHTMLContentSerializer.cpp',
145395:     'nsINode.cpp',
145395:     'nsInProcessTabChildGlobal.cpp',
145395:     'nsLineBreaker.cpp',
145395:     'nsMappedAttributeElement.cpp',
145395:     'nsMappedAttributes.cpp',
145395:     'nsMixedContentBlocker.cpp',
145395:     'nsNameSpaceManager.cpp',
145395:     'nsNoDataProtocolContentPolicy.cpp',
145395:     'nsNodeInfo.cpp',
145395:     'nsNodeUtils.cpp',
145395:     'nsPlainTextSerializer.cpp',
145395:     'nsPropertyTable.cpp',
145395:     'nsRange.cpp',
145395:     'nsReferencedElement.cpp',
145395:     'nsScriptElement.cpp',
145395:     'nsScriptLoader.cpp',
145395:     'nsStubDocumentObserver.cpp',
145395:     'nsStubMutationObserver.cpp',
166678:     'nsStyledElement.cpp',
145395:     'nsStyleLinkElement.cpp',
145395:     'nsSyncLoadService.cpp',
145395:     'nsTextFragment.cpp',
145395:     'nsTextNode.cpp',
145395:     'nsTraversal.cpp',
145395:     'nsTreeSanitizer.cpp',
145395:     'nsViewportInfo.cpp',
145395:     'nsXHTMLContentSerializer.cpp',
145395:     'nsXMLContentSerializer.cpp',
145395:     'nsXMLHttpRequest.cpp',
145395:     'nsXMLNameSpaceMap.cpp',
173932:     'ShadowRoot.cpp',
197821:     'StyleSheetList.cpp',
166678:     'Text.cpp',
166678:     'ThirdPartyUtil.cpp',
166678:     'TreeWalker.cpp',
166678:     'WebSocket.cpp',
145395: ]
145395: 
202837: SOURCES += [
202837:     'nsImageLoadingContent.cpp',
202837: ]
202837: 
171990: # These files cannot be built in unified mode because they use FORCE_PR_LOG
171990: SOURCES += [
171990:     'nsDocument.cpp',
171990:     'nsNodeInfoManager.cpp',
171990: ]
171990: 
171990: # These files cannot be built in unified mode because of OS X headers.
171990: SOURCES += [
171990:     'nsContentUtils.cpp',
171990:     'nsObjectLoadingContent.cpp',
171990: ]
171990: 
154110: EXTRA_COMPONENTS += [
154110:     'contentAreaDropListener.js',
154110:     'contentAreaDropListener.manifest',
154110:     'contentSecurityPolicy.manifest',
154110:     'messageWakeupService.js',
154110:     'messageWakeupService.manifest',
154110: ]
154110: 
147456: EXTRA_PP_COMPONENTS += [
147456:     'contentSecurityPolicy.js',
147456: ]
150413: 
150413: EXTRA_JS_MODULES += [
150413:     'CSPUtils.jsm',
150413: ]
157587: 
157587: FAIL_ON_WARNINGS = True
157587: 
157600: MSVC_ENABLE_PGO = True
157600: 
166713: include('/ipc/chromium/chromium-config.mozbuild')
166713: 
171742: FINAL_LIBRARY = 'gklayout'
169860: LOCAL_INCLUDES += [
169860:     '/caps/include',
169860:     '/content/html/content/src',
169860:     '/content/html/document/src',
203065:     '/content/svg/content/src',
203065:     '/content/xml/content/src',
203065:     '/content/xml/document/src',
169860:     '/content/xul/content/src',
169860:     '/content/xul/document/src',
172242:     '/docshell/base',
169860:     '/dom/base',
169860:     '/dom/ipc',
169860:     '/dom/workers',
180086:     '/dom/xbl',
179346:     '/dom/xslt/xpath',
169860:     '/image/src',
169860:     '/js/ipc',
169860:     '/js/xpconnect/src',
169860:     '/js/xpconnect/wrappers',
169860:     '/layout/base',
169860:     '/layout/generic',
169860:     '/layout/style',
169860:     '/layout/svg',
174445:     '/layout/xul',
169860:     '/netwerk/base/src',
198285:     '/xpcom/ds',
169860: ]
195374: 
195374: if CONFIG['GNU_CC'] and CONFIG['MOZ_WIDGET_TOOLKIT'] == 'android':
195374:     # Work around bug 986928
195374:     CXXFLAGS += ['-Wno-error=format']
