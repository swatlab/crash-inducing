 6643: /* -*- Mode: IDL; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */
98983: /* This Source Code Form is subject to the terms of the Mozilla Public
98983:  * License, v. 2.0. If a copy of the MPL was not distributed with this
98983:  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 6643: 
 6643: #include "nsISupports.idl"
 6643: 
28438: interface nsIDOMStorage;
26323: interface nsIPrincipal;
26323: 
99466: [scriptable, uuid(fd91ec36-7da8-43bb-b8f2-4b57a862a467)]
 6643: interface nsIDOMStorageManager : nsISupports
 6643: {
 6643:   /**
 6643:    * Return the amount of disk space used by a domain.  Usage is checked
 6643:    * against the domain of the page that set the key (the owner domain), not
 6643:    * the domain of the storage object.
 6643:    *
 6643:    * @param aOwnerDomain The domain to check.
 6643:    * @returns the space usage of the domain, in bytes.
 6643:    */
 6643:   long getUsage(in AString aOwnerDomain);
10563: 
10563:   /**
10563:    * Clear keys owned by offline applications.  All data owned by a domain
10563:    * with the "offline-app" permission will be removed from the database.
10563:    */
10563:   void clearOfflineApps();
26323: 
26323:   /**
26323:    * Returns instance of localStorage object for aURI's origin.
26323:    * This method ensures there is always only a single instance
26323:    * for a single origin.
26323:    */
37608:   nsIDOMStorage getLocalStorageForPrincipal(in nsIPrincipal aPrincipal,
99466:                                             in DOMString aDocumentURI);
 6643: };
