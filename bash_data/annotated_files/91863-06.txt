90223: <html xmlns="http://www.w3.org/1999/xhtml">
90223: <!--
90223: https://bugzilla.mozilla.org/show_bug.cgi?id=629200
90223: -->
90223: <head>
90223:   <title>Tests specific to SVGPointList</title>
90223:   <script type="text/javascript" src="/tests/SimpleTest/SimpleTest.js"></script>
90223:   <script type="text/javascript" src="MutationEventChecker.js"></script>
90223:   <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css" />
90223: </head>
90223: <body>
90223: <a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=629200">Mozilla Bug 629200</a>
90223: <p id="display"></p>
90223: <div id="content" style="display:none;">
90223: <svg id="svg" xmlns="http://www.w3.org/2000/svg" width="100" height="100">
90223:   <polyline id="polyline" points="50,375 150,380"/>
90223: </svg>
90223: </div>
90223: <pre id="test">
90223: <script class="testbody" type="text/javascript">
90223: <![CDATA[
90223: 
90223: SimpleTest.waitForExplicitFinish();
90223: 
90223: /*
90223: This file runs a series of SVGPointList specific tests. Generic SVGXxxList
90223: tests can be found in test_SVGxxxList.xhtml. Anything that can be generalized
90223: to other list types belongs there.
90223: */
90223: 
90223: function run_tests()
90223: {
90223:   document.getElementById('svg').pauseAnimations();
90223: 
90223:   var polyline = document.getElementById("polyline");
90223:   var points = polyline.points;
90223: 
90223:   is(points.numberOfItems, 2, 'Checking numberOfItems');
90223: 
90223:   // Test mutation events
90223:   // --- Initialization
90223:   eventChecker = new MutationEventChecker;
90223:   eventChecker.watchAttr(polyline, "points");
90223:   // -- Actual changes
90223:   eventChecker.expect("modify modify");
90223:   points[0].x = 40;
90223:   polyline.setAttribute("points", "30,375 150,380");
90223:   // -- Redundant changes
90223:   eventChecker.expect("");
90223:   points[0].x = 30;
90223:   points[1].y = 380;
90223:   polyline.setAttribute("points", "30,375 150,380");
91863:   // -- Attribute removal
91863:   eventChecker.expect("remove");
91863:   polyline.removeAttribute("points");
91863:   // -- Non-existent attribute removal
91863:   eventChecker.expect("");
91863:   polyline.removeAttribute("points");
91863:   polyline.removeAttributeNS(null, "points");
90223:   eventChecker.finish();
90223: 
90223:   SimpleTest.finish();
90223: }
90223: 
90223: window.addEventListener("load", run_tests, false);
90223: 
90223: ]]>
90223: </script>
90223: </pre>
90223: </body>
90223: </html>
