15992: /* vim: set shiftwidth=2 tabstop=8 autoindent cindent expandtab: */
15992: /* ***** BEGIN LICENSE BLOCK *****
15992:  * Version: MPL 1.1/GPL 2.0/LGPL 2.1
15992:  *
15992:  * The contents of this file are subject to the Mozilla Public License Version
15992:  * 1.1 (the "License"); you may not use this file except in compliance with
15992:  * the License. You may obtain a copy of the License at
15992:  * http://www.mozilla.org/MPL/
15992:  *
15992:  * Software distributed under the License is distributed on an "AS IS" basis,
15992:  * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
15992:  * for the specific language governing rights and limitations under the
15992:  * License.
15992:  *
15992:  * The Original Code is nsStyleStructInlines.h.
15992:  *
15992:  * The Initial Developer of the Original Code is the Mozilla Foundation.
15992:  * Portions created by the Initial Developer are Copyright (C) 2008
15992:  * the Initial Developer. All Rights Reserved.
15992:  *
15992:  * Contributor(s):
15992:  *   L. David Baron <dbaron@dbaron.org>, Mozilla Corporation (original author)
15992:  *   Rob Arnold <robarnold@mozilla.com>
15992:  *
15992:  * Alternatively, the contents of this file may be used under the terms of
15992:  * either the GNU General Public License Version 2 or later (the "GPL"), or
15992:  * the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
15992:  * in which case the provisions of the GPL or the LGPL are applicable instead
15992:  * of those above. If you wish to allow use of your version of this file only
15992:  * under the terms of either the GPL or the LGPL, and not to allow others to
15992:  * use your version of this file under the terms of the MPL, indicate your
15992:  * decision by deleting the provisions above and replace them with the notice
15992:  * and other provisions required by the GPL or the LGPL. If you do not delete
15992:  * the provisions above, a recipient may use your version of this file under
15992:  * the terms of any one of the MPL, the GPL or the LGPL.
15992:  *
15992:  * ***** END LICENSE BLOCK ***** */
15992: 
15992: /*
15992:  * Inline methods that belong in nsStyleStruct.h, except that they
15992:  * require more headers.
15992:  */
15992: 
15992: #ifndef nsStyleStructInlines_h_
15992: #define nsStyleStructInlines_h_
15992: 
15992: #include "nsStyleStruct.h"
15992: #include "imgIRequest.h"
34849: #include "imgIContainer.h"
15992: 
15992: inline void
15992: nsStyleBorder::SetBorderImage(imgIRequest* aImage)
15992: {
15992:   mBorderImage = aImage;
34849:   mSubImages.Clear();
15992: }
15992: 
15992: inline imgIRequest*
15992: nsStyleBorder::GetBorderImage() const
15992: {
52148:   NS_ABORT_IF_FALSE(!mBorderImage || mImageTracked,
52148:                     "Should be tracking any images we're going to use!");
15992:   return mBorderImage;
15992: }
15992: 
15992: inline PRBool nsStyleBorder::IsBorderImageLoaded() const
15992: {
15992:   PRUint32 status;
15992:   return mBorderImage &&
15992:          NS_SUCCEEDED(mBorderImage->GetImageStatus(&status)) &&
68268:          (status & imgIRequest::STATUS_LOAD_COMPLETE) &&
68268:          !(status & imgIRequest::STATUS_ERROR);
15992: }
15992: 
34849: inline void
34849: nsStyleBorder::SetSubImage(PRUint8 aIndex, imgIContainer* aSubImage) const
34849: {
34849:   const_cast<nsStyleBorder*>(this)->mSubImages.ReplaceObjectAt(aSubImage, aIndex);
34849: }
34849: 
34849: inline imgIContainer*
34849: nsStyleBorder::GetSubImage(PRUint8 aIndex) const
34849: {
36970:   imgIContainer* subImage = nsnull;
36970:   if (aIndex < mSubImages.Count())
34849:     subImage = mSubImages[aIndex];
34849:   return subImage;
34849: }
34849: 
15992: #endif /* !defined(nsStyleStructInlines_h_) */
