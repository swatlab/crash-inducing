81004: # Usage: ./update.sh <skia_src_directory>
81004: #
81004: # Copies the needed files from a directory containing the original
81004: # skia source that we need.
81004: 
81004: cp $1/LICENSE ./
81004: cp $1/README ./
81004: 
81004: # Includes
81004: cp $1/include/animator/*.h ./include/animator/
81004: cp $1/include/config/*.h ./include/config/
81004: cp $1/include/core/*.h ./include/core/
81004: cp $1/include/effects/*.h ./include/effects/
81004: cp $1/include/gpu/*.h ./include/gpu/
81004: cp $1/include/images/*.h ./include/images/
81004: cp $1/include/pdf/*.h ./include/pdf/
81004: cp $1/include/pipe/*.h ./include/pipe/
81004: cp $1/include/ports/*.h ./include/ports/
81004: cp $1/include/svg/*.h ./include/svg/
81004: cp $1/include/text/*.h ./include/text/
81004: cp $1/include/utils/android/*.h ./include/utils/android/
81004: cp $1/include/utils/mac/*.h ./include/utils/mac/
81004: cp $1/include/utils/unix/*.h ./include/utils/unix/
81004: cp $1/include/utils/win/*.h ./include/utils/win/
81004: cp $1/include/utils/*.h ./include/utils/
81004: cp $1/include/views/*.h ./include/views/
81004: cp $1/include/xml/*.h ./include/xml/
81004: 
81004: # Source
81004: cp $1/src/animator/*.h ./src/animator/
81004: cp $1/src/animator/*.xsd ./src/animator/
81004: cp $1/src/animator/*.xsx ./src/animator/
81004: cp $1/src/animator/*.cpp ./src/animator/
81004: cp $1/src/core/*.h ./src/core/
81004: cp $1/src/core/*.cpp ./src/core/
81004: cp $1/src/effects/*.cpp ./src/effects/
81004: cp $1/src/effects/*.h ./src/effects/
81004: cp $1/src/gpu/*.cpp ./src/gpu/
81004: cp $1/src/gpu/*.h ./src/gpu/
81004: cp $1/src/images/*.cpp ./src/images/
81004: cp $1/src/images/*.h ./src/images/
81004: cp $1/src/opts/*.S ./src/opts/
81004: cp $1/src/opts/*.cpp ./src/opts/
81004: cp $1/src/opts/*.h ./src/opts/
81004: cp $1/src/pdf/*.cpp ./src/pdf/
81004: cp $1/src/pdf/*.h ./src/pdf/
81004: cp $1/src/pipe/*.h ./src/pipe/
81004: cp $1/src/pipe/*.cpp ./src/pipe/
81004: cp $1/src/ports/*.h ./src/ports/
81004: cp $1/src/ports/*.cpp ./src/ports/
81004: cp $1/src/svg/*.cpp ./src/svg/
81004: cp $1/src/svg/*.h ./src/svg/
81004: cp $1/src/text/*.cpp ./src/text/
81004: cp $1/src/utils/mac/SampleApp-Info.plist ./src/utils/mac/
81004: cp $1/src/utils/mac/SampleApp.xib ./src/utils/mac/
81004: cp $1/src/utils/mac/*.cpp ./src/utils/mac/
81004: cp $1/src/utils/mac/*.h ./src/utils/mac/
81004: cp $1/src/utils/mac/*.mm ./src/utils/mac/
81004: cp $1/src/utils/SDL/*.cpp ./src/utils/SDL/
81004: cp $1/src/utils/*.cpp ./src/utils/
81004: cp $1/src/utils/*.h ./src/utils/
81004: cp $1/src/utils/unix/*.c ./src/utils/unix/
81004: cp $1/src/utils/unix/*.cpp ./src/utils/unix/
81004: cp $1/src/utils/win/*.cpp ./src/utils/win/
81004: cp $1/src/views/*.cpp ./src/views/
81004: cp $1/src/views/*.h ./src/views/
81004: cp $1/src/views/views_files.mk ./src/views/
81004: cp $1/src/xml/*.h ./src/xml/
81004: cp $1/src/xml/*.cpp ./src/xml/
81004: cp $1/src/xml/xml_files.mk ./src/xml/
81004: 
81004: # GLU
81004: cp $1/third_party/glu/gluos.h ./third_party/glu/
81004: cp $1/third_party/glu/libtess/alg-outline ./third_party/glu/libtess/
81004: cp $1/third_party/glu/libtess/*.h ./third_party/glu/libtess/
81004: cp $1/third_party/glu/libtess/*.c ./third_party/glu/libtess/
81004: cp $1/third_party/glu/libtess/GNUmakefile ./third_party/glu/libtess/
81004: cp $1/third_party/glu/libtess/Imakefile ./third_party/glu/libtess/
81004: cp $1/third_party/glu/libtess/README ./third_party/glu/libtess/
81004: cp $1/third_party/glu/LICENSE.txt ./third_party/glu/
81004: cp $1/third_party/glu/README.skia ./third_party/glu/
81004: cp $1/third_party/glu/sk_glu.h ./third_party/glu/
81004: 
81004: if [ -d $1/.svn ]; then
81004:   rev=$(svn info $1 | awk '/^Revision:/{print $2}')
81004: fi
81004: 
81004: if [ -n "$rev" ]; then
81004:   version=$rev
81004:   sed -i "" "s/r[0-9][0-9][0-9][0-9]/r$version/" README_MOZILLA
81004: else
81004:   echo "Remember to update README_MOZILLA with the version details."
81004: fi
81004: 
99813: for file in `ls patches/*.patch`; do
99813:   echo "Applying patch $file"
99813:   patch -p3 < $file
99813: done
