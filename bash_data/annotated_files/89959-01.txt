81024: #! gmake
81024: #
81024: # ***** BEGIN LICENSE BLOCK *****
81024: # Version: MPL 1.1/GPL 2.0/LGPL 2.1
81024: #
81024: # The contents of this file are subject to the Mozilla Public License Version
81024: # 1.1 (the "License"); you may not use this file except in compliance with
81024: # the License. You may obtain a copy of the License at
81024: # http://www.mozilla.org/MPL/
81024: #
81024: # Software distributed under the License is distributed on an "AS IS" basis,
81024: # WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
81024: # for the specific language governing rights and limitations under the
81024: # License.
81024: #
81024: # The Original Code is mozilla.org code.
81024: #
81024: # The Initial Developer of the Original Code is
81024: #   Mozilla Foundation.
81024: # Portions created by the Initial Developer are Copyright (C) 2011
81024: # the Initial Developer. All Rights Reserved.
81024: #
81024: # Contributor(s):
81024: #   Benoit Girard <bgirard@mozilla.com>
81024: #
81024: # Alternatively, the contents of this file may be used under the terms of
81024: # either the GNU General Public License Version 2 or later (the "GPL"), or
81024: # the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
81024: # in which case the provisions of the GPL or the LGPL are applicable instead
81024: # of those above. If you wish to allow use of your version of this file only
81024: # under the terms of either the GPL or the LGPL, and not to allow others to
81024: # use your version of this file under the terms of the MPL, indicate your
81024: # decision by deleting the provisions above and replace them with the notice
81024: # and other provisions required by the GPL or the LGPL. If you do not delete
81024: # the provisions above, a recipient may use your version of this file under
81024: # the terms of any one of the MPL, the GPL or the LGPL.
81024: #
81024: # ***** END LICENSE BLOCK *****
81024: 
81024: DEPTH       = ../..
81024: topsrcdir	  = @top_srcdir@
81024: srcdir      = @srcdir@
89347: VPATH       = $(srcdir)
81024: 
81024: include $(DEPTH)/config/autoconf.mk
81024: 
81024: EXPORTS = \
81024:   sampler.h \
81024:   sps_sampler.h \
84348:   thread_helper.h \
81024:   $(NULL)
81024: 
81024: LOCAL_INCLUDES += \
81024:   -I$(topsrcdir)/ipc/chromium/src \
82850:   $(NULL)
82850: 
82850: MODULE          = profiler
82850: MODULE_NAME     = nsProfilerModule
82850: LIBRARY_NAME    = profiler
82850: EXPORT_LIBRARY  = 1
82850: LIBXUL_LIBRARY  = 1
82850: IS_COMPONENT    = 1
82850: 
82850: CPPSRCS		= \
82850:   nsProfilerFactory.cpp \
82850:   nsProfiler.cpp \
82850:   $(NULL)
82850: 
82850: XPIDLSRCS = \
82850:   nsIProfiler.idl \
82850:   $(NULL)
82850: 
82850: EXTRA_JS_MODULES = \
82850:   Profiler.jsm \
81024:   $(NULL)
81024: 
84690: ifneq (,$(filter Android Linux,$(OS_TARGET)))
81024: 
81024: DEFINES += -DMOZ_ENABLE_PROFILER_SPS
81024: 
81024: CPPSRCS += \
86339:   shared-libraries-linux.cc \
83071:   platform-linux.cc \
81024:   TableTicker.cpp \
81024:   $(NULL)
81024: endif
83369: ifeq ($(OS_TARGET),Darwin)
83369: 
83369: DEFINES += -DMOZ_ENABLE_PROFILER_SPS
83369: 
83369: CPPSRCS += \
86340:   shared-libraries-macos.cc \
89959:   platform-macos.cc \
83369:   TableTicker.cpp \
83369:   $(NULL)
83369: endif
83369: 
84348: ifeq ($(OS_TARGET),WINNT)
84348: 
84348: DEFINES += -DMOZ_ENABLE_PROFILER_SPS
84348: 
84348: CPPSRCS += \
86341:   shared-libraries-win32.cc \
84348:   platform-win32.cc \
84348:   TableTicker.cpp \
84348:   $(NULL)
84348: endif
84348: 
81024: include $(topsrcdir)/config/rules.mk
81024: 
