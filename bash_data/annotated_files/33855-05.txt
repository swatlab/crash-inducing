16299: # Usage: ./update.sh <oggplay_src_directory>
16299: #
16299: # Copies the needed files from a directory containing the original
16299: # liboggplay source that we need for the Mozilla HTML5 media support.
26904: sed 's/#define ATTRIBUTE_ALIGNED_MAX .*//g' $1/config.h >./src/liboggplay/config.h
16608: echo "#undef HAVE_GLUT"  >>./src/liboggplay/config.h
16299: cp $1/include/oggplay/oggplay_callback_info.h ./include/oggplay/oggplay_callback_info.h
16299: cp $1/include/oggplay/oggplay_query.h ./include/oggplay/oggplay_query.h
16299: cp $1/include/oggplay/oggplay_seek.h ./include/oggplay/oggplay_seek.h
16299: cp $1/include/oggplay/oggplay_enums.h ./include/oggplay/oggplay_enums.h
16299: cp $1/include/oggplay/oggplay_tools.h ./include/oggplay/oggplay_tools.h
16299: cp $1/win32/config_win32.h ./include/oggplay/config_win32.h
16299: cp $1/include/oggplay/oggplay.h ./include/oggplay/oggplay.h
16299: cp $1/include/oggplay/oggplay_reader.h ./include/oggplay/oggplay_reader.h
16299: cp $1/README ./README
17028: cp $1/COPYING ./COPYING
16299: cp $1/src/liboggplay/oggplay_buffer.c ./src/liboggplay/oggplay_buffer.c
16299: cp $1/src/liboggplay/oggplay_tcp_reader.h ./src/liboggplay/oggplay_tcp_reader.h
16299: cp $1/src/liboggplay/oggplay_callback_info.c ./src/liboggplay/oggplay_callback_info.c
16299: cp $1/src/liboggplay/oggplay_tools.c ./src/liboggplay/oggplay_tools.c
16299: cp $1/src/liboggplay/oggplay_yuv2rgb.c ./src/liboggplay/oggplay_yuv2rgb.c
16299: cp $1/src/liboggplay/oggplay_seek.c ./src/liboggplay/oggplay_seek.c
16299: cp $1/src/liboggplay/oggplay_buffer.h ./src/liboggplay/oggplay_buffer.h
16299: cp $1/src/liboggplay/oggplay_file_reader.c ./src/liboggplay/oggplay_file_reader.c
16299: cp $1/src/liboggplay/oggplay_data.h ./src/liboggplay/oggplay_data.h
16299: cp $1/src/liboggplay/oggplay_callback.c ./src/liboggplay/oggplay_callback.c
16299: cp $1/src/liboggplay/oggplay_file_reader.h ./src/liboggplay/oggplay_file_reader.h
16299: cp $1/src/liboggplay/std_semaphore.h ./src/liboggplay/std_semaphore.h
16299: cp $1/src/liboggplay/oggplay.c ./src/liboggplay/oggplay.c
16299: cp $1/src/liboggplay/oggplay_callback.h ./src/liboggplay/oggplay_callback.h
16299: cp $1/src/liboggplay/oggplay_tcp_reader.c ./src/liboggplay/oggplay_tcp_reader.c
16299: cp $1/src/liboggplay/oggplay_query.c ./src/liboggplay/oggplay_query.c
26904: cp $1/src/liboggplay/cpu.c ./src/liboggplay/cpu.c
26904: cp $1/src/liboggplay/cpu.h ./src/liboggplay/cpu.h
26904: cp $1/src/liboggplay/oggplay_yuv2rgb_template.h ./src/liboggplay/oggplay_yuv2rgb_template.h
33012: cp $1/src/liboggplay/x86/oggplay_yuv2rgb_x86.c ./src/liboggplay/x86/oggplay_yuv2rgb_x86.c
33012: cp $1/src/liboggplay/x86/yuv2rgb_x86.h ./src/liboggplay/x86/yuv2rgb_x86.h
33012: cp $1/src/liboggplay/x86/yuv2rgb_x86_vs.h ./src/liboggplay/x86/yuv2rgb_x86_vs.h
26904: sed 's/#include "config_win32.h"//g' $1/src/liboggplay/oggplay_private.h >./src/liboggplay/oggplay_private.h1
26904: sed 's/#include <config.h>/#ifdef WIN32\
26904: #include "config_win32.h"\
26904: #else\
26904: #include <config.h>\
26904: #endif/g' ./src/liboggplay/oggplay_private.h1 >./src/liboggplay/oggplay_private.h
16299: rm ./src/liboggplay/oggplay_private.h1
16299: sed s/\#ifdef\ HAVE_INTTYPES_H/\#if\ HAVE_INTTYPES_H/g $1/src/liboggplay/oggplay_data.c >./src/liboggplay/oggplay_data.c
26920: patch -p3 < endian.patch
28474: patch -p3 < bug481921.patch
28534: patch -p3 < aspect_ratio.patch
32145: patch -p3 < bug493678.patch
28618: patch -p3 < seek_to_key_frame.patch
32145: patch -p3 < bug487519.patch
33012: rm -f src/liboggplay/os2_semaphore.c
33012: rm -f src/liboggplay/os2_semaphore.h
30594: patch -p3 < oggplay_os2.patch
29339: patch -p3 < bug496529.patch
32145: patch -p3 < bug500311.patch
32287: patch -p3 < faster_seek.patch
33012: patch -p3 < fix-17ef4ca82df28.patch
33012: patch -p3 < handle-read-errors.patch
33256: patch -p3 < fishsound_reset.patch
33412: patch -p3 < bug504843.patch
33825: patch -p3 < bug520493.patch
33855: patch -p3 < bug515217.patch
