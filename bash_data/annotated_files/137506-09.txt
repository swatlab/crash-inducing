 87653: /* This Source Code Form is subject to the terms of the Mozilla Public
 87653:  * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 87653:  * You can obtain one at http://mozilla.org/MPL/2.0/. */
 87653: "use strict";
 87653: 
 87653: function test() {
 87653:   let tab1, tab2;
 87653:   const TEST_IMAGE = "http://example.org/browser/browser/base/content/test/moz.png";
 87653: 
 87653:   waitForExplicitFinish();
 87653:   registerCleanupFunction(function cleanup() {
 87653:     gBrowser.removeTab(tab1);
 87653:     gBrowser.removeTab(tab2);
 87653:   });
 87653: 
137506:   tab1 = gBrowser.addTab(TEST_IMAGE);
 87653:   tab2 = gBrowser.addTab();
137506:   gBrowser.selectedTab = tab1;
 87653: 
137506:   tab1.linkedBrowser.addEventListener("load", function onload() {
137506:     tab1.linkedBrowser.removeEventListener("load", onload, true);
 87653:     is(ZoomManager.zoom, 1, "initial zoom level for first should be 1");
 87653: 
137506:     FullZoom.enlarge();
 87653:     let zoom = ZoomManager.zoom;
 87653:     isnot(zoom, 1, "zoom level should have changed");
 87653: 
137506:     gBrowser.selectedTab = tab2;
 87653:     is(ZoomManager.zoom, 1, "initial zoom level for second tab should be 1");
 87653: 
137506:     gBrowser.selectedTab = tab1;
 87653:     is(ZoomManager.zoom, zoom, "zoom level for first tab should not have changed");
137506: 
137506:     finish();
137506:   }, true);
 87653: }
137506: 
