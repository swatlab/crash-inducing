138652: # -*- Mode: python; c-basic-offset: 4; indent-tabs-mode: nil; tab-width: 40 -*-
134439: # vim: set filetype=python:
134439: # This Source Code Form is subject to the terms of the Mozilla Public
134439: # License, v. 2.0. If a copy of the MPL was not distributed with this
134439: # file, You can obtain one at http://mozilla.org/MPL/2.0/.
134439: 
162733: PARALLEL_DIRS += [
162733:   'encoder',
162733:   'mediasource',
162733:   'webaudio',
162733:   'webvtt'
162733: ]
134439: 
134439: if CONFIG['MOZ_RAW']:
134439:     PARALLEL_DIRS += ['raw']
134439: 
134439: if CONFIG['MOZ_OGG']:
134439:     PARALLEL_DIRS += ['ogg']
134439: 
134439: if CONFIG['MOZ_WAVE']:
134439:     PARALLEL_DIRS += ['wave']
134439: 
134439: if CONFIG['MOZ_WEBM']:
134439:     PARALLEL_DIRS += ['webm']
134439: 
134439: if CONFIG['MOZ_GSTREAMER']:
134439:     PARALLEL_DIRS += ['gstreamer']
134439: 
156220: if CONFIG['MOZ_DIRECTSHOW']:
156220:     PARALLEL_DIRS += ['directshow']
156220: 
134439: if CONFIG['MOZ_MEDIA_PLUGINS']:
134439:     PARALLEL_DIRS += ['plugins']
134439: 
134439: if CONFIG['MOZ_WMF']:
134439:     PARALLEL_DIRS += ['wmf']
134439: 
172218: if CONFIG['MOZ_FMP4']:
172218:     PARALLEL_DIRS += ['fmp4']
172218: 
161031: if CONFIG['MOZ_APPLEMEDIA']:
161031:     PARALLEL_DIRS += ['apple']
161031: 
134439: PARALLEL_DIRS += ['webrtc']
134439: 
142807: if CONFIG['MOZ_OMX_DECODER']:
134439:     PARALLEL_DIRS += ['omx']
146845:     PARALLEL_DIRS += ['omx/mediaresourcemanager']
134439: 
137676: PARALLEL_DIRS += ['webspeech']
137676: 
134439: TEST_DIRS += ['test']
134439: 
140753: EXPORTS += [
140753:     'AbstractMediaDecoder.h',
140753:     'AudioAvailableEventManager.h',
140753:     'AudioChannelFormat.h',
140753:     'AudioEventTimeline.h',
140753:     'AudioNodeEngine.h',
155437:     'AudioNodeExternalInputStream.h',
140753:     'AudioNodeStream.h',
140753:     'AudioSampleFormat.h',
140753:     'AudioSegment.h',
140753:     'AudioStream.h',
159236:     'BufferDecoder.h',
140753:     'BufferMediaResource.h',
166678:     'DecoderTraits.h',
140753:     'DOMMediaStream.h',
150744:     'EncodedBufferCache.h',
140753:     'FileBlockCache.h',
162188:     'Latency.h',
140753:     'MediaCache.h',
140753:     'MediaDecoder.h',
140753:     'MediaDecoderOwner.h',
140753:     'MediaDecoderReader.h',
140753:     'MediaDecoderStateMachine.h',
140753:     'MediaMetadataManager.h',
150744:     'MediaRecorder.h',
140753:     'MediaResource.h',
140753:     'MediaSegment.h',
140753:     'MediaStreamGraph.h',
166678:     'MP3FrameParser.h',
165531:     'RtspMediaResource.h',
140753:     'SharedBuffer.h',
140753:     'StreamBuffer.h',
140753:     'TimeVarying.h',
147552:     'TrackUnionStream.h',
140753:     'VideoFrameContainer.h',
140753:     'VideoSegment.h',
140753:     'VideoUtils.h',
140753:     'VorbisUtils.h',
140753: ]
140753: 
141508: EXPORTS.mozilla.dom += [
141508:     'AudioStreamTrack.h',
141508:     'MediaStreamTrack.h',
145067:     'TextTrack.h',
145067:     'TextTrackCue.h',
145067:     'TextTrackCueList.h',
145067:     'TextTrackList.h',
161027:     'TextTrackRegion.h',
161027:     'TextTrackRegionList.h',
150456:     'VideoPlaybackQuality.h',
141508:     'VideoStreamTrack.h',
141508: ]
145395: 
172276: SOURCES += [
145395:     'AudioAvailableEventManager.cpp',
145395:     'AudioChannelFormat.cpp',
145395:     'AudioNodeEngine.cpp',
155437:     'AudioNodeExternalInputStream.cpp',
145395:     'AudioNodeStream.cpp',
145395:     'AudioSegment.cpp',
145395:     'AudioStream.cpp',
145395:     'AudioStreamTrack.cpp',
159236:     'BufferDecoder.cpp',
172276:     'DecoderTraits.cpp',
145395:     'DOMMediaStream.cpp',
150744:     'EncodedBufferCache.cpp',
145395:     'FileBlockCache.cpp',
162188:     'Latency.cpp',
145395:     'MediaCache.cpp',
145395:     'MediaDecoder.cpp',
145395:     'MediaDecoderReader.cpp',
145395:     'MediaDecoderStateMachine.cpp',
150744:     'MediaRecorder.cpp',
145395:     'MediaResource.cpp',
145395:     'MediaStreamGraph.cpp',
145395:     'MediaStreamTrack.cpp',
166678:     'MP3FrameParser.cpp',
165531:     'RtspMediaResource.cpp',
145395:     'StreamBuffer.cpp',
145395:     'TextTrack.cpp',
145395:     'TextTrackCue.cpp',
145395:     'TextTrackCueList.cpp',
145395:     'TextTrackList.cpp',
161027:     'TextTrackRegion.cpp',
161027:     'TextTrackRegionList.cpp',
145395:     'VideoFrameContainer.cpp',
150456:     'VideoPlaybackQuality.cpp',
145395:     'VideoSegment.cpp',
145395:     'VideoStreamTrack.cpp',
145395:     'VideoUtils.cpp',
162733:     'WebVTTListener.cpp',
145395: ]
156416: 
157587: FAIL_ON_WARNINGS = True
157587: 
156416: if CONFIG['CPU_ARCH'] == 'arm' and CONFIG['BUILD_ARM_NEON']:
166802:     SOURCES += [
156416:         'AudioNodeEngineNEON.cpp',
156416:     ]
157592: 
157600: MSVC_ENABLE_PGO = True
157600: 
166713: include('/ipc/chromium/chromium-config.mozbuild')
166713: 
171742: FINAL_LIBRARY = 'gklayout'
169860: LOCAL_INCLUDES += [
169860:     '/content/base/src',
169860:     '/layout/generic',
169860:     '/layout/xul/base/src',
169860: ]
169860: 
169860: if CONFIG['MOZ_DIRECTSHOW']:
169860:     LOCAL_INCLUDES += [
169860:         '/media/webrtc/trunk/webrtc/modules/video_capture/windows',
169860:     ]
169860: 
169860: DEFINES['MOZILLA_INTERNAL_API'] = True
169860: 
169860: if CONFIG['MOZ_OMX_DECODER']:
169860:     DEFINES['MOZ_OMX_DECODER'] = True
169860: 
